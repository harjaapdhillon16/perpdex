"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@solana-mobile+wallet-standard-mobile@0.4.4_@solana+wallet-adapter-base@0.9.27_@solana+_39868dbcc2f88d65392fd1560d5edecc";
exports.ids = ["vendor-chunks/@solana-mobile+wallet-standard-mobile@0.4.4_@solana+wallet-adapter-base@0.9.27_@solana+_39868dbcc2f88d65392fd1560d5edecc"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@solana-mobile+wallet-standard-mobile@0.4.4_@solana+wallet-adapter-base@0.9.27_@solana+_39868dbcc2f88d65392fd1560d5edecc/node_modules/@solana-mobile/wallet-standard-mobile/lib/esm/index.js":
/*!*************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@solana-mobile+wallet-standard-mobile@0.4.4_@solana+wallet-adapter-base@0.9.27_@solana+_39868dbcc2f88d65392fd1560d5edecc/node_modules/@solana-mobile/wallet-standard-mobile/lib/esm/index.js ***!
  \*************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LocalSolanaMobileWalletAdapterWallet: () => (/* binding */ LocalSolanaMobileWalletAdapterWallet),\n/* harmony export */   RemoteSolanaMobileWalletAdapterWallet: () => (/* binding */ RemoteSolanaMobileWalletAdapterWallet),\n/* harmony export */   SolanaMobileWalletAdapterRemoteWalletName: () => (/* binding */ SolanaMobileWalletAdapterRemoteWalletName),\n/* harmony export */   SolanaMobileWalletAdapterWalletName: () => (/* binding */ SolanaMobileWalletAdapterWalletName),\n/* harmony export */   createDefaultAuthorizationCache: () => (/* binding */ createDefaultAuthorizationCache),\n/* harmony export */   createDefaultChainSelector: () => (/* binding */ createDefaultChainSelector),\n/* harmony export */   createDefaultWalletNotFoundHandler: () => (/* binding */ createDefaultWalletNotFoundHandler),\n/* harmony export */   defaultErrorModalWalletNotFoundHandler: () => (/* binding */ defaultErrorModalWalletNotFoundHandler),\n/* harmony export */   registerMwa: () => (/* binding */ registerMwa)\n/* harmony export */ });\n/* harmony import */ var _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @solana/wallet-standard-features */ \"(ssr)/./node_modules/.pnpm/@solana+wallet-standard-features@1.3.0/node_modules/@solana/wallet-standard-features/lib/esm/signAndSendTransaction.js\");\n/* harmony import */ var _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @solana/wallet-standard-features */ \"(ssr)/./node_modules/.pnpm/@solana+wallet-standard-features@1.3.0/node_modules/@solana/wallet-standard-features/lib/esm/signTransaction.js\");\n/* harmony import */ var _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @solana/wallet-standard-features */ \"(ssr)/./node_modules/.pnpm/@solana+wallet-standard-features@1.3.0/node_modules/@solana/wallet-standard-features/lib/esm/signMessage.js\");\n/* harmony import */ var _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @solana/wallet-standard-features */ \"(ssr)/./node_modules/.pnpm/@solana+wallet-standard-features@1.3.0/node_modules/@solana/wallet-standard-features/lib/esm/signIn.js\");\n/* harmony import */ var qrcode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! qrcode */ \"(ssr)/./node_modules/.pnpm/qrcode@1.5.4/node_modules/qrcode/lib/index.js\");\n/* harmony import */ var _solana_mobile_mobile_wallet_adapter_protocol__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @solana-mobile/mobile-wallet-adapter-protocol */ \"(ssr)/./node_modules/.pnpm/@solana-mobile+mobile-wallet-adapter-protocol@2.2.5_@solana+wallet-adapter-base@0.9.27__0ee155e4df5b5756d18ce8660be5c3fc/node_modules/@solana-mobile/mobile-wallet-adapter-protocol/lib/esm/index.js\");\n/* harmony import */ var _wallet_standard_features__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @wallet-standard/features */ \"(ssr)/./node_modules/.pnpm/@wallet-standard+features@1.1.0/node_modules/@wallet-standard/features/lib/esm/connect.js\");\n/* harmony import */ var _wallet_standard_features__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @wallet-standard/features */ \"(ssr)/./node_modules/.pnpm/@wallet-standard+features@1.1.0/node_modules/@wallet-standard/features/lib/esm/disconnect.js\");\n/* harmony import */ var _wallet_standard_features__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @wallet-standard/features */ \"(ssr)/./node_modules/.pnpm/@wallet-standard+features@1.1.0/node_modules/@wallet-standard/features/lib/esm/events.js\");\n/* harmony import */ var bs58__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bs58 */ \"(ssr)/./node_modules/.pnpm/bs58@5.0.0/node_modules/bs58/index.js\");\n/* harmony import */ var _solana_wallet_standard_chains__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @solana/wallet-standard-chains */ \"(ssr)/./node_modules/.pnpm/@solana+wallet-standard-chains@1.1.1/node_modules/@solana/wallet-standard-chains/lib/esm/index.js\");\n\n\n\n\n\n\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __classPrivateFieldGet$1(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nfunction __classPrivateFieldSet$1(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\n\nvar _EmbeddedModal_instances, _EmbeddedModal_root, _EmbeddedModal_eventListeners, _EmbeddedModal_listenersAttached, _EmbeddedModal_injectHTML, _EmbeddedModal_attachEventListeners, _EmbeddedModal_removeEventListeners, _EmbeddedModal_handleKeyDown;\nconst modalHtml = `\n<div class=\"mobile-wallet-adapter-embedded-modal-container\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"modal-title\">\n    <div data-modal-close style=\"position: absolute; width: 100%; height: 100%;\"></div>\n\t<div class=\"mobile-wallet-adapter-embedded-modal-card\">\n\t\t<div>\n\t\t\t<button data-modal-close class=\"mobile-wallet-adapter-embedded-modal-close\">\n\t\t\t\t<svg width=\"14\" height=\"14\">\n\t\t\t\t\t<path d=\"M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z\" />\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class=\"mobile-wallet-adapter-embedded-modal-content\"></div>\n\t</div>\n</div>\n`;\nconst css$2 = `\n.mobile-wallet-adapter-embedded-modal-container {\n    display: flex; /* Use flexbox to center content */\n    justify-content: center; /* Center horizontally */\n    align-items: center; /* Center vertically */\n    position: fixed; /* Stay in place */\n    z-index: 1; /* Sit on top */\n    left: 0;\n    top: 0;\n    width: 100%; /* Full width */\n    height: 100%; /* Full height */\n    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */\n    overflow-y: auto; /* enable scrolling */\n}\n\n.mobile-wallet-adapter-embedded-modal-card {\n    display: flex;\n    flex-direction: column;\n    margin: auto 20px;\n    max-width: 780px;\n    padding: 20px;\n    border-radius: 24px;\n    background: #ffffff;\n    font-family: \"Inter Tight\", \"PT Sans\", Calibri, sans-serif;\n    transform: translateY(-200%);\n    animation: slide-in 0.5s forwards;\n}\n\n@keyframes slide-in {\n    100% { transform: translateY(0%); }\n}\n\n.mobile-wallet-adapter-embedded-modal-close {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 32px;\n    height: 32px;\n    cursor: pointer;\n    background: #e4e9e9;\n    border: none;\n    border-radius: 50%;\n}\n\n.mobile-wallet-adapter-embedded-modal-close:focus-visible {\n    outline-color: red;\n}\n\n.mobile-wallet-adapter-embedded-modal-close svg {\n    fill: #546266;\n    transition: fill 200ms ease 0s;\n}\n\n.mobile-wallet-adapter-embedded-modal-close:hover svg {\n    fill: #fff;\n}\n`;\nconst fonts = `\n<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n<link href=\"https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap\" rel=\"stylesheet\">\n`;\nclass EmbeddedModal {\n    constructor() {\n        _EmbeddedModal_instances.add(this);\n        _EmbeddedModal_root.set(this, null);\n        _EmbeddedModal_eventListeners.set(this, {});\n        _EmbeddedModal_listenersAttached.set(this, false);\n        this.dom = null;\n        this.open = () => {\n            console.debug('Modal open');\n            __classPrivateFieldGet$1(this, _EmbeddedModal_instances, \"m\", _EmbeddedModal_attachEventListeners).call(this);\n            if (__classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\")) {\n                __classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\").style.display = 'flex';\n            }\n        };\n        this.close = (event = undefined) => {\n            var _a;\n            console.debug('Modal close');\n            __classPrivateFieldGet$1(this, _EmbeddedModal_instances, \"m\", _EmbeddedModal_removeEventListeners).call(this);\n            if (__classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\")) {\n                __classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\").style.display = 'none';\n            }\n            (_a = __classPrivateFieldGet$1(this, _EmbeddedModal_eventListeners, \"f\")['close']) === null || _a === void 0 ? void 0 : _a.forEach((listener) => listener(event));\n        };\n        _EmbeddedModal_handleKeyDown.set(this, (event) => {\n            if (event.key === 'Escape')\n                this.close(event);\n        });\n        // Bind methods to ensure `this` context is correct\n        this.init = this.init.bind(this);\n        __classPrivateFieldSet$1(this, _EmbeddedModal_root, document.getElementById('mobile-wallet-adapter-embedded-root-ui'), \"f\");\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log('Injecting modal');\n            __classPrivateFieldGet$1(this, _EmbeddedModal_instances, \"m\", _EmbeddedModal_injectHTML).call(this);\n        });\n    }\n    addEventListener(event, listener) {\n        var _a;\n        ((_a = __classPrivateFieldGet$1(this, _EmbeddedModal_eventListeners, \"f\")[event]) === null || _a === void 0 ? void 0 : _a.push(listener)) || (__classPrivateFieldGet$1(this, _EmbeddedModal_eventListeners, \"f\")[event] = [listener]);\n        return () => this.removeEventListener(event, listener);\n    }\n    removeEventListener(event, listener) {\n        var _a;\n        __classPrivateFieldGet$1(this, _EmbeddedModal_eventListeners, \"f\")[event] = (_a = __classPrivateFieldGet$1(this, _EmbeddedModal_eventListeners, \"f\")[event]) === null || _a === void 0 ? void 0 : _a.filter((existingListener) => listener !== existingListener);\n    }\n}\n_EmbeddedModal_root = new WeakMap(), _EmbeddedModal_eventListeners = new WeakMap(), _EmbeddedModal_listenersAttached = new WeakMap(), _EmbeddedModal_handleKeyDown = new WeakMap(), _EmbeddedModal_instances = new WeakSet(), _EmbeddedModal_injectHTML = function _EmbeddedModal_injectHTML() {\n    // Check if the HTML has already been injected\n    if (document.getElementById('mobile-wallet-adapter-embedded-root-ui')) {\n        if (!__classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\"))\n            __classPrivateFieldSet$1(this, _EmbeddedModal_root, document.getElementById('mobile-wallet-adapter-embedded-root-ui'), \"f\");\n        return;\n    }\n    // Create a container for the modal\n    __classPrivateFieldSet$1(this, _EmbeddedModal_root, document.createElement('div'), \"f\");\n    __classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\").id = 'mobile-wallet-adapter-embedded-root-ui';\n    __classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\").innerHTML = modalHtml;\n    __classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\").style.display = 'none';\n    // Add modal content\n    const content = __classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\").querySelector('.mobile-wallet-adapter-embedded-modal-content');\n    if (content)\n        content.innerHTML = this.contentHtml;\n    // Apply styles\n    const styles = document.createElement('style');\n    styles.id = 'mobile-wallet-adapter-embedded-modal-styles';\n    styles.textContent = css$2 + this.contentStyles;\n    // Create a shadow DOM to encapsulate the modal\n    const host = document.createElement('div');\n    host.innerHTML = fonts;\n    this.dom = host.attachShadow({ mode: 'closed' });\n    this.dom.appendChild(styles);\n    this.dom.appendChild(__classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\"));\n    // Append the shadow DOM host to the body\n    document.body.appendChild(host);\n}, _EmbeddedModal_attachEventListeners = function _EmbeddedModal_attachEventListeners() {\n    if (!__classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\") || __classPrivateFieldGet$1(this, _EmbeddedModal_listenersAttached, \"f\"))\n        return;\n    const closers = [...__classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\").querySelectorAll('[data-modal-close]')];\n    closers.forEach(closer => closer === null || closer === void 0 ? void 0 : closer.addEventListener('click', this.close));\n    window.addEventListener('load', this.close);\n    document.addEventListener('keydown', __classPrivateFieldGet$1(this, _EmbeddedModal_handleKeyDown, \"f\"));\n    __classPrivateFieldSet$1(this, _EmbeddedModal_listenersAttached, true, \"f\");\n}, _EmbeddedModal_removeEventListeners = function _EmbeddedModal_removeEventListeners() {\n    if (!__classPrivateFieldGet$1(this, _EmbeddedModal_listenersAttached, \"f\"))\n        return;\n    window.removeEventListener('load', this.close);\n    document.removeEventListener('keydown', __classPrivateFieldGet$1(this, _EmbeddedModal_handleKeyDown, \"f\"));\n    if (!__classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\"))\n        return;\n    const closers = [...__classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\").querySelectorAll('[data-modal-close]')];\n    closers.forEach(closer => closer === null || closer === void 0 ? void 0 : closer.removeEventListener('click', this.close));\n    __classPrivateFieldSet$1(this, _EmbeddedModal_listenersAttached, false, \"f\");\n};\n\nclass RemoteConnectionModal extends EmbeddedModal {\n    constructor() {\n        super(...arguments);\n        this.contentStyles = css$1;\n        this.contentHtml = QRCodeHtml;\n    }\n    initWithQR(qrCode) {\n        const _super = Object.create(null, {\n            init: { get: () => super.init }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            _super.init.call(this);\n            this.populateQRCode(qrCode);\n        });\n    }\n    populateQRCode(qrUrl) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const qrcodeContainer = (_a = this.dom) === null || _a === void 0 ? void 0 : _a.getElementById('mobile-wallet-adapter-embedded-modal-qr-code-container');\n            if (qrcodeContainer) {\n                const qrCodeElement = yield qrcode__WEBPACK_IMPORTED_MODULE_0__.toCanvas(qrUrl, { width: 200, margin: 0 });\n                if (qrcodeContainer.firstElementChild !== null) {\n                    qrcodeContainer.replaceChild(qrCodeElement, qrcodeContainer.firstElementChild);\n                }\n                else\n                    qrcodeContainer.appendChild(qrCodeElement);\n            }\n            else {\n                console.error('QRCode Container not found');\n            }\n        });\n    }\n}\nconst QRCodeHtml = `\n<div class=\"mobile-wallet-adapter-embedded-modal-qr-content\">\n    <div>\n        <svg class=\"mobile-wallet-adapter-embedded-modal-icon\" width=\"100%\" height=\"100%\">\n            <circle r=\"52\" cx=\"53\" cy=\"53\" fill=\"#99b3be\" stroke=\"#000000\" stroke-width=\"2\"/>\n            <path d=\"m 53,82.7305 c -3.3116,0 -6.1361,-1.169 -8.4735,-3.507 -2.338,-2.338 -3.507,-5.1625 -3.507,-8.4735 0,-3.3116 1.169,-6.1364 3.507,-8.4744 2.3374,-2.338 5.1619,-3.507 8.4735,-3.507 3.3116,0 6.1361,1.169 8.4735,3.507 2.338,2.338 3.507,5.1628 3.507,8.4744 0,3.311 -1.169,6.1355 -3.507,8.4735 -2.3374,2.338 -5.1619,3.507 -8.4735,3.507 z m 0.007,-5.25 c 1.8532,0 3.437,-0.6598 4.7512,-1.9793 1.3149,-1.3195 1.9723,-2.9058 1.9723,-4.7591 0,-1.8526 -0.6598,-3.4364 -1.9793,-4.7512 -1.3195,-1.3149 -2.9055,-1.9723 -4.7582,-1.9723 -1.8533,0 -3.437,0.6598 -4.7513,1.9793 -1.3148,1.3195 -1.9722,2.9058 -1.9722,4.7591 0,1.8527 0.6597,3.4364 1.9792,4.7512 1.3195,1.3149 2.9056,1.9723 4.7583,1.9723 z m -28,-33.5729 -3.85,-3.6347 c 4.1195,-4.025 8.8792,-7.1984 14.2791,-9.52 5.4005,-2.3223 11.2551,-3.4834 17.5639,-3.4834 6.3087,0 12.1634,1.1611 17.5639,3.4834 5.3999,2.3216 10.1596,5.495 14.2791,9.52 l -3.85,3.6347 C 77.2999,40.358 73.0684,37.5726 68.2985,35.5514 63.5292,33.5301 58.4296,32.5195 53,32.5195 c -5.4297,0 -10.5292,1.0106 -15.2985,3.0319 -4.7699,2.0212 -9.0014,4.8066 -12.6945,8.3562 z m 44.625,10.8771 c -2.2709,-2.1046 -4.7962,-3.7167 -7.5758,-4.8361 -2.7795,-1.12 -5.7983,-1.68 -9.0562,-1.68 -3.2579,0 -6.2621,0.56 -9.0125,1.68 -2.7504,1.1194 -5.2903,2.7315 -7.6195,4.8361 L 32.5189,51.15 c 2.8355,-2.6028 5.9777,-4.6086 9.4263,-6.0174 3.4481,-1.4087 7.133,-2.1131 11.0548,-2.1131 3.9217,0 7.5979,0.7044 11.0285,2.1131 3.43,1.4088 6.5631,3.4146 9.3992,6.0174 z\"/>\n        </svg>\n        <div class=\"mobile-wallet-adapter-embedded-modal-title\">Remote Mobile Wallet Adapter</div>\n    </div>\n    <div>\n        <div>\n            <h4 class=\"mobile-wallet-adapter-embedded-modal-qr-label\">\n                Open your wallet and scan this code\n            </h4>\n        </div>\n        <div id=\"mobile-wallet-adapter-embedded-modal-qr-code-container\" class=\"mobile-wallet-adapter-embedded-modal-qr-code-container\"></div>\n    </div>\n</div>\n<div class=\"mobile-wallet-adapter-embedded-modal-divider\"><hr></div>\n<div class=\"mobile-wallet-adapter-embedded-modal-footer\">\n    <div class=\"mobile-wallet-adapter-embedded-modal-subtitle\">\n        Follow the instructions on your device. When you're finished, this screen will update.\n    </div>\n    <div class=\"mobile-wallet-adapter-embedded-modal-progress-badge\">\n        <div>\n            <div class=\"spinner\">\n                <div class=\"leftWrapper\">\n                    <div class=\"left\">\n                        <div class=\"circle\"></div>\n                    </div>\n                </div>\n                <div class=\"rightWrapper\">\n                    <div class=\"right\">\n                        <div class=\"circle\"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div>Waiting for scan</div>\n    </div>\n</div>\n`;\nconst css$1 = `\n.mobile-wallet-adapter-embedded-modal-qr-content {\n    display: flex; \n    margin-top: 10px;\n    padding: 10px;\n}\n\n.mobile-wallet-adapter-embedded-modal-qr-content > div:first-child {\n    display: flex;\n    flex-direction: column;\n    flex: 2;\n    margin-top: auto;\n    margin-right: 30px;\n}\n\n.mobile-wallet-adapter-embedded-modal-qr-content > div:nth-child(2) {\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    margin-left: auto;\n}\n\n.mobile-wallet-adapter-embedded-modal-footer {\n    display: flex;\n    padding: 10px;\n}\n\n.mobile-wallet-adapter-embedded-modal-icon {}\n\n.mobile-wallet-adapter-embedded-modal-title {\n    color: #000000;\n    font-size: 2.5em;\n    font-weight: 600;\n}\n\n.mobile-wallet-adapter-embedded-modal-qr-label {\n    text-align: right;\n    color: #000000;\n}\n\n.mobile-wallet-adapter-embedded-modal-qr-code-container {\n    margin-left: auto;\n}\n\n.mobile-wallet-adapter-embedded-modal-divider {\n    margin-top: 20px;\n    padding-left: 10px;\n    padding-right: 10px;\n}\n\n.mobile-wallet-adapter-embedded-modal-divider hr {\n    border-top: 1px solid #D9DEDE;\n}\n\n.mobile-wallet-adapter-embedded-modal-subtitle {\n    margin: auto;\n    margin-right: 60px;\n    padding: 20px;\n    color: #6E8286;\n}\n\n.mobile-wallet-adapter-embedded-modal-progress-badge {\n    display: flex;\n    background: #F7F8F8;\n    height: 56px;\n    min-width: 200px;\n    margin: auto;\n    padding-left: 20px;\n    padding-right: 20px;\n    border-radius: 18px;\n    color: #A8B6B8;\n    align-items: center;\n}\n\n.mobile-wallet-adapter-embedded-modal-progress-badge > div:first-child {\n    margin-left: auto;\n    margin-right: 20px;\n}\n\n.mobile-wallet-adapter-embedded-modal-progress-badge > div:nth-child(2) {\n    margin-right: auto;\n}\n\n/* Smaller screens */\n@media all and (max-width: 600px) {\n    .mobile-wallet-adapter-embedded-modal-card {\n        text-align: center;\n    }\n    .mobile-wallet-adapter-embedded-modal-qr-content {\n        flex-direction: column;\n    }\n    .mobile-wallet-adapter-embedded-modal-qr-content > div:first-child {\n        margin: auto;\n    }\n    .mobile-wallet-adapter-embedded-modal-qr-content > div:nth-child(2) {\n        margin: auto;\n        flex: 2 auto;\n    }\n    .mobile-wallet-adapter-embedded-modal-footer {\n        flex-direction: column;\n    }\n    .mobile-wallet-adapter-embedded-modal-icon {\n        display: none;\n    }\n    .mobile-wallet-adapter-embedded-modal-title {\n        font-size: 1.5em;\n    }\n    .mobile-wallet-adapter-embedded-modal-subtitle {\n        margin-right: unset;\n    }\n    .mobile-wallet-adapter-embedded-modal-qr-label {\n        text-align: center;\n    }\n    .mobile-wallet-adapter-embedded-modal-qr-code-container {\n        margin: auto;\n    }\n}\n\n/* Spinner */\n@keyframes spinLeft {\n    0% {\n        transform: rotate(20deg);\n    }\n    50% {\n        transform: rotate(160deg);\n    }\n    100% {\n        transform: rotate(20deg);\n    }\n}\n@keyframes spinRight {\n    0% {\n        transform: rotate(160deg);\n    }\n    50% {\n        transform: rotate(20deg);\n    }\n    100% {\n        transform: rotate(160deg);\n    }\n}\n@keyframes spin {\n    0% {\n        transform: rotate(0deg);\n    }\n    100% {\n        transform: rotate(2520deg);\n    }\n}\n\n.spinner {\n    position: relative;\n    width: 1.5em;\n    height: 1.5em;\n    margin: auto;\n    animation: spin 10s linear infinite;\n}\n.spinner::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n}\n.right, .rightWrapper, .left, .leftWrapper {\n    position: absolute;\n    top: 0;\n    overflow: hidden;\n    width: .75em;\n    height: 1.5em;\n}\n.left, .leftWrapper {\n    left: 0;\n}\n.right {\n    left: -12px;\n}\n.rightWrapper {\n    right: 0;\n}\n.circle {\n    border: .125em solid #A8B6B8;\n    width: 1.25em; /* 1.5em - 2*0.125em border */\n    height: 1.25em; /* 1.5em - 2*0.125em border */\n    border-radius: 0.75em; /* 0.5*1.5em spinner size 8 */\n}\n.left {\n    transform-origin: 100% 50%;\n    animation: spinLeft 2.5s cubic-bezier(.2,0,.8,1) infinite;\n}\n.right {\n    transform-origin: 100% 50%;\n    animation: spinRight 2.5s cubic-bezier(.2,0,.8,1) infinite;\n}\n`;\n\nconst icon = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=';\n\nfunction fromUint8Array(byteArray) {\n    return window.btoa(String.fromCharCode.call(null, ...byteArray));\n}\nfunction toUint8Array(base64EncodedByteArray) {\n    return new Uint8Array(window\n        .atob(base64EncodedByteArray)\n        .split('')\n        .map((c) => c.charCodeAt(0)));\n}\n\nvar _LocalSolanaMobileWalletAdapterWallet_instances, _LocalSolanaMobileWalletAdapterWallet_listeners, _LocalSolanaMobileWalletAdapterWallet_version, _LocalSolanaMobileWalletAdapterWallet_name, _LocalSolanaMobileWalletAdapterWallet_url, _LocalSolanaMobileWalletAdapterWallet_icon, _LocalSolanaMobileWalletAdapterWallet_appIdentity, _LocalSolanaMobileWalletAdapterWallet_authorization, _LocalSolanaMobileWalletAdapterWallet_authorizationCache, _LocalSolanaMobileWalletAdapterWallet_connecting, _LocalSolanaMobileWalletAdapterWallet_connectionGeneration, _LocalSolanaMobileWalletAdapterWallet_chains, _LocalSolanaMobileWalletAdapterWallet_chainSelector, _LocalSolanaMobileWalletAdapterWallet_optionalFeatures, _LocalSolanaMobileWalletAdapterWallet_onWalletNotFound, _LocalSolanaMobileWalletAdapterWallet_on, _LocalSolanaMobileWalletAdapterWallet_emit, _LocalSolanaMobileWalletAdapterWallet_off, _LocalSolanaMobileWalletAdapterWallet_connect, _LocalSolanaMobileWalletAdapterWallet_performAuthorization, _LocalSolanaMobileWalletAdapterWallet_handleAuthorizationResult, _LocalSolanaMobileWalletAdapterWallet_handleWalletCapabilitiesResult, _LocalSolanaMobileWalletAdapterWallet_performReauthorization, _LocalSolanaMobileWalletAdapterWallet_disconnect, _LocalSolanaMobileWalletAdapterWallet_transact, _LocalSolanaMobileWalletAdapterWallet_assertIsAuthorized, _LocalSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts, _LocalSolanaMobileWalletAdapterWallet_performSignTransactions, _LocalSolanaMobileWalletAdapterWallet_performSignAndSendTransaction, _LocalSolanaMobileWalletAdapterWallet_signAndSendTransaction, _LocalSolanaMobileWalletAdapterWallet_signTransaction, _LocalSolanaMobileWalletAdapterWallet_signMessage, _LocalSolanaMobileWalletAdapterWallet_signIn, _LocalSolanaMobileWalletAdapterWallet_performSignIn, _RemoteSolanaMobileWalletAdapterWallet_instances, _RemoteSolanaMobileWalletAdapterWallet_listeners, _RemoteSolanaMobileWalletAdapterWallet_version, _RemoteSolanaMobileWalletAdapterWallet_name, _RemoteSolanaMobileWalletAdapterWallet_url, _RemoteSolanaMobileWalletAdapterWallet_icon, _RemoteSolanaMobileWalletAdapterWallet_appIdentity, _RemoteSolanaMobileWalletAdapterWallet_authorization, _RemoteSolanaMobileWalletAdapterWallet_authorizationCache, _RemoteSolanaMobileWalletAdapterWallet_connecting, _RemoteSolanaMobileWalletAdapterWallet_connectionGeneration, _RemoteSolanaMobileWalletAdapterWallet_chains, _RemoteSolanaMobileWalletAdapterWallet_chainSelector, _RemoteSolanaMobileWalletAdapterWallet_optionalFeatures, _RemoteSolanaMobileWalletAdapterWallet_onWalletNotFound, _RemoteSolanaMobileWalletAdapterWallet_hostAuthority, _RemoteSolanaMobileWalletAdapterWallet_session, _RemoteSolanaMobileWalletAdapterWallet_on, _RemoteSolanaMobileWalletAdapterWallet_emit, _RemoteSolanaMobileWalletAdapterWallet_off, _RemoteSolanaMobileWalletAdapterWallet_connect, _RemoteSolanaMobileWalletAdapterWallet_performAuthorization, _RemoteSolanaMobileWalletAdapterWallet_handleAuthorizationResult, _RemoteSolanaMobileWalletAdapterWallet_handleWalletCapabilitiesResult, _RemoteSolanaMobileWalletAdapterWallet_performReauthorization, _RemoteSolanaMobileWalletAdapterWallet_disconnect, _RemoteSolanaMobileWalletAdapterWallet_transact, _RemoteSolanaMobileWalletAdapterWallet_assertIsAuthorized, _RemoteSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts, _RemoteSolanaMobileWalletAdapterWallet_performSignTransactions, _RemoteSolanaMobileWalletAdapterWallet_performSignAndSendTransaction, _RemoteSolanaMobileWalletAdapterWallet_signAndSendTransaction, _RemoteSolanaMobileWalletAdapterWallet_signTransaction, _RemoteSolanaMobileWalletAdapterWallet_signMessage, _RemoteSolanaMobileWalletAdapterWallet_signIn, _RemoteSolanaMobileWalletAdapterWallet_performSignIn;\nconst SolanaMobileWalletAdapterWalletName = 'Mobile Wallet Adapter';\nconst SolanaMobileWalletAdapterRemoteWalletName = 'Remote Mobile Wallet Adapter';\nconst SIGNATURE_LENGTH_IN_BYTES = 64;\nconst DEFAULT_FEATURES = [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_3__.SolanaSignAndSendTransaction, _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_4__.SolanaSignTransaction, _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_5__.SolanaSignMessage, _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_6__.SolanaSignIn];\nclass LocalSolanaMobileWalletAdapterWallet {\n    constructor(config) {\n        _LocalSolanaMobileWalletAdapterWallet_instances.add(this);\n        _LocalSolanaMobileWalletAdapterWallet_listeners.set(this, {});\n        _LocalSolanaMobileWalletAdapterWallet_version.set(this, '1.0.0'); // wallet-standard version\n        _LocalSolanaMobileWalletAdapterWallet_name.set(this, SolanaMobileWalletAdapterWalletName);\n        _LocalSolanaMobileWalletAdapterWallet_url.set(this, 'https://solanamobile.com/wallets');\n        _LocalSolanaMobileWalletAdapterWallet_icon.set(this, icon);\n        _LocalSolanaMobileWalletAdapterWallet_appIdentity.set(this, void 0);\n        _LocalSolanaMobileWalletAdapterWallet_authorization.set(this, void 0);\n        _LocalSolanaMobileWalletAdapterWallet_authorizationCache.set(this, void 0);\n        _LocalSolanaMobileWalletAdapterWallet_connecting.set(this, false);\n        /**\n         * Every time the connection is recycled in some way (eg. `disconnect()` is called)\n         * increment this and use it to make sure that `transact` calls from the previous\n         * 'generation' don't continue to do work and throw exceptions.\n         */\n        _LocalSolanaMobileWalletAdapterWallet_connectionGeneration.set(this, 0);\n        _LocalSolanaMobileWalletAdapterWallet_chains.set(this, []);\n        _LocalSolanaMobileWalletAdapterWallet_chainSelector.set(this, void 0);\n        _LocalSolanaMobileWalletAdapterWallet_optionalFeatures.set(this, void 0);\n        _LocalSolanaMobileWalletAdapterWallet_onWalletNotFound.set(this, void 0);\n        _LocalSolanaMobileWalletAdapterWallet_on.set(this, (event, listener) => {\n            var _a;\n            ((_a = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_listeners, \"f\")[event]) === null || _a === void 0 ? void 0 : _a.push(listener)) || (__classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_listeners, \"f\")[event] = [listener]);\n            return () => __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_instances, \"m\", _LocalSolanaMobileWalletAdapterWallet_off).call(this, event, listener);\n        });\n        _LocalSolanaMobileWalletAdapterWallet_connect.set(this, ({ silent } = {}) => __awaiter(this, void 0, void 0, function* () {\n            if (__classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_connecting, \"f\") || this.connected) {\n                return { accounts: this.accounts };\n            }\n            __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_connecting, true, \"f\");\n            try {\n                if (silent) {\n                    const cachedAuthorization = yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").get();\n                    if (cachedAuthorization) {\n                        yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_handleWalletCapabilitiesResult, \"f\").call(this, cachedAuthorization.capabilities);\n                        yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_handleAuthorizationResult, \"f\").call(this, cachedAuthorization);\n                    }\n                    else {\n                        return { accounts: this.accounts };\n                    }\n                }\n                else {\n                    yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_performAuthorization, \"f\").call(this);\n                }\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n            finally {\n                __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_connecting, false, \"f\");\n            }\n            return { accounts: this.accounts };\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_performAuthorization.set(this, (signInPayload) => __awaiter(this, void 0, void 0, function* () {\n            try {\n                const cachedAuthorizationResult = yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").get();\n                if (cachedAuthorizationResult) {\n                    // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                    __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_handleAuthorizationResult, \"f\").call(this, cachedAuthorizationResult);\n                    return cachedAuthorizationResult;\n                }\n                const selectedChain = yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_chainSelector, \"f\").select(__classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_chains, \"f\"));\n                return yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_transact, \"f\").call(this, (wallet) => __awaiter(this, void 0, void 0, function* () {\n                    const [capabilities, mwaAuthorizationResult] = yield Promise.all([\n                        wallet.getCapabilities(),\n                        wallet.authorize({\n                            chain: selectedChain,\n                            identity: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_appIdentity, \"f\"),\n                            sign_in_payload: signInPayload,\n                        })\n                    ]);\n                    const accounts = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts, \"f\").call(this, mwaAuthorizationResult.accounts);\n                    const authorization = Object.assign(Object.assign({}, mwaAuthorizationResult), { accounts, chain: selectedChain, capabilities: capabilities });\n                    // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                    Promise.all([\n                        __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_handleWalletCapabilitiesResult, \"f\").call(this, capabilities),\n                        __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").set(authorization),\n                        __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_handleAuthorizationResult, \"f\").call(this, authorization),\n                    ]);\n                    return authorization;\n                }));\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_handleAuthorizationResult.set(this, (authorization) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const didPublicKeysChange = \n            // Case 1: We started from having no authorization.\n            __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\") == null ||\n                // Case 2: The number of authorized accounts changed.\n                ((_a = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\")) === null || _a === void 0 ? void 0 : _a.accounts.length) !== authorization.accounts.length ||\n                // Case 3: The new list of addresses isn't exactly the same as the old list, in the same order.\n                __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\").accounts.some((account, ii) => account.address !== authorization.accounts[ii].address);\n            __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, authorization, \"f\");\n            if (didPublicKeysChange) {\n                __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_instances, \"m\", _LocalSolanaMobileWalletAdapterWallet_emit).call(this, 'change', { accounts: this.accounts });\n            }\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_handleWalletCapabilitiesResult.set(this, (capabilities) => __awaiter(this, void 0, void 0, function* () {\n            // TODO: investigate why using SolanaSignTransactions constant breaks treeshaking\n            const supportsSignTransaction = capabilities.features.includes('solana:signTransactions'); //SolanaSignTransactions);\n            const supportsSignAndSendTransaction = capabilities.supports_sign_and_send_transactions;\n            const didCapabilitiesChange = _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_3__.SolanaSignAndSendTransaction in this.features !== supportsSignAndSendTransaction ||\n                _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_4__.SolanaSignTransaction in this.features !== supportsSignTransaction;\n            __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_optionalFeatures, Object.assign(Object.assign({}, ((supportsSignAndSendTransaction || (!supportsSignAndSendTransaction && !supportsSignTransaction)) && {\n                [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_3__.SolanaSignAndSendTransaction]: {\n                    version: '1.0.0',\n                    supportedTransactionVersions: ['legacy', 0],\n                    signAndSendTransaction: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_signAndSendTransaction, \"f\"),\n                },\n            })), (supportsSignTransaction && {\n                [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_4__.SolanaSignTransaction]: {\n                    version: '1.0.0',\n                    supportedTransactionVersions: ['legacy', 0],\n                    signTransaction: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_signTransaction, \"f\"),\n                },\n            })), \"f\");\n            if (didCapabilitiesChange) {\n                __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_instances, \"m\", _LocalSolanaMobileWalletAdapterWallet_emit).call(this, 'change', { features: this.features });\n            }\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_performReauthorization.set(this, (wallet, authToken, chain) => __awaiter(this, void 0, void 0, function* () {\n            var _b, _c;\n            try {\n                const [capabilities, mwaAuthorizationResult] = yield Promise.all([\n                    (_c = (_b = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\")) === null || _b === void 0 ? void 0 : _b.capabilities) !== null && _c !== void 0 ? _c : yield wallet.getCapabilities(),\n                    wallet.authorize({\n                        auth_token: authToken,\n                        identity: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_appIdentity, \"f\"),\n                        chain: chain\n                    })\n                ]);\n                const accounts = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts, \"f\").call(this, mwaAuthorizationResult.accounts);\n                const authorization = Object.assign(Object.assign({}, mwaAuthorizationResult), { accounts: accounts, chain: chain, capabilities: capabilities });\n                // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                Promise.all([\n                    __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").set(authorization),\n                    __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_handleAuthorizationResult, \"f\").call(this, authorization),\n                ]);\n            }\n            catch (e) {\n                __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_disconnect, \"f\").call(this);\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_disconnect.set(this, () => __awaiter(this, void 0, void 0, function* () {\n            var _d;\n            __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").clear(); // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n            __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_connecting, false, \"f\");\n            __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_connectionGeneration, (_d = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_connectionGeneration, \"f\"), _d++, _d), \"f\");\n            __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, undefined, \"f\");\n            __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_instances, \"m\", _LocalSolanaMobileWalletAdapterWallet_emit).call(this, 'change', { accounts: this.accounts });\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_transact.set(this, (callback) => __awaiter(this, void 0, void 0, function* () {\n            var _e;\n            const walletUriBase = (_e = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\")) === null || _e === void 0 ? void 0 : _e.wallet_uri_base;\n            const config = walletUriBase ? { baseUri: walletUriBase } : undefined;\n            const currentConnectionGeneration = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_connectionGeneration, \"f\");\n            try {\n                return yield (0,_solana_mobile_mobile_wallet_adapter_protocol__WEBPACK_IMPORTED_MODULE_1__.transact)(callback, config);\n            }\n            catch (e) {\n                if (__classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_connectionGeneration, \"f\") !== currentConnectionGeneration) {\n                    yield new Promise(() => { }); // Never resolve.\n                }\n                if (e instanceof Error &&\n                    e.name === 'SolanaMobileWalletAdapterError' &&\n                    e.code === 'ERROR_WALLET_NOT_FOUND') {\n                    yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_onWalletNotFound, \"f\").call(this, this);\n                }\n                throw e;\n            }\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_assertIsAuthorized.set(this, () => {\n            if (!__classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\"))\n                throw new Error('Wallet not connected');\n            return { authToken: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\").auth_token, chain: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\").chain };\n        });\n        _LocalSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts.set(this, (accounts) => {\n            return accounts.map((account) => {\n                var _a, _b;\n                const publicKey = toUint8Array(account.address);\n                return {\n                    address: bs58__WEBPACK_IMPORTED_MODULE_2__.encode(publicKey),\n                    publicKey,\n                    label: account.label,\n                    icon: account.icon,\n                    chains: (_a = account.chains) !== null && _a !== void 0 ? _a : __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_chains, \"f\"),\n                    // TODO: get supported features from getCapabilities API \n                    features: (_b = account.features) !== null && _b !== void 0 ? _b : DEFAULT_FEATURES\n                };\n            });\n        });\n        _LocalSolanaMobileWalletAdapterWallet_performSignTransactions.set(this, (transactions) => __awaiter(this, void 0, void 0, function* () {\n            const { authToken, chain } = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_assertIsAuthorized, \"f\").call(this);\n            try {\n                const base64Transactions = transactions.map((tx) => { return fromUint8Array(tx); });\n                return yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_transact, \"f\").call(this, (wallet) => __awaiter(this, void 0, void 0, function* () {\n                    yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_performReauthorization, \"f\").call(this, wallet, authToken, chain);\n                    const signedTransactions = (yield wallet.signTransactions({\n                        payloads: base64Transactions,\n                    })).signed_payloads.map(toUint8Array);\n                    return signedTransactions;\n                }));\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_performSignAndSendTransaction.set(this, (transaction, options) => __awaiter(this, void 0, void 0, function* () {\n            const { authToken, chain } = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_assertIsAuthorized, \"f\").call(this);\n            try {\n                return yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_transact, \"f\").call(this, (wallet) => __awaiter(this, void 0, void 0, function* () {\n                    const [capabilities, _1] = yield Promise.all([\n                        wallet.getCapabilities(),\n                        __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_performReauthorization, \"f\").call(this, wallet, authToken, chain)\n                    ]);\n                    if (capabilities.supports_sign_and_send_transactions) {\n                        const base64Transaction = fromUint8Array(transaction);\n                        const signatures = (yield wallet.signAndSendTransactions(Object.assign(Object.assign({}, options), { payloads: [base64Transaction] }))).signatures.map(toUint8Array);\n                        return signatures[0];\n                    }\n                    else {\n                        throw new Error('connected wallet does not support signAndSendTransaction');\n                    }\n                }));\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_signAndSendTransaction.set(this, (...inputs) => __awaiter(this, void 0, void 0, function* () {\n            const outputs = [];\n            for (const input of inputs) {\n                const signature = yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_performSignAndSendTransaction, \"f\").call(this, input.transaction, input.options);\n                outputs.push({ signature });\n            }\n            return outputs;\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_signTransaction.set(this, (...inputs) => __awaiter(this, void 0, void 0, function* () {\n            return (yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_performSignTransactions, \"f\").call(this, inputs.map(({ transaction }) => transaction)))\n                .map((signedTransaction) => {\n                return { signedTransaction };\n            });\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_signMessage.set(this, (...inputs) => __awaiter(this, void 0, void 0, function* () {\n            const { authToken, chain } = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_assertIsAuthorized, \"f\").call(this);\n            const addresses = inputs.map(({ account }) => fromUint8Array(account.publicKey));\n            const messages = inputs.map(({ message }) => fromUint8Array(message));\n            try {\n                return yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_transact, \"f\").call(this, (wallet) => __awaiter(this, void 0, void 0, function* () {\n                    yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_performReauthorization, \"f\").call(this, wallet, authToken, chain);\n                    const signedMessages = (yield wallet.signMessages({\n                        addresses: addresses,\n                        payloads: messages,\n                    })).signed_payloads.map(toUint8Array);\n                    return signedMessages.map((signedMessage) => {\n                        return { signedMessage: signedMessage, signature: signedMessage.slice(-SIGNATURE_LENGTH_IN_BYTES) };\n                    });\n                }));\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_signIn.set(this, (...inputs) => __awaiter(this, void 0, void 0, function* () {\n            const outputs = [];\n            if (inputs.length > 1) {\n                for (const input of inputs) {\n                    outputs.push(yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_performSignIn, \"f\").call(this, input));\n                }\n            }\n            else {\n                return [yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_performSignIn, \"f\").call(this, inputs[0])];\n            }\n            return outputs;\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_performSignIn.set(this, (input) => __awaiter(this, void 0, void 0, function* () {\n            var _f, _g, _h;\n            __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_connecting, true, \"f\");\n            try {\n                const authorizationResult = yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_performAuthorization, \"f\").call(this, Object.assign(Object.assign({}, input), { domain: (_f = input === null || input === void 0 ? void 0 : input.domain) !== null && _f !== void 0 ? _f : window.location.host }));\n                if (!authorizationResult.sign_in_result) {\n                    throw new Error(\"Sign in failed, no sign in result returned by wallet\");\n                }\n                const signedInAddress = authorizationResult.sign_in_result.address;\n                const signedInAccount = authorizationResult.accounts.find(acc => acc.address == signedInAddress);\n                return {\n                    account: Object.assign(Object.assign({}, signedInAccount !== null && signedInAccount !== void 0 ? signedInAccount : {\n                        address: bs58__WEBPACK_IMPORTED_MODULE_2__.encode(toUint8Array(signedInAddress))\n                    }), { publicKey: toUint8Array(signedInAddress), chains: (_g = signedInAccount === null || signedInAccount === void 0 ? void 0 : signedInAccount.chains) !== null && _g !== void 0 ? _g : __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_chains, \"f\"), features: (_h = signedInAccount === null || signedInAccount === void 0 ? void 0 : signedInAccount.features) !== null && _h !== void 0 ? _h : authorizationResult.capabilities.features }),\n                    signedMessage: toUint8Array(authorizationResult.sign_in_result.signed_message),\n                    signature: toUint8Array(authorizationResult.sign_in_result.signature)\n                };\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n            finally {\n                __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_connecting, false, \"f\");\n            }\n        }));\n        __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorizationCache, config.authorizationCache, \"f\");\n        __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_appIdentity, config.appIdentity, \"f\");\n        __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_chains, config.chains, \"f\");\n        __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_chainSelector, config.chainSelector, \"f\");\n        __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_onWalletNotFound, config.onWalletNotFound, \"f\");\n        __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_optionalFeatures, {\n            // In MWA 1.0, signAndSend is optional and signTransaction is mandatory. Whereas in MWA 2.0+,\n            // signAndSend is mandatory and signTransaction is optional (and soft deprecated). As of mid\n            // 2025, all MWA wallets support both signAndSendTransaction and signTransaction so its safe\n            // assume both are supported here. The features will be updated based on the actual connected \n            // wallets capabilities during connection regardless, so this is safe. \n            [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_3__.SolanaSignAndSendTransaction]: {\n                version: '1.0.0',\n                supportedTransactionVersions: ['legacy', 0],\n                signAndSendTransaction: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_signAndSendTransaction, \"f\"),\n            },\n            [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_4__.SolanaSignTransaction]: {\n                version: '1.0.0',\n                supportedTransactionVersions: ['legacy', 0],\n                signTransaction: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_signTransaction, \"f\"),\n            },\n        }, \"f\");\n    }\n    get version() {\n        return __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_version, \"f\");\n    }\n    get name() {\n        return __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_name, \"f\");\n    }\n    get url() {\n        return __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_url, \"f\");\n    }\n    get icon() {\n        return __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_icon, \"f\");\n    }\n    get chains() {\n        return __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_chains, \"f\");\n    }\n    get features() {\n        return Object.assign({ [_wallet_standard_features__WEBPACK_IMPORTED_MODULE_7__.StandardConnect]: {\n                version: '1.0.0',\n                connect: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_connect, \"f\"),\n            }, [_wallet_standard_features__WEBPACK_IMPORTED_MODULE_8__.StandardDisconnect]: {\n                version: '1.0.0',\n                disconnect: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_disconnect, \"f\"),\n            }, [_wallet_standard_features__WEBPACK_IMPORTED_MODULE_9__.StandardEvents]: {\n                version: '1.0.0',\n                on: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_on, \"f\"),\n            }, [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_5__.SolanaSignMessage]: {\n                version: '1.0.0',\n                signMessage: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_signMessage, \"f\"),\n            }, [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_6__.SolanaSignIn]: {\n                version: '1.0.0',\n                signIn: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_signIn, \"f\"),\n            } }, __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_optionalFeatures, \"f\"));\n    }\n    get accounts() {\n        var _a, _b;\n        return (_b = (_a = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\")) === null || _a === void 0 ? void 0 : _a.accounts) !== null && _b !== void 0 ? _b : [];\n    }\n    get connected() {\n        return !!__classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\");\n    }\n    get isAuthorized() {\n        return !!__classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\");\n    }\n    get currentAuthorization() {\n        return __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\");\n    }\n    get cachedAuthorizationResult() {\n        return __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").get();\n    }\n}\n_LocalSolanaMobileWalletAdapterWallet_listeners = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_version = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_name = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_url = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_icon = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_appIdentity = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_authorization = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_authorizationCache = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_connecting = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_connectionGeneration = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_chains = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_chainSelector = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_optionalFeatures = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_onWalletNotFound = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_on = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_connect = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_performAuthorization = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_handleAuthorizationResult = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_handleWalletCapabilitiesResult = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_performReauthorization = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_disconnect = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_transact = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_assertIsAuthorized = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_performSignTransactions = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_performSignAndSendTransaction = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_signAndSendTransaction = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_signTransaction = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_signMessage = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_signIn = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_performSignIn = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_instances = new WeakSet(), _LocalSolanaMobileWalletAdapterWallet_emit = function _LocalSolanaMobileWalletAdapterWallet_emit(event, ...args) {\n    var _a;\n    // eslint-disable-next-line prefer-spread\n    (_a = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_listeners, \"f\")[event]) === null || _a === void 0 ? void 0 : _a.forEach((listener) => listener.apply(null, args));\n}, _LocalSolanaMobileWalletAdapterWallet_off = function _LocalSolanaMobileWalletAdapterWallet_off(event, listener) {\n    var _a;\n    __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_listeners, \"f\")[event] = (_a = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_listeners, \"f\")[event]) === null || _a === void 0 ? void 0 : _a.filter((existingListener) => listener !== existingListener);\n};\nclass RemoteSolanaMobileWalletAdapterWallet {\n    constructor(config) {\n        _RemoteSolanaMobileWalletAdapterWallet_instances.add(this);\n        _RemoteSolanaMobileWalletAdapterWallet_listeners.set(this, {});\n        _RemoteSolanaMobileWalletAdapterWallet_version.set(this, '1.0.0'); // wallet-standard version\n        _RemoteSolanaMobileWalletAdapterWallet_name.set(this, SolanaMobileWalletAdapterRemoteWalletName);\n        _RemoteSolanaMobileWalletAdapterWallet_url.set(this, 'https://solanamobile.com/wallets');\n        _RemoteSolanaMobileWalletAdapterWallet_icon.set(this, icon);\n        _RemoteSolanaMobileWalletAdapterWallet_appIdentity.set(this, void 0);\n        _RemoteSolanaMobileWalletAdapterWallet_authorization.set(this, void 0);\n        _RemoteSolanaMobileWalletAdapterWallet_authorizationCache.set(this, void 0);\n        _RemoteSolanaMobileWalletAdapterWallet_connecting.set(this, false);\n        /**\n         * Every time the connection is recycled in some way (eg. `disconnect()` is called)\n         * increment this and use it to make sure that `transact` calls from the previous\n         * 'generation' don't continue to do work and throw exceptions.\n         */\n        _RemoteSolanaMobileWalletAdapterWallet_connectionGeneration.set(this, 0);\n        _RemoteSolanaMobileWalletAdapterWallet_chains.set(this, []);\n        _RemoteSolanaMobileWalletAdapterWallet_chainSelector.set(this, void 0);\n        _RemoteSolanaMobileWalletAdapterWallet_optionalFeatures.set(this, void 0);\n        _RemoteSolanaMobileWalletAdapterWallet_onWalletNotFound.set(this, void 0);\n        _RemoteSolanaMobileWalletAdapterWallet_hostAuthority.set(this, void 0);\n        _RemoteSolanaMobileWalletAdapterWallet_session.set(this, void 0);\n        _RemoteSolanaMobileWalletAdapterWallet_on.set(this, (event, listener) => {\n            var _a;\n            ((_a = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_listeners, \"f\")[event]) === null || _a === void 0 ? void 0 : _a.push(listener)) || (__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_listeners, \"f\")[event] = [listener]);\n            return () => __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_instances, \"m\", _RemoteSolanaMobileWalletAdapterWallet_off).call(this, event, listener);\n        });\n        _RemoteSolanaMobileWalletAdapterWallet_connect.set(this, ({ silent } = {}) => __awaiter(this, void 0, void 0, function* () {\n            if (__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connecting, \"f\") || this.connected) {\n                return { accounts: this.accounts };\n            }\n            __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connecting, true, \"f\");\n            try {\n                yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_performAuthorization, \"f\").call(this);\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n            finally {\n                __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connecting, false, \"f\");\n            }\n            return { accounts: this.accounts };\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_performAuthorization.set(this, (signInPayload) => __awaiter(this, void 0, void 0, function* () {\n            try {\n                const cachedAuthorizationResult = yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").get();\n                if (cachedAuthorizationResult) {\n                    // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                    __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_handleAuthorizationResult, \"f\").call(this, cachedAuthorizationResult);\n                    return cachedAuthorizationResult;\n                }\n                if (__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_session, \"f\"))\n                    __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_session, undefined, \"f\");\n                const selectedChain = yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_chainSelector, \"f\").select(__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_chains, \"f\"));\n                return yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_transact, \"f\").call(this, (wallet) => __awaiter(this, void 0, void 0, function* () {\n                    const [capabilities, mwaAuthorizationResult] = yield Promise.all([\n                        wallet.getCapabilities(),\n                        wallet.authorize({\n                            chain: selectedChain,\n                            identity: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_appIdentity, \"f\"),\n                            sign_in_payload: signInPayload,\n                        })\n                    ]);\n                    const accounts = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts, \"f\").call(this, mwaAuthorizationResult.accounts);\n                    const authorizationResult = Object.assign(Object.assign({}, mwaAuthorizationResult), { accounts, chain: selectedChain, capabilities: capabilities });\n                    // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                    Promise.all([\n                        __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_handleWalletCapabilitiesResult, \"f\").call(this, capabilities),\n                        __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").set(authorizationResult),\n                        __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_handleAuthorizationResult, \"f\").call(this, authorizationResult),\n                    ]);\n                    return authorizationResult;\n                }));\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_handleAuthorizationResult.set(this, (authorization) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const didPublicKeysChange = \n            // Case 1: We started from having no authorization.\n            __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\") == null ||\n                // Case 2: The number of authorized accounts changed.\n                ((_a = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\")) === null || _a === void 0 ? void 0 : _a.accounts.length) !== authorization.accounts.length ||\n                // Case 3: The new list of addresses isn't exactly the same as the old list, in the same order.\n                __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\").accounts.some((account, ii) => account.address !== authorization.accounts[ii].address);\n            __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, authorization, \"f\");\n            if (didPublicKeysChange) {\n                __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_instances, \"m\", _RemoteSolanaMobileWalletAdapterWallet_emit).call(this, 'change', { accounts: this.accounts });\n            }\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_handleWalletCapabilitiesResult.set(this, (capabilities) => __awaiter(this, void 0, void 0, function* () {\n            // TODO: investigate why using SolanaSignTransactions constant breaks treeshaking\n            const supportsSignTransaction = capabilities.features.includes('solana:signTransactions'); //SolanaSignTransactions);\n            const supportsSignAndSendTransaction = capabilities.supports_sign_and_send_transactions ||\n                capabilities.features.includes('solana:signAndSendTransaction');\n            const didCapabilitiesChange = _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_3__.SolanaSignAndSendTransaction in this.features !== supportsSignAndSendTransaction ||\n                _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_4__.SolanaSignTransaction in this.features !== supportsSignTransaction;\n            __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_optionalFeatures, Object.assign(Object.assign({}, (supportsSignAndSendTransaction && {\n                [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_3__.SolanaSignAndSendTransaction]: {\n                    version: '1.0.0',\n                    supportedTransactionVersions: capabilities.supported_transaction_versions,\n                    signAndSendTransaction: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_signAndSendTransaction, \"f\"),\n                },\n            })), (supportsSignTransaction && {\n                [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_4__.SolanaSignTransaction]: {\n                    version: '1.0.0',\n                    supportedTransactionVersions: capabilities.supported_transaction_versions,\n                    signTransaction: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_signTransaction, \"f\"),\n                },\n            })), \"f\");\n            if (didCapabilitiesChange) {\n                __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_instances, \"m\", _RemoteSolanaMobileWalletAdapterWallet_emit).call(this, 'change', { features: this.features });\n            }\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_performReauthorization.set(this, (wallet, authToken, chain) => __awaiter(this, void 0, void 0, function* () {\n            var _b, _c;\n            try {\n                const [capabilities, mwaAuthorizationResult] = yield Promise.all([\n                    (_c = (_b = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\")) === null || _b === void 0 ? void 0 : _b.capabilities) !== null && _c !== void 0 ? _c : yield wallet.getCapabilities(),\n                    wallet.authorize({\n                        auth_token: authToken,\n                        identity: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_appIdentity, \"f\"),\n                        chain: chain\n                    })\n                ]);\n                const accounts = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts, \"f\").call(this, mwaAuthorizationResult.accounts);\n                const authorization = Object.assign(Object.assign({}, mwaAuthorizationResult), { accounts: accounts, chain: chain, capabilities: capabilities });\n                // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                Promise.all([\n                    __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").set(authorization),\n                    __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_handleAuthorizationResult, \"f\").call(this, authorization),\n                ]);\n            }\n            catch (e) {\n                __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_disconnect, \"f\").call(this);\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_disconnect.set(this, () => __awaiter(this, void 0, void 0, function* () {\n            var _d;\n            var _e;\n            (_d = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_session, \"f\")) === null || _d === void 0 ? void 0 : _d.close();\n            __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").clear(); // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n            __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connecting, false, \"f\");\n            __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connectionGeneration, (_e = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connectionGeneration, \"f\"), _e++, _e), \"f\");\n            __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, undefined, \"f\");\n            __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_session, undefined, \"f\");\n            __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_instances, \"m\", _RemoteSolanaMobileWalletAdapterWallet_emit).call(this, 'change', { accounts: this.accounts });\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_transact.set(this, (callback) => __awaiter(this, void 0, void 0, function* () {\n            var _f;\n            const walletUriBase = (_f = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\")) === null || _f === void 0 ? void 0 : _f.wallet_uri_base;\n            const baseConfig = walletUriBase ? { baseUri: walletUriBase } : undefined;\n            const remoteConfig = Object.assign(Object.assign({}, baseConfig), { remoteHostAuthority: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_hostAuthority, \"f\") });\n            const currentConnectionGeneration = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connectionGeneration, \"f\");\n            const modal = new RemoteConnectionModal();\n            if (__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_session, \"f\")) {\n                return callback(__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_session, \"f\").wallet);\n            }\n            try {\n                const { associationUrl, close, wallet } = yield (0,_solana_mobile_mobile_wallet_adapter_protocol__WEBPACK_IMPORTED_MODULE_1__.startRemoteScenario)(remoteConfig);\n                const removeCloseListener = modal.addEventListener('close', (event) => {\n                    if (event)\n                        close();\n                });\n                modal.initWithQR(associationUrl.toString());\n                modal.open();\n                __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_session, { close, wallet: yield wallet }, \"f\");\n                removeCloseListener();\n                modal.close();\n                return yield callback(__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_session, \"f\").wallet);\n            }\n            catch (e) {\n                modal.close();\n                if (__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connectionGeneration, \"f\") !== currentConnectionGeneration) {\n                    yield new Promise(() => { }); // Never resolve.\n                }\n                if (e instanceof Error &&\n                    e.name === 'SolanaMobileWalletAdapterError' &&\n                    e.code === 'ERROR_WALLET_NOT_FOUND') {\n                    yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_onWalletNotFound, \"f\").call(this, this);\n                }\n                throw e;\n            }\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_assertIsAuthorized.set(this, () => {\n            if (!__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\"))\n                throw new Error('Wallet not connected');\n            return { authToken: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\").auth_token, chain: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\").chain };\n        });\n        _RemoteSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts.set(this, (accounts) => {\n            return accounts.map((account) => {\n                var _a, _b;\n                const publicKey = toUint8Array(account.address);\n                return {\n                    address: bs58__WEBPACK_IMPORTED_MODULE_2__.encode(publicKey),\n                    publicKey,\n                    label: account.label,\n                    icon: account.icon,\n                    chains: (_a = account.chains) !== null && _a !== void 0 ? _a : __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_chains, \"f\"),\n                    // TODO: get supported features from getCapabilities API \n                    features: (_b = account.features) !== null && _b !== void 0 ? _b : DEFAULT_FEATURES\n                };\n            });\n        });\n        _RemoteSolanaMobileWalletAdapterWallet_performSignTransactions.set(this, (transactions) => __awaiter(this, void 0, void 0, function* () {\n            const { authToken, chain } = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_assertIsAuthorized, \"f\").call(this);\n            try {\n                return yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_transact, \"f\").call(this, (wallet) => __awaiter(this, void 0, void 0, function* () {\n                    yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_performReauthorization, \"f\").call(this, wallet, authToken, chain);\n                    const signedTransactions = (yield wallet.signTransactions({\n                        payloads: transactions.map(fromUint8Array),\n                    })).signed_payloads.map(toUint8Array);\n                    return signedTransactions;\n                }));\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_performSignAndSendTransaction.set(this, (transaction, options) => __awaiter(this, void 0, void 0, function* () {\n            const { authToken, chain } = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_assertIsAuthorized, \"f\").call(this);\n            try {\n                return yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_transact, \"f\").call(this, (wallet) => __awaiter(this, void 0, void 0, function* () {\n                    const [capabilities, _1] = yield Promise.all([\n                        wallet.getCapabilities(),\n                        __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_performReauthorization, \"f\").call(this, wallet, authToken, chain)\n                    ]);\n                    if (capabilities.supports_sign_and_send_transactions) {\n                        const signatures = (yield wallet.signAndSendTransactions(Object.assign(Object.assign({}, options), { payloads: [fromUint8Array(transaction)] }))).signatures.map(toUint8Array);\n                        return signatures[0];\n                    }\n                    else {\n                        throw new Error('connected wallet does not support signAndSendTransaction');\n                    }\n                }));\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_signAndSendTransaction.set(this, (...inputs) => __awaiter(this, void 0, void 0, function* () {\n            const outputs = [];\n            for (const input of inputs) {\n                const signature = (yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_performSignAndSendTransaction, \"f\").call(this, input.transaction, input.options));\n                outputs.push({ signature });\n            }\n            return outputs;\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_signTransaction.set(this, (...inputs) => __awaiter(this, void 0, void 0, function* () {\n            return (yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_performSignTransactions, \"f\").call(this, inputs.map(({ transaction }) => transaction)))\n                .map((signedTransaction) => {\n                return { signedTransaction };\n            });\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_signMessage.set(this, (...inputs) => __awaiter(this, void 0, void 0, function* () {\n            const { authToken, chain } = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_assertIsAuthorized, \"f\").call(this);\n            const addresses = inputs.map(({ account }) => fromUint8Array(account.publicKey));\n            const messages = inputs.map(({ message }) => fromUint8Array(message));\n            try {\n                return yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_transact, \"f\").call(this, (wallet) => __awaiter(this, void 0, void 0, function* () {\n                    yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_performReauthorization, \"f\").call(this, wallet, authToken, chain);\n                    const signedMessages = (yield wallet.signMessages({\n                        addresses: addresses,\n                        payloads: messages,\n                    })).signed_payloads.map(toUint8Array);\n                    return signedMessages.map((signedMessage) => {\n                        return { signedMessage: signedMessage, signature: signedMessage.slice(-SIGNATURE_LENGTH_IN_BYTES) };\n                    });\n                }));\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_signIn.set(this, (...inputs) => __awaiter(this, void 0, void 0, function* () {\n            const outputs = [];\n            if (inputs.length > 1) {\n                for (const input of inputs) {\n                    outputs.push(yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_performSignIn, \"f\").call(this, input));\n                }\n            }\n            else {\n                return [yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_performSignIn, \"f\").call(this, inputs[0])];\n            }\n            return outputs;\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_performSignIn.set(this, (input) => __awaiter(this, void 0, void 0, function* () {\n            var _g, _h, _j;\n            __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connecting, true, \"f\");\n            try {\n                const authorizationResult = yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_performAuthorization, \"f\").call(this, Object.assign(Object.assign({}, input), { domain: (_g = input === null || input === void 0 ? void 0 : input.domain) !== null && _g !== void 0 ? _g : window.location.host }));\n                if (!authorizationResult.sign_in_result) {\n                    throw new Error(\"Sign in failed, no sign in result returned by wallet\");\n                }\n                const signedInAddress = authorizationResult.sign_in_result.address;\n                const signedInAccount = authorizationResult.accounts.find(acc => acc.address == signedInAddress);\n                return {\n                    account: Object.assign(Object.assign({}, signedInAccount !== null && signedInAccount !== void 0 ? signedInAccount : {\n                        address: bs58__WEBPACK_IMPORTED_MODULE_2__.encode(toUint8Array(signedInAddress))\n                    }), { publicKey: toUint8Array(signedInAddress), chains: (_h = signedInAccount === null || signedInAccount === void 0 ? void 0 : signedInAccount.chains) !== null && _h !== void 0 ? _h : __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_chains, \"f\"), features: (_j = signedInAccount === null || signedInAccount === void 0 ? void 0 : signedInAccount.features) !== null && _j !== void 0 ? _j : authorizationResult.capabilities.features }),\n                    signedMessage: toUint8Array(authorizationResult.sign_in_result.signed_message),\n                    signature: toUint8Array(authorizationResult.sign_in_result.signature)\n                };\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n            finally {\n                __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connecting, false, \"f\");\n            }\n        }));\n        __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorizationCache, config.authorizationCache, \"f\");\n        __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_appIdentity, config.appIdentity, \"f\");\n        __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_chains, config.chains, \"f\");\n        __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_chainSelector, config.chainSelector, \"f\");\n        __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_hostAuthority, config.remoteHostAuthority, \"f\");\n        __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_onWalletNotFound, config.onWalletNotFound, \"f\");\n        __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_optionalFeatures, {\n            // In MWA 1.0, signAndSend is optional and signTransaction is mandatory. Whereas in MWA 2.0+,\n            // signAndSend is mandatory and signTransaction is optional (and soft deprecated). As of mid\n            // 2025, all MWA wallets support both signAndSendTransaction and signTransaction so its safe\n            // assume both are supported here. The features will be updated based on the actual connected \n            // wallets capabilities during connection regardless, so this is safe. \n            [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_3__.SolanaSignAndSendTransaction]: {\n                version: '1.0.0',\n                supportedTransactionVersions: ['legacy', 0],\n                signAndSendTransaction: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_signAndSendTransaction, \"f\"),\n            },\n            [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_4__.SolanaSignTransaction]: {\n                version: '1.0.0',\n                supportedTransactionVersions: ['legacy', 0],\n                signTransaction: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_signTransaction, \"f\"),\n            },\n        }, \"f\");\n    }\n    get version() {\n        return __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_version, \"f\");\n    }\n    get name() {\n        return __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_name, \"f\");\n    }\n    get url() {\n        return __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_url, \"f\");\n    }\n    get icon() {\n        return __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_icon, \"f\");\n    }\n    get chains() {\n        return __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_chains, \"f\");\n    }\n    get features() {\n        return Object.assign({ [_wallet_standard_features__WEBPACK_IMPORTED_MODULE_7__.StandardConnect]: {\n                version: '1.0.0',\n                connect: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connect, \"f\"),\n            }, [_wallet_standard_features__WEBPACK_IMPORTED_MODULE_8__.StandardDisconnect]: {\n                version: '1.0.0',\n                disconnect: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_disconnect, \"f\"),\n            }, [_wallet_standard_features__WEBPACK_IMPORTED_MODULE_9__.StandardEvents]: {\n                version: '1.0.0',\n                on: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_on, \"f\"),\n            }, [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_5__.SolanaSignMessage]: {\n                version: '1.0.0',\n                signMessage: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_signMessage, \"f\"),\n            }, [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_6__.SolanaSignIn]: {\n                version: '1.0.0',\n                signIn: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_signIn, \"f\"),\n            } }, __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_optionalFeatures, \"f\"));\n    }\n    get accounts() {\n        var _a, _b;\n        return (_b = (_a = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\")) === null || _a === void 0 ? void 0 : _a.accounts) !== null && _b !== void 0 ? _b : [];\n    }\n    get connected() {\n        return !!__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_session, \"f\") && !!__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\");\n    }\n    get isAuthorized() {\n        return !!__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\");\n    }\n    get currentAuthorization() {\n        return __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\");\n    }\n    get cachedAuthorizationResult() {\n        return __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").get();\n    }\n}\n_RemoteSolanaMobileWalletAdapterWallet_listeners = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_version = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_name = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_url = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_icon = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_appIdentity = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_authorization = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_authorizationCache = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_connecting = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_connectionGeneration = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_chains = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_chainSelector = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_optionalFeatures = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_onWalletNotFound = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_hostAuthority = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_session = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_on = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_connect = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_performAuthorization = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_handleAuthorizationResult = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_handleWalletCapabilitiesResult = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_performReauthorization = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_disconnect = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_transact = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_assertIsAuthorized = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_performSignTransactions = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_performSignAndSendTransaction = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_signAndSendTransaction = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_signTransaction = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_signMessage = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_signIn = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_performSignIn = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_instances = new WeakSet(), _RemoteSolanaMobileWalletAdapterWallet_emit = function _RemoteSolanaMobileWalletAdapterWallet_emit(event, ...args) {\n    var _a;\n    // eslint-disable-next-line prefer-spread\n    (_a = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_listeners, \"f\")[event]) === null || _a === void 0 ? void 0 : _a.forEach((listener) => listener.apply(null, args));\n}, _RemoteSolanaMobileWalletAdapterWallet_off = function _RemoteSolanaMobileWalletAdapterWallet_off(event, listener) {\n    var _a;\n    __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_listeners, \"f\")[event] = (_a = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_listeners, \"f\")[event]) === null || _a === void 0 ? void 0 : _a.filter((existingListener) => listener !== existingListener);\n};\n\nvar __classPrivateFieldSet = ( false) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = ( false) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _RegisterWalletEvent_detail;\n/**\n * Register a {@link \"@wallet-standard/base\".Wallet} as a Standard Wallet with the app.\n *\n * This dispatches a {@link \"@wallet-standard/base\".WindowRegisterWalletEvent} to notify the app that the Wallet is\n * ready to be registered.\n *\n * This also adds a listener for {@link \"@wallet-standard/base\".WindowAppReadyEvent} to listen for a notification from\n * the app that the app is ready to register the Wallet.\n *\n * This combination of event dispatch and listener guarantees that the Wallet will be registered synchronously as soon\n * as the app is ready whether the Wallet loads before or after the app.\n *\n * @param wallet Wallet to register.\n *\n * @group Wallet\n */\nfunction registerWallet(wallet) {\n    const callback = ({ register }) => register(wallet);\n    try {\n        window.dispatchEvent(new RegisterWalletEvent(callback));\n    }\n    catch (error) {\n        console.error('wallet-standard:register-wallet event could not be dispatched\\n', error);\n    }\n    try {\n        window.addEventListener('wallet-standard:app-ready', ({ detail: api }) => callback(api));\n    }\n    catch (error) {\n        console.error('wallet-standard:app-ready event listener could not be added\\n', error);\n    }\n}\nclass RegisterWalletEvent extends Event {\n    constructor(callback) {\n        super('wallet-standard:register-wallet', {\n            bubbles: false,\n            cancelable: false,\n            composed: false,\n        });\n        _RegisterWalletEvent_detail.set(this, void 0);\n        __classPrivateFieldSet(this, _RegisterWalletEvent_detail, callback, \"f\");\n    }\n    get detail() {\n        return __classPrivateFieldGet(this, _RegisterWalletEvent_detail, \"f\");\n    }\n    get type() {\n        return 'wallet-standard:register-wallet';\n    }\n    /** @deprecated */\n    preventDefault() {\n        throw new Error('preventDefault cannot be called');\n    }\n    /** @deprecated */\n    stopImmediatePropagation() {\n        throw new Error('stopImmediatePropagation cannot be called');\n    }\n    /** @deprecated */\n    stopPropagation() {\n        throw new Error('stopPropagation cannot be called');\n    }\n}\n_RegisterWalletEvent_detail = new WeakMap();\n\n( false) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\n( false) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\n\nfunction getIsLocalAssociationSupported() {\n    return (typeof window !== 'undefined' &&\n        window.isSecureContext &&\n        typeof document !== 'undefined' &&\n        /android/i.test(navigator.userAgent));\n}\nfunction getIsRemoteAssociationSupported() {\n    return (typeof window !== 'undefined' &&\n        window.isSecureContext &&\n        typeof document !== 'undefined' &&\n        !/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n}\n// Source: https://github.com/anza-xyz/wallet-adapter/blob/master/packages/core/react/src/getEnvironment.ts#L14\n// This is the same implementation that gated MWA in the Anza wallet-adapter-react library.\nfunction isWebView(userAgentString) {\n    return /(WebView|Version\\/.+(Chrome)\\/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)|; wv\\).+(Chrome)\\/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+))/i.test(userAgentString);\n}\n\nfunction registerMwa(config) {\n    if (typeof window === 'undefined') {\n        console.warn(`MWA not registered: no window object`);\n        return;\n    }\n    if (!window.isSecureContext) {\n        console.warn(`MWA not registered: secure context required (https)`);\n        return;\n    }\n    // Local association technically is possible in a webview, but we prevent registration\n    // by default because it usually fails in the most common cases (e.g wallet browsers).\n    if (getIsLocalAssociationSupported() && !isWebView(navigator.userAgent)) {\n        registerWallet(new LocalSolanaMobileWalletAdapterWallet(config));\n    }\n    else if (getIsRemoteAssociationSupported() && config.remoteHostAuthority !== undefined) {\n        registerWallet(new RemoteSolanaMobileWalletAdapterWallet(Object.assign(Object.assign({}, config), { remoteHostAuthority: config.remoteHostAuthority })));\n    }\n    else ;\n}\n\nconst WALLET_NOT_FOUND_ERROR_MESSAGE = 'To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.';\nconst BROWSER_NOT_SUPPORTED_ERROR_MESSAGE = 'This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.';\nclass ErrorModal extends EmbeddedModal {\n    constructor() {\n        super(...arguments);\n        this.contentStyles = css;\n        this.contentHtml = ErrorDialogHtml;\n    }\n    initWithError(error) {\n        super.init();\n        this.populateError(error);\n    }\n    populateError(error) {\n        var _a, _b;\n        const errorMessageElement = (_a = this.dom) === null || _a === void 0 ? void 0 : _a.getElementById('mobile-wallet-adapter-error-message');\n        const actionBtn = (_b = this.dom) === null || _b === void 0 ? void 0 : _b.getElementById('mobile-wallet-adapter-error-action');\n        if (errorMessageElement) {\n            if (error.name === 'SolanaMobileWalletAdapterError') {\n                switch (error.code) {\n                    case 'ERROR_WALLET_NOT_FOUND':\n                        errorMessageElement.innerHTML = WALLET_NOT_FOUND_ERROR_MESSAGE;\n                        if (actionBtn)\n                            actionBtn.addEventListener('click', () => {\n                                window.location.href = 'https://solanamobile.com/wallets';\n                            });\n                        return;\n                    case 'ERROR_BROWSER_NOT_SUPPORTED':\n                        errorMessageElement.innerHTML = BROWSER_NOT_SUPPORTED_ERROR_MESSAGE;\n                        if (actionBtn)\n                            actionBtn.style.display = 'none';\n                        return;\n                }\n            }\n            errorMessageElement.innerHTML = `An unexpected error occurred: ${error.message}`;\n        }\n        else {\n            console.log('Failed to locate error dialog element');\n        }\n    }\n}\nconst ErrorDialogHtml = `\n<svg class=\"mobile-wallet-adapter-embedded-modal-error-icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"50px\" viewBox=\"0 -960 960 960\" width=\"50px\" fill=\"#000000\"><path d=\"M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z\"/></svg>\n<div class=\"mobile-wallet-adapter-embedded-modal-title\">We can't find a wallet.</div>\n<div id=\"mobile-wallet-adapter-error-message\" class=\"mobile-wallet-adapter-embedded-modal-subtitle\"></div>\n<div>\n    <button data-error-action id=\"mobile-wallet-adapter-error-action\" class=\"mobile-wallet-adapter-embedded-modal-error-action\">\n        Find a wallet\n    </button>\n</div>\n`;\nconst css = `\n.mobile-wallet-adapter-embedded-modal-content {\n    text-align: center;\n}\n\n.mobile-wallet-adapter-embedded-modal-error-icon {\n    margin-top: 24px;\n}\n\n.mobile-wallet-adapter-embedded-modal-title {\n    margin: 18px 100px auto 100px;\n    color: #000000;\n    font-size: 2.75em;\n    font-weight: 600;\n}\n\n.mobile-wallet-adapter-embedded-modal-subtitle {\n    margin: 30px 60px 40px 60px;\n    color: #000000;\n    font-size: 1.25em;\n    font-weight: 400;\n}\n\n.mobile-wallet-adapter-embedded-modal-error-action {\n    display: block;\n    width: 100%;\n    height: 56px;\n    /*margin-top: 40px;*/\n    font-size: 1.25em;\n    /*line-height: 24px;*/\n    /*letter-spacing: -1%;*/\n    background: #000000;\n    color: #FFFFFF;\n    border-radius: 18px;\n}\n\n/* Smaller screens */\n@media all and (max-width: 600px) {\n    .mobile-wallet-adapter-embedded-modal-title {\n        font-size: 1.5em;\n        margin-right: 12px;\n        margin-left: 12px;\n    }\n    .mobile-wallet-adapter-embedded-modal-subtitle {\n        margin-right: 12px;\n        margin-left: 12px;\n    }\n}\n`;\n\nfunction defaultErrorModalWalletNotFoundHandler() {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (typeof window !== 'undefined') {\n            const userAgent = window.navigator.userAgent.toLowerCase();\n            const errorDialog = new ErrorModal();\n            if (userAgent.includes('wv')) { // Android WebView\n                // MWA is not supported in this browser so we inform the user\n                // errorDialog.initWithError(\n                //     new SolanaMobileWalletAdapterError(\n                //         SolanaMobileWalletAdapterErrorCode.ERROR_BROWSER_NOT_SUPPORTED, \n                //         ''\n                //     )\n                // );\n                // TODO: investigate why instantiating a new SolanaMobileWalletAdapterError here breaks treeshaking \n                errorDialog.initWithError({\n                    name: 'SolanaMobileWalletAdapterError',\n                    code: 'ERROR_BROWSER_NOT_SUPPORTED',\n                    message: ''\n                });\n            }\n            else { // Browser, user does not have a wallet installed.\n                // errorDialog.initWithError(\n                //     new SolanaMobileWalletAdapterError(\n                //         SolanaMobileWalletAdapterErrorCode.ERROR_WALLET_NOT_FOUND, \n                //         ''\n                //     )\n                // );\n                // TODO: investigate why instantiating a new SolanaMobileWalletAdapterError here breaks treeshaking \n                errorDialog.initWithError({\n                    name: 'SolanaMobileWalletAdapterError',\n                    code: 'ERROR_WALLET_NOT_FOUND',\n                    message: ''\n                });\n            }\n            errorDialog.open();\n        }\n    });\n}\nfunction createDefaultWalletNotFoundHandler() {\n    return () => __awaiter(this, void 0, void 0, function* () { defaultErrorModalWalletNotFoundHandler(); });\n}\n\nconst CACHE_KEY = 'SolanaMobileWalletAdapterDefaultAuthorizationCache';\nfunction createDefaultAuthorizationCache() {\n    let storage;\n    try {\n        storage = window.localStorage;\n        // eslint-disable-next-line no-empty\n    }\n    catch (_a) { }\n    return {\n        clear() {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!storage) {\n                    return;\n                }\n                try {\n                    storage.removeItem(CACHE_KEY);\n                    // eslint-disable-next-line no-empty\n                }\n                catch (_a) { }\n            });\n        },\n        get() {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!storage) {\n                    return;\n                }\n                try {\n                    const parsed = JSON.parse(storage.getItem(CACHE_KEY));\n                    if (parsed && parsed.accounts) {\n                        const parsedAccounts = parsed.accounts.map((account) => {\n                            return Object.assign(Object.assign({}, account), { publicKey: 'publicKey' in account\n                                    ? new Uint8Array(Object.values(account.publicKey)) // Rebuild publicKey for WalletAccount\n                                    : bs58__WEBPACK_IMPORTED_MODULE_2__.decode(account.address) });\n                        });\n                        return Object.assign(Object.assign({}, parsed), { accounts: parsedAccounts });\n                    }\n                    else\n                        return parsed || undefined;\n                    // eslint-disable-next-line no-empty\n                }\n                catch (_a) { }\n            });\n        },\n        set(authorization) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!storage) {\n                    return;\n                }\n                try {\n                    storage.setItem(CACHE_KEY, JSON.stringify(authorization));\n                    // eslint-disable-next-line no-empty\n                }\n                catch (_a) { }\n            });\n        },\n    };\n}\n\nfunction createDefaultChainSelector() {\n    return {\n        select(chains) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (chains.length === 1) {\n                    return chains[0];\n                }\n                else if (chains.includes(_solana_wallet_standard_chains__WEBPACK_IMPORTED_MODULE_10__.SOLANA_MAINNET_CHAIN)) {\n                    return _solana_wallet_standard_chains__WEBPACK_IMPORTED_MODULE_10__.SOLANA_MAINNET_CHAIN;\n                }\n                else\n                    return chains[0];\n            });\n        },\n    };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNvbGFuYS1tb2JpbGUrd2FsbGV0LXN0YW5kYXJkLW1vYmlsZUAwLjQuNF9Ac29sYW5hK3dhbGxldC1hZGFwdGVyLWJhc2VAMC45LjI3X0Bzb2xhbmErXzM5ODY4ZGJjYzJmODhkNjUzOTJmZDE1NjBkNWVkZWNjL25vZGVfbW9kdWxlcy9Ac29sYW5hLW1vYmlsZS93YWxsZXQtc3RhbmRhcmQtbW9iaWxlL2xpYi9lc20vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0k7QUFDNUc7QUFDa0U7QUFDRTtBQUN0RTtBQUM0Qzs7QUFFdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxhQUFhLGFBQWE7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQiw2QkFBNkI7QUFDN0IseUJBQXlCO0FBQ3pCLHFCQUFxQjtBQUNyQixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixrQkFBa0I7QUFDbEIsdUNBQXVDO0FBQ3ZDLHNCQUFzQjtBQUN0Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRkFBc0Y7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxnQkFBZ0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0Qyw0Q0FBZSxVQUFVLHVCQUF1QjtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLG9CQUFvQjtBQUNwQiwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUNBQWlDOztBQUVqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMEZBQTRCLEVBQUUsbUZBQXFCLEVBQUUsK0VBQWlCLEVBQUUsMEVBQVk7QUFDOUc7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FO0FBQ3BFLDBFQUEwRTtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsbUVBQW1FLFNBQVMsSUFBSTtBQUNoRjtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSx3RUFBd0UsNkJBQTZCLDREQUE0RDtBQUNqSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0tBQXdLLHlCQUF5QjtBQUNqTTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsdUdBQXVHO0FBQ3ZHO0FBQ0EsMENBQTBDLDBGQUE0QjtBQUN0RSxnQkFBZ0IsbUZBQXFCO0FBQ3JDLGlJQUFpSTtBQUNqSSxpQkFBaUIsMEZBQTRCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsaUJBQWlCLG1GQUFxQjtBQUN0QztBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0Esd0tBQXdLLHlCQUF5QjtBQUNqTTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLG9FQUFvRSw2QkFBNkIsOERBQThEO0FBQy9KO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxtSEFBbUg7QUFDbkg7QUFDQTtBQUNBO0FBQ0Esb0tBQW9LLHlCQUF5QjtBQUM3TCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLHlCQUF5QjtBQUN0RTtBQUNBO0FBQ0EsNkJBQTZCLHVGQUFRO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxHQUFHO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHdDQUFhO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQSxzRUFBc0UsNEJBQTRCO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0Esb0JBQW9CLG1CQUFtQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0dBQStHLGNBQWMsK0JBQStCO0FBQzVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsV0FBVztBQUMxQztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0Esc0pBQXNKLGFBQWE7QUFDbks7QUFDQSx5QkFBeUI7QUFDekIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkMsNENBQTRDLFNBQVM7QUFDckQsMkNBQTJDLFNBQVM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsaUNBQWlDO0FBQ2pDLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJMQUEyTCxZQUFZLGlJQUFpSTtBQUN4VTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0QsaUNBQWlDLHdDQUFhO0FBQzlDLHFCQUFxQixLQUFLLDhiQUE4YjtBQUN4ZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSwwRkFBNEI7QUFDekM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLGFBQWEsbUZBQXFCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixDQUFDLHNFQUFlO0FBQy9DO0FBQ0E7QUFDQSxhQUFhLEdBQUcseUVBQWtCO0FBQ2xDO0FBQ0E7QUFDQSxhQUFhLEdBQUcscUVBQWM7QUFDOUI7QUFDQTtBQUNBLGFBQWEsR0FBRywrRUFBaUI7QUFDakM7QUFDQTtBQUNBLGFBQWEsR0FBRywwRUFBWTtBQUM1QjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRTtBQUNyRSwyRUFBMkU7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxvRUFBb0UsU0FBUyxJQUFJO0FBQ2pGO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsOEVBQThFLDZCQUE2Qiw0REFBNEQ7QUFDdks7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBLQUEwSyx5QkFBeUI7QUFDbk07QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHVHQUF1RztBQUN2RztBQUNBO0FBQ0EsMENBQTBDLDBGQUE0QjtBQUN0RSxnQkFBZ0IsbUZBQXFCO0FBQ3JDLGtJQUFrSTtBQUNsSSxpQkFBaUIsMEZBQTRCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsaUJBQWlCLG1GQUFxQjtBQUN0QztBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0EsMEtBQTBLLHlCQUF5QjtBQUNuTTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLG9FQUFvRSw2QkFBNkIsOERBQThEO0FBQy9KO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0hBQW9IO0FBQ3BIO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0tBQXNLLHlCQUF5QjtBQUMvTCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsaURBQWlELHlCQUF5QjtBQUMxRSwrREFBK0QsaUJBQWlCLGdIQUFnSDtBQUNoTTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0NBQWdDLFFBQVEsa0dBQW1CO0FBQ25GO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUdBQWlHLDZCQUE2QjtBQUM5SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxHQUFHO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHdDQUFhO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrR0FBK0csY0FBYyx5Q0FBeUM7QUFDdEs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixXQUFXO0FBQzFDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSx1SkFBdUosYUFBYTtBQUNwSztBQUNBLHlCQUF5QjtBQUN6QixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0Esb0JBQW9CLG1CQUFtQjtBQUN2Qyw0Q0FBNEMsU0FBUztBQUNyRCwyQ0FBMkMsU0FBUztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxpQ0FBaUM7QUFDakMscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNExBQTRMLFlBQVksaUlBQWlJO0FBQ3pVO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRCxpQ0FBaUMsd0NBQWE7QUFDOUMscUJBQXFCLEtBQUssK2JBQStiO0FBQ3pkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsMEZBQTRCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixhQUFhLG1GQUFxQjtBQUNsQztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsQ0FBQyxzRUFBZTtBQUMvQztBQUNBO0FBQ0EsYUFBYSxHQUFHLHlFQUFrQjtBQUNsQztBQUNBO0FBQ0EsYUFBYSxHQUFHLHFFQUFjO0FBQzlCO0FBQ0E7QUFDQSxhQUFhLEdBQUcsK0VBQWlCO0FBQ2pDO0FBQ0E7QUFDQSxhQUFhLEdBQUcsMEVBQVk7QUFDNUI7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7O0FBRUEsOEJBQThCLE1BQTZDO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsTUFBNkM7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzQ0FBc0M7QUFDckQ7QUFDQSxzQkFBc0IseURBQXlEO0FBQy9FO0FBQ0E7QUFDQSxrQ0FBa0MsbURBQW1EO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFVBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsYUFBYTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQyxNQUE2QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxNQUE2QztBQUM5QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUU7QUFDdkU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0ZBQStGLGFBQWEsaURBQWlEO0FBQzdKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZFQUE2RSxjQUFjO0FBQzNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQSx3QkFBd0I7QUFDeEIsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxnRUFBZ0UsMkNBQTJDO0FBQzNHOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsY0FBYztBQUMvRTtBQUNBLHNDQUFzQyx3Q0FBYSxtQkFBbUI7QUFDdEUseUJBQXlCO0FBQ3pCLDZEQUE2RCxhQUFhLDBCQUEwQjtBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGlGQUFvQjtBQUM3RCwyQkFBMkIsaUZBQW9CO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTs7QUFFNlQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wZXJwZGV4LWFwcC8uL25vZGVfbW9kdWxlcy8ucG5wbS9Ac29sYW5hLW1vYmlsZSt3YWxsZXQtc3RhbmRhcmQtbW9iaWxlQDAuNC40X0Bzb2xhbmErd2FsbGV0LWFkYXB0ZXItYmFzZUAwLjkuMjdfQHNvbGFuYStfMzk4NjhkYmNjMmY4OGQ2NTM5MmZkMTU2MGQ1ZWRlY2Mvbm9kZV9tb2R1bGVzL0Bzb2xhbmEtbW9iaWxlL3dhbGxldC1zdGFuZGFyZC1tb2JpbGUvbGliL2VzbS9pbmRleC5qcz84MGExIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNvbGFuYVNpZ25BbmRTZW5kVHJhbnNhY3Rpb24sIFNvbGFuYVNpZ25UcmFuc2FjdGlvbiwgU29sYW5hU2lnbk1lc3NhZ2UsIFNvbGFuYVNpZ25JbiB9IGZyb20gJ0Bzb2xhbmEvd2FsbGV0LXN0YW5kYXJkLWZlYXR1cmVzJztcbmltcG9ydCBRUkNvZGUgZnJvbSAncXJjb2RlJztcbmltcG9ydCB7IHRyYW5zYWN0LCBzdGFydFJlbW90ZVNjZW5hcmlvIH0gZnJvbSAnQHNvbGFuYS1tb2JpbGUvbW9iaWxlLXdhbGxldC1hZGFwdGVyLXByb3RvY29sJztcbmltcG9ydCB7IFN0YW5kYXJkQ29ubmVjdCwgU3RhbmRhcmREaXNjb25uZWN0LCBTdGFuZGFyZEV2ZW50cyB9IGZyb20gJ0B3YWxsZXQtc3RhbmRhcmQvZmVhdHVyZXMnO1xuaW1wb3J0IGJhc2U1OCBmcm9tICdiczU4JztcbmltcG9ydCB7IFNPTEFOQV9NQUlOTkVUX0NIQUlOIH0gZnJvbSAnQHNvbGFuYS93YWxsZXQtc3RhbmRhcmQtY2hhaW5zJztcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcblxyXG5mdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEocmVjZWl2ZXIsIHN0YXRlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiBraW5kID09PSBcIm1cIiA/IGYgOiBraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlcikgOiBmID8gZi52YWx1ZSA6IHN0YXRlLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMShyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cblxudmFyIF9FbWJlZGRlZE1vZGFsX2luc3RhbmNlcywgX0VtYmVkZGVkTW9kYWxfcm9vdCwgX0VtYmVkZGVkTW9kYWxfZXZlbnRMaXN0ZW5lcnMsIF9FbWJlZGRlZE1vZGFsX2xpc3RlbmVyc0F0dGFjaGVkLCBfRW1iZWRkZWRNb2RhbF9pbmplY3RIVE1MLCBfRW1iZWRkZWRNb2RhbF9hdHRhY2hFdmVudExpc3RlbmVycywgX0VtYmVkZGVkTW9kYWxfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMsIF9FbWJlZGRlZE1vZGFsX2hhbmRsZUtleURvd247XG5jb25zdCBtb2RhbEh0bWwgPSBgXG48ZGl2IGNsYXNzPVwibW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWNvbnRhaW5lclwiIHJvbGU9XCJkaWFsb2dcIiBhcmlhLW1vZGFsPVwidHJ1ZVwiIGFyaWEtbGFiZWxsZWRieT1cIm1vZGFsLXRpdGxlXCI+XG4gICAgPGRpdiBkYXRhLW1vZGFsLWNsb3NlIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlO1wiPjwvZGl2PlxuXHQ8ZGl2IGNsYXNzPVwibW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWNhcmRcIj5cblx0XHQ8ZGl2PlxuXHRcdFx0PGJ1dHRvbiBkYXRhLW1vZGFsLWNsb3NlIGNsYXNzPVwibW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWNsb3NlXCI+XG5cdFx0XHRcdDxzdmcgd2lkdGg9XCIxNFwiIGhlaWdodD1cIjE0XCI+XG5cdFx0XHRcdFx0PHBhdGggZD1cIk0gNi43MTI1LDguMzAzNjk5NSAxLjkwODIsMTMuMTA4MTk5IGMgLTAuMjExMywwLjIxMTIgLTAuNDc2NSwwLjMxNjggLTAuNzk1NywwLjMxNjggLTAuMzE5MiwwIC0wLjU4NDQsLTAuMTA1NiAtMC43OTU4LC0wLjMxNjggQyAwLjEwNTYsMTIuODk2ODk5IDAsMTIuNjMxNjk5IDAsMTIuMzEyNDk5IGMgMCwtMC4zMTkyIDAuMTA1NiwtMC41ODQ0IDAuMzE2NywtMC43OTU4IEwgNS4xMjEyLDYuNzEyNDk5NSAwLjMxNjcsMS45MDgyIEMgMC4xMDU2LDEuNjk2OSAwLDEuNDMxNyAwLDEuMTEyNSAwLDAuNzkzMyAwLjEwNTYsMC41MjgxIDAuMzE2NywwLjMxNjcgMC41MjgxLDAuMTA1NiAwLjc5MzMsMCAxLjExMjUsMCAxLjQzMTcsMCAxLjY5NjksMC4xMDU2IDEuOTA4MiwwLjMxNjcgTCA2LjcxMjUsNS4xMjEyIDExLjUxNjcsMC4zMTY3IEMgMTEuNzI4MSwwLjEwNTYgMTEuOTkzMywwIDEyLjMxMjUsMCBjIDAuMzE5MiwwIDAuNTg0NCwwLjEwNTYgMC43OTU3LDAuMzE2NyAwLjIxMTIsMC4yMTE0IDAuMzE2OCwwLjQ3NjYgMC4zMTY4LDAuNzk1OCAwLDAuMzE5MiAtMC4xMDU2LDAuNTg0NCAtMC4zMTY4LDAuNzk1NyBMIDguMzAzNzAwMSw2LjcxMjQ5OTUgMTMuMTA4MiwxMS41MTY2OTkgYyAwLjIxMTIsMC4yMTE0IDAuMzE2OCwwLjQ3NjYgMC4zMTY4LDAuNzk1OCAwLDAuMzE5MiAtMC4xMDU2LDAuNTg0NCAtMC4zMTY4LDAuNzk1NyAtMC4yMTEzLDAuMjExMiAtMC40NzY1LDAuMzE2OCAtMC43OTU3LDAuMzE2OCAtMC4zMTkyLDAgLTAuNTg0NCwtMC4xMDU2IC0wLjc5NTgsLTAuMzE2OCB6XCIgLz5cblx0XHRcdFx0PC9zdmc+XG5cdFx0XHQ8L2J1dHRvbj5cblx0XHQ8L2Rpdj5cblx0XHQ8ZGl2IGNsYXNzPVwibW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWNvbnRlbnRcIj48L2Rpdj5cblx0PC9kaXY+XG48L2Rpdj5cbmA7XG5jb25zdCBjc3MkMiA9IGBcbi5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtY29udGFpbmVyIHtcbiAgICBkaXNwbGF5OiBmbGV4OyAvKiBVc2UgZmxleGJveCB0byBjZW50ZXIgY29udGVudCAqL1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOyAvKiBDZW50ZXIgaG9yaXpvbnRhbGx5ICovXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjsgLyogQ2VudGVyIHZlcnRpY2FsbHkgKi9cbiAgICBwb3NpdGlvbjogZml4ZWQ7IC8qIFN0YXkgaW4gcGxhY2UgKi9cbiAgICB6LWluZGV4OiAxOyAvKiBTaXQgb24gdG9wICovXG4gICAgbGVmdDogMDtcbiAgICB0b3A6IDA7XG4gICAgd2lkdGg6IDEwMCU7IC8qIEZ1bGwgd2lkdGggKi9cbiAgICBoZWlnaHQ6IDEwMCU7IC8qIEZ1bGwgaGVpZ2h0ICovXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwwLjQpOyAvKiBCbGFjayB3LyBvcGFjaXR5ICovXG4gICAgb3ZlcmZsb3cteTogYXV0bzsgLyogZW5hYmxlIHNjcm9sbGluZyAqL1xufVxuXG4ubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWNhcmQge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBtYXJnaW46IGF1dG8gMjBweDtcbiAgICBtYXgtd2lkdGg6IDc4MHB4O1xuICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgYm9yZGVyLXJhZGl1czogMjRweDtcbiAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmO1xuICAgIGZvbnQtZmFtaWx5OiBcIkludGVyIFRpZ2h0XCIsIFwiUFQgU2Fuc1wiLCBDYWxpYnJpLCBzYW5zLXNlcmlmO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMjAwJSk7XG4gICAgYW5pbWF0aW9uOiBzbGlkZS1pbiAwLjVzIGZvcndhcmRzO1xufVxuXG5Aa2V5ZnJhbWVzIHNsaWRlLWluIHtcbiAgICAxMDAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDAlKTsgfVxufVxuXG4ubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWNsb3NlIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgd2lkdGg6IDMycHg7XG4gICAgaGVpZ2h0OiAzMnB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBiYWNrZ3JvdW5kOiAjZTRlOWU5O1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG59XG5cbi5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtY2xvc2U6Zm9jdXMtdmlzaWJsZSB7XG4gICAgb3V0bGluZS1jb2xvcjogcmVkO1xufVxuXG4ubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWNsb3NlIHN2ZyB7XG4gICAgZmlsbDogIzU0NjI2NjtcbiAgICB0cmFuc2l0aW9uOiBmaWxsIDIwMG1zIGVhc2UgMHM7XG59XG5cbi5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtY2xvc2U6aG92ZXIgc3ZnIHtcbiAgICBmaWxsOiAjZmZmO1xufVxuYDtcbmNvbnN0IGZvbnRzID0gYFxuPGxpbmsgcmVsPVwicHJlY29ubmVjdFwiIGhyZWY9XCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tXCI+XG48bGluayByZWw9XCJwcmVjb25uZWN0XCIgaHJlZj1cImh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb21cIiBjcm9zc29yaWdpbj5cbjxsaW5rIGhyZWY9XCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PUludGVyK1RpZ2h0Oml0YWwsd2dodEAwLDEwMC4uOTAwOzEsMTAwLi45MDAmZGlzcGxheT1zd2FwXCIgcmVsPVwic3R5bGVzaGVldFwiPlxuYDtcbmNsYXNzIEVtYmVkZGVkTW9kYWwge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBfRW1iZWRkZWRNb2RhbF9pbnN0YW5jZXMuYWRkKHRoaXMpO1xuICAgICAgICBfRW1iZWRkZWRNb2RhbF9yb290LnNldCh0aGlzLCBudWxsKTtcbiAgICAgICAgX0VtYmVkZGVkTW9kYWxfZXZlbnRMaXN0ZW5lcnMuc2V0KHRoaXMsIHt9KTtcbiAgICAgICAgX0VtYmVkZGVkTW9kYWxfbGlzdGVuZXJzQXR0YWNoZWQuc2V0KHRoaXMsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5kb20gPSBudWxsO1xuICAgICAgICB0aGlzLm9wZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdNb2RhbCBvcGVuJyk7XG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0VtYmVkZGVkTW9kYWxfaW5zdGFuY2VzLCBcIm1cIiwgX0VtYmVkZGVkTW9kYWxfYXR0YWNoRXZlbnRMaXN0ZW5lcnMpLmNhbGwodGhpcyk7XG4gICAgICAgICAgICBpZiAoX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX3Jvb3QsIFwiZlwiKSkge1xuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9yb290LCBcImZcIikuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jbG9zZSA9IChldmVudCA9IHVuZGVmaW5lZCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnTW9kYWwgY2xvc2UnKTtcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9pbnN0YW5jZXMsIFwibVwiLCBfRW1iZWRkZWRNb2RhbF9yZW1vdmVFdmVudExpc3RlbmVycykuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0VtYmVkZGVkTW9kYWxfcm9vdCwgXCJmXCIpKSB7XG4gICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX3Jvb3QsIFwiZlwiKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKF9hID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX2V2ZW50TGlzdGVuZXJzLCBcImZcIilbJ2Nsb3NlJ10pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIoZXZlbnQpKTtcbiAgICAgICAgfTtcbiAgICAgICAgX0VtYmVkZGVkTW9kYWxfaGFuZGxlS2V5RG93bi5zZXQodGhpcywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJylcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEJpbmQgbWV0aG9kcyB0byBlbnN1cmUgYHRoaXNgIGNvbnRleHQgaXMgY29ycmVjdFxuICAgICAgICB0aGlzLmluaXQgPSB0aGlzLmluaXQuYmluZCh0aGlzKTtcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX3Jvb3QsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtcm9vdC11aScpLCBcImZcIik7XG4gICAgfVxuICAgIGluaXQoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSW5qZWN0aW5nIG1vZGFsJyk7XG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0VtYmVkZGVkTW9kYWxfaW5zdGFuY2VzLCBcIm1cIiwgX0VtYmVkZGVkTW9kYWxfaW5qZWN0SFRNTCkuY2FsbCh0aGlzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgKChfYSA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9ldmVudExpc3RlbmVycywgXCJmXCIpW2V2ZW50XSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnB1c2gobGlzdGVuZXIpKSB8fCAoX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX2V2ZW50TGlzdGVuZXJzLCBcImZcIilbZXZlbnRdID0gW2xpc3RlbmVyXSk7XG4gICAgICAgIHJldHVybiAoKSA9PiB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0VtYmVkZGVkTW9kYWxfZXZlbnRMaXN0ZW5lcnMsIFwiZlwiKVtldmVudF0gPSAoX2EgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0VtYmVkZGVkTW9kYWxfZXZlbnRMaXN0ZW5lcnMsIFwiZlwiKVtldmVudF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maWx0ZXIoKGV4aXN0aW5nTGlzdGVuZXIpID0+IGxpc3RlbmVyICE9PSBleGlzdGluZ0xpc3RlbmVyKTtcbiAgICB9XG59XG5fRW1iZWRkZWRNb2RhbF9yb290ID0gbmV3IFdlYWtNYXAoKSwgX0VtYmVkZGVkTW9kYWxfZXZlbnRMaXN0ZW5lcnMgPSBuZXcgV2Vha01hcCgpLCBfRW1iZWRkZWRNb2RhbF9saXN0ZW5lcnNBdHRhY2hlZCA9IG5ldyBXZWFrTWFwKCksIF9FbWJlZGRlZE1vZGFsX2hhbmRsZUtleURvd24gPSBuZXcgV2Vha01hcCgpLCBfRW1iZWRkZWRNb2RhbF9pbnN0YW5jZXMgPSBuZXcgV2Vha1NldCgpLCBfRW1iZWRkZWRNb2RhbF9pbmplY3RIVE1MID0gZnVuY3Rpb24gX0VtYmVkZGVkTW9kYWxfaW5qZWN0SFRNTCgpIHtcbiAgICAvLyBDaGVjayBpZiB0aGUgSFRNTCBoYXMgYWxyZWFkeSBiZWVuIGluamVjdGVkXG4gICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtcm9vdC11aScpKSB7XG4gICAgICAgIGlmICghX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX3Jvb3QsIFwiZlwiKSlcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9yb290LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLXJvb3QtdWknKSwgXCJmXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIENyZWF0ZSBhIGNvbnRhaW5lciBmb3IgdGhlIG1vZGFsXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX3Jvb3QsIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLCBcImZcIik7XG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX3Jvb3QsIFwiZlwiKS5pZCA9ICdtb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtcm9vdC11aSc7XG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX3Jvb3QsIFwiZlwiKS5pbm5lckhUTUwgPSBtb2RhbEh0bWw7XG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX3Jvb3QsIFwiZlwiKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIC8vIEFkZCBtb2RhbCBjb250ZW50XG4gICAgY29uc3QgY29udGVudCA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9yb290LCBcImZcIikucXVlcnlTZWxlY3RvcignLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1jb250ZW50Jyk7XG4gICAgaWYgKGNvbnRlbnQpXG4gICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gdGhpcy5jb250ZW50SHRtbDtcbiAgICAvLyBBcHBseSBzdHlsZXNcbiAgICBjb25zdCBzdHlsZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlcy5pZCA9ICdtb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtc3R5bGVzJztcbiAgICBzdHlsZXMudGV4dENvbnRlbnQgPSBjc3MkMiArIHRoaXMuY29udGVudFN0eWxlcztcbiAgICAvLyBDcmVhdGUgYSBzaGFkb3cgRE9NIHRvIGVuY2Fwc3VsYXRlIHRoZSBtb2RhbFxuICAgIGNvbnN0IGhvc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBob3N0LmlubmVySFRNTCA9IGZvbnRzO1xuICAgIHRoaXMuZG9tID0gaG9zdC5hdHRhY2hTaGFkb3coeyBtb2RlOiAnY2xvc2VkJyB9KTtcbiAgICB0aGlzLmRvbS5hcHBlbmRDaGlsZChzdHlsZXMpO1xuICAgIHRoaXMuZG9tLmFwcGVuZENoaWxkKF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9yb290LCBcImZcIikpO1xuICAgIC8vIEFwcGVuZCB0aGUgc2hhZG93IERPTSBob3N0IHRvIHRoZSBib2R5XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChob3N0KTtcbn0sIF9FbWJlZGRlZE1vZGFsX2F0dGFjaEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX0VtYmVkZGVkTW9kYWxfYXR0YWNoRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKCFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0VtYmVkZGVkTW9kYWxfcm9vdCwgXCJmXCIpIHx8IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9saXN0ZW5lcnNBdHRhY2hlZCwgXCJmXCIpKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc3QgY2xvc2VycyA9IFsuLi5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0VtYmVkZGVkTW9kYWxfcm9vdCwgXCJmXCIpLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLW1vZGFsLWNsb3NlXScpXTtcbiAgICBjbG9zZXJzLmZvckVhY2goY2xvc2VyID0+IGNsb3NlciA9PT0gbnVsbCB8fCBjbG9zZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNsb3Nlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2UpKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMuY2xvc2UpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0VtYmVkZGVkTW9kYWxfaGFuZGxlS2V5RG93biwgXCJmXCIpKTtcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0JDEodGhpcywgX0VtYmVkZGVkTW9kYWxfbGlzdGVuZXJzQXR0YWNoZWQsIHRydWUsIFwiZlwiKTtcbn0sIF9FbWJlZGRlZE1vZGFsX3JlbW92ZUV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX0VtYmVkZGVkTW9kYWxfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKCFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0VtYmVkZGVkTW9kYWxfbGlzdGVuZXJzQXR0YWNoZWQsIFwiZlwiKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgdGhpcy5jbG9zZSk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9oYW5kbGVLZXlEb3duLCBcImZcIikpO1xuICAgIGlmICghX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX3Jvb3QsIFwiZlwiKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGNsb3NlcnMgPSBbLi4uX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX3Jvb3QsIFwiZlwiKS5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1tb2RhbC1jbG9zZV0nKV07XG4gICAgY2xvc2Vycy5mb3JFYWNoKGNsb3NlciA9PiBjbG9zZXIgPT09IG51bGwgfHwgY2xvc2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjbG9zZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlKSk7XG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX2xpc3RlbmVyc0F0dGFjaGVkLCBmYWxzZSwgXCJmXCIpO1xufTtcblxuY2xhc3MgUmVtb3RlQ29ubmVjdGlvbk1vZGFsIGV4dGVuZHMgRW1iZWRkZWRNb2RhbCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuY29udGVudFN0eWxlcyA9IGNzcyQxO1xuICAgICAgICB0aGlzLmNvbnRlbnRIdG1sID0gUVJDb2RlSHRtbDtcbiAgICB9XG4gICAgaW5pdFdpdGhRUihxckNvZGUpIHtcbiAgICAgICAgY29uc3QgX3N1cGVyID0gT2JqZWN0LmNyZWF0ZShudWxsLCB7XG4gICAgICAgICAgICBpbml0OiB7IGdldDogKCkgPT4gc3VwZXIuaW5pdCB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgX3N1cGVyLmluaXQuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucG9wdWxhdGVRUkNvZGUocXJDb2RlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBvcHVsYXRlUVJDb2RlKHFyVXJsKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHFyY29kZUNvbnRhaW5lciA9IChfYSA9IHRoaXMuZG9tKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0RWxlbWVudEJ5SWQoJ21vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1xci1jb2RlLWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgaWYgKHFyY29kZUNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHFyQ29kZUVsZW1lbnQgPSB5aWVsZCBRUkNvZGUudG9DYW52YXMocXJVcmwsIHsgd2lkdGg6IDIwMCwgbWFyZ2luOiAwIH0pO1xuICAgICAgICAgICAgICAgIGlmIChxcmNvZGVDb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcXJjb2RlQ29udGFpbmVyLnJlcGxhY2VDaGlsZChxckNvZGVFbGVtZW50LCBxcmNvZGVDb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHFyY29kZUNvbnRhaW5lci5hcHBlbmRDaGlsZChxckNvZGVFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1FSQ29kZSBDb250YWluZXIgbm90IGZvdW5kJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmNvbnN0IFFSQ29kZUh0bWwgPSBgXG48ZGl2IGNsYXNzPVwibW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXFyLWNvbnRlbnRcIj5cbiAgICA8ZGl2PlxuICAgICAgICA8c3ZnIGNsYXNzPVwibW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWljb25cIiB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCI+XG4gICAgICAgICAgICA8Y2lyY2xlIHI9XCI1MlwiIGN4PVwiNTNcIiBjeT1cIjUzXCIgZmlsbD1cIiM5OWIzYmVcIiBzdHJva2U9XCIjMDAwMDAwXCIgc3Ryb2tlLXdpZHRoPVwiMlwiLz5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJtIDUzLDgyLjczMDUgYyAtMy4zMTE2LDAgLTYuMTM2MSwtMS4xNjkgLTguNDczNSwtMy41MDcgLTIuMzM4LC0yLjMzOCAtMy41MDcsLTUuMTYyNSAtMy41MDcsLTguNDczNSAwLC0zLjMxMTYgMS4xNjksLTYuMTM2NCAzLjUwNywtOC40NzQ0IDIuMzM3NCwtMi4zMzggNS4xNjE5LC0zLjUwNyA4LjQ3MzUsLTMuNTA3IDMuMzExNiwwIDYuMTM2MSwxLjE2OSA4LjQ3MzUsMy41MDcgMi4zMzgsMi4zMzggMy41MDcsNS4xNjI4IDMuNTA3LDguNDc0NCAwLDMuMzExIC0xLjE2OSw2LjEzNTUgLTMuNTA3LDguNDczNSAtMi4zMzc0LDIuMzM4IC01LjE2MTksMy41MDcgLTguNDczNSwzLjUwNyB6IG0gMC4wMDcsLTUuMjUgYyAxLjg1MzIsMCAzLjQzNywtMC42NTk4IDQuNzUxMiwtMS45NzkzIDEuMzE0OSwtMS4zMTk1IDEuOTcyMywtMi45MDU4IDEuOTcyMywtNC43NTkxIDAsLTEuODUyNiAtMC42NTk4LC0zLjQzNjQgLTEuOTc5MywtNC43NTEyIC0xLjMxOTUsLTEuMzE0OSAtMi45MDU1LC0xLjk3MjMgLTQuNzU4MiwtMS45NzIzIC0xLjg1MzMsMCAtMy40MzcsMC42NTk4IC00Ljc1MTMsMS45NzkzIC0xLjMxNDgsMS4zMTk1IC0xLjk3MjIsMi45MDU4IC0xLjk3MjIsNC43NTkxIDAsMS44NTI3IDAuNjU5NywzLjQzNjQgMS45NzkyLDQuNzUxMiAxLjMxOTUsMS4zMTQ5IDIuOTA1NiwxLjk3MjMgNC43NTgzLDEuOTcyMyB6IG0gLTI4LC0zMy41NzI5IC0zLjg1LC0zLjYzNDcgYyA0LjExOTUsLTQuMDI1IDguODc5MiwtNy4xOTg0IDE0LjI3OTEsLTkuNTIgNS40MDA1LC0yLjMyMjMgMTEuMjU1MSwtMy40ODM0IDE3LjU2MzksLTMuNDgzNCA2LjMwODcsMCAxMi4xNjM0LDEuMTYxMSAxNy41NjM5LDMuNDgzNCA1LjM5OTksMi4zMjE2IDEwLjE1OTYsNS40OTUgMTQuMjc5MSw5LjUyIGwgLTMuODUsMy42MzQ3IEMgNzcuMjk5OSw0MC4zNTggNzMuMDY4NCwzNy41NzI2IDY4LjI5ODUsMzUuNTUxNCA2My41MjkyLDMzLjUzMDEgNTguNDI5NiwzMi41MTk1IDUzLDMyLjUxOTUgYyAtNS40Mjk3LDAgLTEwLjUyOTIsMS4wMTA2IC0xNS4yOTg1LDMuMDMxOSAtNC43Njk5LDIuMDIxMiAtOS4wMDE0LDQuODA2NiAtMTIuNjk0NSw4LjM1NjIgeiBtIDQ0LjYyNSwxMC44NzcxIGMgLTIuMjcwOSwtMi4xMDQ2IC00Ljc5NjIsLTMuNzE2NyAtNy41NzU4LC00LjgzNjEgLTIuNzc5NSwtMS4xMiAtNS43OTgzLC0xLjY4IC05LjA1NjIsLTEuNjggLTMuMjU3OSwwIC02LjI2MjEsMC41NiAtOS4wMTI1LDEuNjggLTIuNzUwNCwxLjExOTQgLTUuMjkwMywyLjczMTUgLTcuNjE5NSw0LjgzNjEgTCAzMi41MTg5LDUxLjE1IGMgMi44MzU1LC0yLjYwMjggNS45Nzc3LC00LjYwODYgOS40MjYzLC02LjAxNzQgMy40NDgxLC0xLjQwODcgNy4xMzMsLTIuMTEzMSAxMS4wNTQ4LC0yLjExMzEgMy45MjE3LDAgNy41OTc5LDAuNzA0NCAxMS4wMjg1LDIuMTEzMSAzLjQzLDEuNDA4OCA2LjU2MzEsMy40MTQ2IDkuMzk5Miw2LjAxNzQgelwiLz5cbiAgICAgICAgPC9zdmc+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtdGl0bGVcIj5SZW1vdGUgTW9iaWxlIFdhbGxldCBBZGFwdGVyPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxoNCBjbGFzcz1cIm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1xci1sYWJlbFwiPlxuICAgICAgICAgICAgICAgIE9wZW4geW91ciB3YWxsZXQgYW5kIHNjYW4gdGhpcyBjb2RlXG4gICAgICAgICAgICA8L2g0PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBpZD1cIm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1xci1jb2RlLWNvbnRhaW5lclwiIGNsYXNzPVwibW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXFyLWNvZGUtY29udGFpbmVyXCI+PC9kaXY+XG4gICAgPC9kaXY+XG48L2Rpdj5cbjxkaXYgY2xhc3M9XCJtb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtZGl2aWRlclwiPjxocj48L2Rpdj5cbjxkaXYgY2xhc3M9XCJtb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtZm9vdGVyXCI+XG4gICAgPGRpdiBjbGFzcz1cIm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1zdWJ0aXRsZVwiPlxuICAgICAgICBGb2xsb3cgdGhlIGluc3RydWN0aW9ucyBvbiB5b3VyIGRldmljZS4gV2hlbiB5b3UncmUgZmluaXNoZWQsIHRoaXMgc2NyZWVuIHdpbGwgdXBkYXRlLlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJtb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtcHJvZ3Jlc3MtYmFkZ2VcIj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzcGlubmVyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxlZnRXcmFwcGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZWZ0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2lyY2xlXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyaWdodFdyYXBwZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJpZ2h0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2lyY2xlXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2PldhaXRpbmcgZm9yIHNjYW48L2Rpdj5cbiAgICA8L2Rpdj5cbjwvZGl2PlxuYDtcbmNvbnN0IGNzcyQxID0gYFxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1xci1jb250ZW50IHtcbiAgICBkaXNwbGF5OiBmbGV4OyBcbiAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgIHBhZGRpbmc6IDEwcHg7XG59XG5cbi5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtcXItY29udGVudCA+IGRpdjpmaXJzdC1jaGlsZCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGZsZXg6IDI7XG4gICAgbWFyZ2luLXRvcDogYXV0bztcbiAgICBtYXJnaW4tcmlnaHQ6IDMwcHg7XG59XG5cbi5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtcXItY29udGVudCA+IGRpdjpudGgtY2hpbGQoMikge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBmbGV4OiAxO1xuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xufVxuXG4ubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWZvb3RlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBwYWRkaW5nOiAxMHB4O1xufVxuXG4ubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWljb24ge31cblxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC10aXRsZSB7XG4gICAgY29sb3I6ICMwMDAwMDA7XG4gICAgZm9udC1zaXplOiAyLjVlbTtcbiAgICBmb250LXdlaWdodDogNjAwO1xufVxuXG4ubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXFyLWxhYmVsIHtcbiAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICBjb2xvcjogIzAwMDAwMDtcbn1cblxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1xci1jb2RlLWNvbnRhaW5lciB7XG4gICAgbWFyZ2luLWxlZnQ6IGF1dG87XG59XG5cbi5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtZGl2aWRlciB7XG4gICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICBwYWRkaW5nLWxlZnQ6IDEwcHg7XG4gICAgcGFkZGluZy1yaWdodDogMTBweDtcbn1cblxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1kaXZpZGVyIGhyIHtcbiAgICBib3JkZXItdG9wOiAxcHggc29saWQgI0Q5REVERTtcbn1cblxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1zdWJ0aXRsZSB7XG4gICAgbWFyZ2luOiBhdXRvO1xuICAgIG1hcmdpbi1yaWdodDogNjBweDtcbiAgICBwYWRkaW5nOiAyMHB4O1xuICAgIGNvbG9yOiAjNkU4Mjg2O1xufVxuXG4ubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXByb2dyZXNzLWJhZGdlIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGJhY2tncm91bmQ6ICNGN0Y4Rjg7XG4gICAgaGVpZ2h0OiA1NnB4O1xuICAgIG1pbi13aWR0aDogMjAwcHg7XG4gICAgbWFyZ2luOiBhdXRvO1xuICAgIHBhZGRpbmctbGVmdDogMjBweDtcbiAgICBwYWRkaW5nLXJpZ2h0OiAyMHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDE4cHg7XG4gICAgY29sb3I6ICNBOEI2Qjg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cblxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1wcm9ncmVzcy1iYWRnZSA+IGRpdjpmaXJzdC1jaGlsZCB7XG4gICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgbWFyZ2luLXJpZ2h0OiAyMHB4O1xufVxuXG4ubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXByb2dyZXNzLWJhZGdlID4gZGl2Om50aC1jaGlsZCgyKSB7XG4gICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xufVxuXG4vKiBTbWFsbGVyIHNjcmVlbnMgKi9cbkBtZWRpYSBhbGwgYW5kIChtYXgtd2lkdGg6IDYwMHB4KSB7XG4gICAgLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1jYXJkIHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIH1cbiAgICAubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXFyLWNvbnRlbnQge1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIH1cbiAgICAubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXFyLWNvbnRlbnQgPiBkaXY6Zmlyc3QtY2hpbGQge1xuICAgICAgICBtYXJnaW46IGF1dG87XG4gICAgfVxuICAgIC5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtcXItY29udGVudCA+IGRpdjpudGgtY2hpbGQoMikge1xuICAgICAgICBtYXJnaW46IGF1dG87XG4gICAgICAgIGZsZXg6IDIgYXV0bztcbiAgICB9XG4gICAgLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1mb290ZXIge1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIH1cbiAgICAubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWljb24ge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgICAubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXRpdGxlIHtcbiAgICAgICAgZm9udC1zaXplOiAxLjVlbTtcbiAgICB9XG4gICAgLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1zdWJ0aXRsZSB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogdW5zZXQ7XG4gICAgfVxuICAgIC5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtcXItbGFiZWwge1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgfVxuICAgIC5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtcXItY29kZS1jb250YWluZXIge1xuICAgICAgICBtYXJnaW46IGF1dG87XG4gICAgfVxufVxuXG4vKiBTcGlubmVyICovXG5Aa2V5ZnJhbWVzIHNwaW5MZWZ0IHtcbiAgICAwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDIwZGVnKTtcbiAgICB9XG4gICAgNTAlIHtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMTYwZGVnKTtcbiAgICB9XG4gICAgMTAwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDIwZGVnKTtcbiAgICB9XG59XG5Aa2V5ZnJhbWVzIHNwaW5SaWdodCB7XG4gICAgMCUge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgxNjBkZWcpO1xuICAgIH1cbiAgICA1MCUge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgyMGRlZyk7XG4gICAgfVxuICAgIDEwMCUge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgxNjBkZWcpO1xuICAgIH1cbn1cbkBrZXlmcmFtZXMgc3BpbiB7XG4gICAgMCUge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTtcbiAgICB9XG4gICAgMTAwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDI1MjBkZWcpO1xuICAgIH1cbn1cblxuLnNwaW5uZXIge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB3aWR0aDogMS41ZW07XG4gICAgaGVpZ2h0OiAxLjVlbTtcbiAgICBtYXJnaW46IGF1dG87XG4gICAgYW5pbWF0aW9uOiBzcGluIDEwcyBsaW5lYXIgaW5maW5pdGU7XG59XG4uc3Bpbm5lcjo6YmVmb3JlIHtcbiAgICBjb250ZW50OiBcIlwiO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgcmlnaHQ6IDA7XG59XG4ucmlnaHQsIC5yaWdodFdyYXBwZXIsIC5sZWZ0LCAubGVmdFdyYXBwZXIge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB3aWR0aDogLjc1ZW07XG4gICAgaGVpZ2h0OiAxLjVlbTtcbn1cbi5sZWZ0LCAubGVmdFdyYXBwZXIge1xuICAgIGxlZnQ6IDA7XG59XG4ucmlnaHQge1xuICAgIGxlZnQ6IC0xMnB4O1xufVxuLnJpZ2h0V3JhcHBlciB7XG4gICAgcmlnaHQ6IDA7XG59XG4uY2lyY2xlIHtcbiAgICBib3JkZXI6IC4xMjVlbSBzb2xpZCAjQThCNkI4O1xuICAgIHdpZHRoOiAxLjI1ZW07IC8qIDEuNWVtIC0gMiowLjEyNWVtIGJvcmRlciAqL1xuICAgIGhlaWdodDogMS4yNWVtOyAvKiAxLjVlbSAtIDIqMC4xMjVlbSBib3JkZXIgKi9cbiAgICBib3JkZXItcmFkaXVzOiAwLjc1ZW07IC8qIDAuNSoxLjVlbSBzcGlubmVyIHNpemUgOCAqL1xufVxuLmxlZnQge1xuICAgIHRyYW5zZm9ybS1vcmlnaW46IDEwMCUgNTAlO1xuICAgIGFuaW1hdGlvbjogc3BpbkxlZnQgMi41cyBjdWJpYy1iZXppZXIoLjIsMCwuOCwxKSBpbmZpbml0ZTtcbn1cbi5yaWdodCB7XG4gICAgdHJhbnNmb3JtLW9yaWdpbjogMTAwJSA1MCU7XG4gICAgYW5pbWF0aW9uOiBzcGluUmlnaHQgMi41cyBjdWJpYy1iZXppZXIoLjIsMCwuOCwxKSBpbmZpbml0ZTtcbn1cbmA7XG5cbmNvbnN0IGljb24gPSAnZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTWpRaUlHaGxhV2RvZEQwaU1qUWlJSFpwWlhkQ2IzZzlJakFnTUNBeU5DQXlOQ0lnWm1sc2JEMGlibTl1WlNJZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWo0S1BIQmhkR2dnWm1sc2JDMXlkV3hsUFNKbGRtVnViMlJrSWlCamJHbHdMWEoxYkdVOUltVjJaVzV2WkdRaUlHUTlJazAzSURJdU5VZ3hOME14Tnk0NE1qZzBJREl1TlNBeE9DNDFJRE11TVRjeE5UY2dNVGd1TlNBMFZqSXdRekU0TGpVZ01qQXVPREk0TkNBeE55NDRNamcwSURJeExqVWdNVGNnTWpFdU5VZzNRell1TVRjeE5UY2dNakV1TlNBMUxqVWdNakF1T0RJNE5DQTFMalVnTWpCV05FTTFMalVnTXk0eE56RTFOeUEyTGpFM01UVTNJREl1TlNBM0lESXVOVnBOTXlBMFF6TWdNUzQzT1RBNE5pQTBMamM1TURnMklEQWdOeUF3U0RFM1F6RTVMakl3T1RFZ01DQXlNU0F4TGpjNU1EZzJJREl4SURSV01qQkRNakVnTWpJdU1qQTVNU0F4T1M0eU1Ea3hJREkwSURFM0lESTBTRGRETkM0M09UQTROaUF5TkNBeklESXlMakl3T1RFZ015QXlNRlkwV2sweE1TQTBMall4TlRNNFF6RXdMalEwTnpjZ05DNDJNVFV6T0NBeE1DQTFMakEyTXpFZ01UQWdOUzQyTVRVek9GWTJMak00TkRZeVF6RXdJRFl1T1RNMk9TQXhNQzQwTkRjM0lEY3VNemcwTmpJZ01URWdOeTR6T0RRMk1rZ3hNME14TXk0MU5USXpJRGN1TXpnME5qSWdNVFFnTmk0NU16WTVJREUwSURZdU16ZzBOakpXTlM0Mk1UVXpPRU14TkNBMUxqQTJNekVnTVRNdU5UVXlNeUEwTGpZeE5UTTRJREV6SURRdU5qRTFNemhJTVRGYUlpQm1hV3hzUFNJalJFTkNPRVpHSWk4K0Nqd3ZjM1puUGdvPSc7XG5cbmZ1bmN0aW9uIGZyb21VaW50OEFycmF5KGJ5dGVBcnJheSkge1xuICAgIHJldHVybiB3aW5kb3cuYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlLmNhbGwobnVsbCwgLi4uYnl0ZUFycmF5KSk7XG59XG5mdW5jdGlvbiB0b1VpbnQ4QXJyYXkoYmFzZTY0RW5jb2RlZEJ5dGVBcnJheSkge1xuICAgIHJldHVybiBuZXcgVWludDhBcnJheSh3aW5kb3dcbiAgICAgICAgLmF0b2IoYmFzZTY0RW5jb2RlZEJ5dGVBcnJheSlcbiAgICAgICAgLnNwbGl0KCcnKVxuICAgICAgICAubWFwKChjKSA9PiBjLmNoYXJDb2RlQXQoMCkpKTtcbn1cblxudmFyIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaW5zdGFuY2VzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2xpc3RlbmVycywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF92ZXJzaW9uLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X25hbWUsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdXJsLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2ljb24sIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXBwSWRlbnRpdHksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uQ2FjaGUsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGluZywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW9uR2VuZXJhdGlvbiwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jaGFpbnMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5TZWxlY3RvciwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vcHRpb25hbEZlYXR1cmVzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29uV2FsbGV0Tm90Rm91bmQsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb24sIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfZW1pdCwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vZmYsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdCwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtQXV0aG9yaXphdGlvbiwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9oYW5kbGVBdXRob3JpemF0aW9uUmVzdWx0LCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZVdhbGxldENhcGFiaWxpdGllc1Jlc3VsdCwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtUmVhdXRob3JpemF0aW9uLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Rpc2Nvbm5lY3QsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdHJhbnNhY3QsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXNzZXJ0SXNBdXRob3JpemVkLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2FjY291bnRzVG9XYWxsZXRTdGFuZGFyZEFjY291bnRzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1TaWduVHJhbnNhY3Rpb25zLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1TaWduQW5kU2VuZFRyYW5zYWN0aW9uLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25BbmRTZW5kVHJhbnNhY3Rpb24sIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnblRyYW5zYWN0aW9uLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25NZXNzYWdlLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25JbiwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnbkluLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9pbnN0YW5jZXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2xpc3RlbmVycywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdmVyc2lvbiwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfbmFtZSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdXJsLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9pY29uLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hcHBJZGVudGl0eSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbkNhY2hlLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW5nLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW9uR2VuZXJhdGlvbiwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5zLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jaGFpblNlbGVjdG9yLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vcHRpb25hbEZlYXR1cmVzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vbldhbGxldE5vdEZvdW5kLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9ob3N0QXV0aG9yaXR5LCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zZXNzaW9uLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vbiwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfZW1pdCwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb2ZmLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0LCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtQXV0aG9yaXphdGlvbiwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaGFuZGxlQXV0aG9yaXphdGlvblJlc3VsdCwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaGFuZGxlV2FsbGV0Q2FwYWJpbGl0aWVzUmVzdWx0LCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtUmVhdXRob3JpemF0aW9uLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9kaXNjb25uZWN0LCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF90cmFuc2FjdCwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXNzZXJ0SXNBdXRob3JpemVkLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hY2NvdW50c1RvV2FsbGV0U3RhbmRhcmRBY2NvdW50cywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVNpZ25UcmFuc2FjdGlvbnMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1TaWduQW5kU2VuZFRyYW5zYWN0aW9uLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduQW5kU2VuZFRyYW5zYWN0aW9uLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduVHJhbnNhY3Rpb24sIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25NZXNzYWdlLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduSW4sIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1TaWduSW47XG5jb25zdCBTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0TmFtZSA9ICdNb2JpbGUgV2FsbGV0IEFkYXB0ZXInO1xuY29uc3QgU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlclJlbW90ZVdhbGxldE5hbWUgPSAnUmVtb3RlIE1vYmlsZSBXYWxsZXQgQWRhcHRlcic7XG5jb25zdCBTSUdOQVRVUkVfTEVOR1RIX0lOX0JZVEVTID0gNjQ7XG5jb25zdCBERUZBVUxUX0ZFQVRVUkVTID0gW1NvbGFuYVNpZ25BbmRTZW5kVHJhbnNhY3Rpb24sIFNvbGFuYVNpZ25UcmFuc2FjdGlvbiwgU29sYW5hU2lnbk1lc3NhZ2UsIFNvbGFuYVNpZ25Jbl07XG5jbGFzcyBMb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXQge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2luc3RhbmNlcy5hZGQodGhpcyk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfbGlzdGVuZXJzLnNldCh0aGlzLCB7fSk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdmVyc2lvbi5zZXQodGhpcywgJzEuMC4wJyk7IC8vIHdhbGxldC1zdGFuZGFyZCB2ZXJzaW9uXG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfbmFtZS5zZXQodGhpcywgU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldE5hbWUpO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3VybC5zZXQodGhpcywgJ2h0dHBzOi8vc29sYW5hbW9iaWxlLmNvbS93YWxsZXRzJyk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaWNvbi5zZXQodGhpcywgaWNvbik7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXBwSWRlbnRpdHkuc2V0KHRoaXMsIHZvaWQgMCk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbi5zZXQodGhpcywgdm9pZCAwKTtcbiAgICAgICAgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uQ2FjaGUuc2V0KHRoaXMsIHZvaWQgMCk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGluZy5zZXQodGhpcywgZmFsc2UpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRXZlcnkgdGltZSB0aGUgY29ubmVjdGlvbiBpcyByZWN5Y2xlZCBpbiBzb21lIHdheSAoZWcuIGBkaXNjb25uZWN0KClgIGlzIGNhbGxlZClcbiAgICAgICAgICogaW5jcmVtZW50IHRoaXMgYW5kIHVzZSBpdCB0byBtYWtlIHN1cmUgdGhhdCBgdHJhbnNhY3RgIGNhbGxzIGZyb20gdGhlIHByZXZpb3VzXG4gICAgICAgICAqICdnZW5lcmF0aW9uJyBkb24ndCBjb250aW51ZSB0byBkbyB3b3JrIGFuZCB0aHJvdyBleGNlcHRpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW9uR2VuZXJhdGlvbi5zZXQodGhpcywgMCk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5zLnNldCh0aGlzLCBbXSk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5TZWxlY3Rvci5zZXQodGhpcywgdm9pZCAwKTtcbiAgICAgICAgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vcHRpb25hbEZlYXR1cmVzLnNldCh0aGlzLCB2b2lkIDApO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29uV2FsbGV0Tm90Rm91bmQuc2V0KHRoaXMsIHZvaWQgMCk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb24uc2V0KHRoaXMsIChldmVudCwgbGlzdGVuZXIpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICgoX2EgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9saXN0ZW5lcnMsIFwiZlwiKVtldmVudF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wdXNoKGxpc3RlbmVyKSkgfHwgKF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2xpc3RlbmVycywgXCJmXCIpW2V2ZW50XSA9IFtsaXN0ZW5lcl0pO1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2luc3RhbmNlcywgXCJtXCIsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb2ZmKS5jYWxsKHRoaXMsIGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgICAgIH0pO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3Quc2V0KHRoaXMsICh7IHNpbGVudCB9ID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW5nLCBcImZcIikgfHwgdGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBhY2NvdW50czogdGhpcy5hY2NvdW50cyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGluZywgdHJ1ZSwgXCJmXCIpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoc2lsZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlZEF1dGhvcml6YXRpb24gPSB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uQ2FjaGUsIFwiZlwiKS5nZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlZEF1dGhvcml6YXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZVdhbGxldENhcGFiaWxpdGllc1Jlc3VsdCwgXCJmXCIpLmNhbGwodGhpcywgY2FjaGVkQXV0aG9yaXphdGlvbi5jYXBhYmlsaXRpZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaGFuZGxlQXV0aG9yaXphdGlvblJlc3VsdCwgXCJmXCIpLmNhbGwodGhpcywgY2FjaGVkQXV0aG9yaXphdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBhY2NvdW50czogdGhpcy5hY2NvdW50cyB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtQXV0aG9yaXphdGlvbiwgXCJmXCIpLmNhbGwodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKGUgaW5zdGFuY2VvZiBFcnJvciAmJiBlLm1lc3NhZ2UpIHx8ICdVbmtub3duIGVycm9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW5nLCBmYWxzZSwgXCJmXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgYWNjb3VudHM6IHRoaXMuYWNjb3VudHMgfTtcbiAgICAgICAgfSkpO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1BdXRob3JpemF0aW9uLnNldCh0aGlzLCAoc2lnbkluUGF5bG9hZCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZWRBdXRob3JpemF0aW9uUmVzdWx0ID0geWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbkNhY2hlLCBcImZcIikuZ2V0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlZEF1dGhvcml6YXRpb25SZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogRXZhbHVhdGUgd2hldGhlciB0aGVyZSdzIGFueSB0aHJlYXQgdG8gbm90IGBhd2FpdGluZ2AgdGhpcyBleHByZXNzaW9uXG4gICAgICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZUF1dGhvcml6YXRpb25SZXN1bHQsIFwiZlwiKS5jYWxsKHRoaXMsIGNhY2hlZEF1dGhvcml6YXRpb25SZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVkQXV0aG9yaXphdGlvblJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRDaGFpbiA9IHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2NoYWluU2VsZWN0b3IsIFwiZlwiKS5zZWxlY3QoX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5zLCBcImZcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF90cmFuc2FjdCwgXCJmXCIpLmNhbGwodGhpcywgKHdhbGxldCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbY2FwYWJpbGl0aWVzLCBtd2FBdXRob3JpemF0aW9uUmVzdWx0XSA9IHlpZWxkIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhbGxldC5nZXRDYXBhYmlsaXRpZXMoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhbGxldC5hdXRob3JpemUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluOiBzZWxlY3RlZENoYWluLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkZW50aXR5OiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hcHBJZGVudGl0eSwgXCJmXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25faW5fcGF5bG9hZDogc2lnbkluUGF5bG9hZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50cyA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2FjY291bnRzVG9XYWxsZXRTdGFuZGFyZEFjY291bnRzLCBcImZcIikuY2FsbCh0aGlzLCBtd2FBdXRob3JpemF0aW9uUmVzdWx0LmFjY291bnRzKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXV0aG9yaXphdGlvbiA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbXdhQXV0aG9yaXphdGlvblJlc3VsdCksIHsgYWNjb3VudHMsIGNoYWluOiBzZWxlY3RlZENoYWluLCBjYXBhYmlsaXRpZXM6IGNhcGFiaWxpdGllcyB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogRXZhbHVhdGUgd2hldGhlciB0aGVyZSdzIGFueSB0aHJlYXQgdG8gbm90IGBhd2FpdGluZ2AgdGhpcyBleHByZXNzaW9uXG4gICAgICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZVdhbGxldENhcGFiaWxpdGllc1Jlc3VsdCwgXCJmXCIpLmNhbGwodGhpcywgY2FwYWJpbGl0aWVzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb25DYWNoZSwgXCJmXCIpLnNldChhdXRob3JpemF0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZUF1dGhvcml6YXRpb25SZXN1bHQsIFwiZlwiKS5jYWxsKHRoaXMsIGF1dGhvcml6YXRpb24pLFxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF1dGhvcml6YXRpb247XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKGUgaW5zdGFuY2VvZiBFcnJvciAmJiBlLm1lc3NhZ2UpIHx8ICdVbmtub3duIGVycm9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9oYW5kbGVBdXRob3JpemF0aW9uUmVzdWx0LnNldCh0aGlzLCAoYXV0aG9yaXphdGlvbikgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgY29uc3QgZGlkUHVibGljS2V5c0NoYW5nZSA9IFxuICAgICAgICAgICAgLy8gQ2FzZSAxOiBXZSBzdGFydGVkIGZyb20gaGF2aW5nIG5vIGF1dGhvcml6YXRpb24uXG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCBcImZcIikgPT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIC8vIENhc2UgMjogVGhlIG51bWJlciBvZiBhdXRob3JpemVkIGFjY291bnRzIGNoYW5nZWQuXG4gICAgICAgICAgICAgICAgKChfYSA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIFwiZlwiKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFjY291bnRzLmxlbmd0aCkgIT09IGF1dGhvcml6YXRpb24uYWNjb3VudHMubGVuZ3RoIHx8XG4gICAgICAgICAgICAgICAgLy8gQ2FzZSAzOiBUaGUgbmV3IGxpc3Qgb2YgYWRkcmVzc2VzIGlzbid0IGV4YWN0bHkgdGhlIHNhbWUgYXMgdGhlIG9sZCBsaXN0LCBpbiB0aGUgc2FtZSBvcmRlci5cbiAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCBcImZcIikuYWNjb3VudHMuc29tZSgoYWNjb3VudCwgaWkpID0+IGFjY291bnQuYWRkcmVzcyAhPT0gYXV0aG9yaXphdGlvbi5hY2NvdW50c1tpaV0uYWRkcmVzcyk7XG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCBhdXRob3JpemF0aW9uLCBcImZcIik7XG4gICAgICAgICAgICBpZiAoZGlkUHVibGljS2V5c0NoYW5nZSkge1xuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2luc3RhbmNlcywgXCJtXCIsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfZW1pdCkuY2FsbCh0aGlzLCAnY2hhbmdlJywgeyBhY2NvdW50czogdGhpcy5hY2NvdW50cyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZVdhbGxldENhcGFiaWxpdGllc1Jlc3VsdC5zZXQodGhpcywgKGNhcGFiaWxpdGllcykgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gVE9ETzogaW52ZXN0aWdhdGUgd2h5IHVzaW5nIFNvbGFuYVNpZ25UcmFuc2FjdGlvbnMgY29uc3RhbnQgYnJlYWtzIHRyZWVzaGFraW5nXG4gICAgICAgICAgICBjb25zdCBzdXBwb3J0c1NpZ25UcmFuc2FjdGlvbiA9IGNhcGFiaWxpdGllcy5mZWF0dXJlcy5pbmNsdWRlcygnc29sYW5hOnNpZ25UcmFuc2FjdGlvbnMnKTsgLy9Tb2xhbmFTaWduVHJhbnNhY3Rpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IHN1cHBvcnRzU2lnbkFuZFNlbmRUcmFuc2FjdGlvbiA9IGNhcGFiaWxpdGllcy5zdXBwb3J0c19zaWduX2FuZF9zZW5kX3RyYW5zYWN0aW9ucztcbiAgICAgICAgICAgIGNvbnN0IGRpZENhcGFiaWxpdGllc0NoYW5nZSA9IFNvbGFuYVNpZ25BbmRTZW5kVHJhbnNhY3Rpb24gaW4gdGhpcy5mZWF0dXJlcyAhPT0gc3VwcG9ydHNTaWduQW5kU2VuZFRyYW5zYWN0aW9uIHx8XG4gICAgICAgICAgICAgICAgU29sYW5hU2lnblRyYW5zYWN0aW9uIGluIHRoaXMuZmVhdHVyZXMgIT09IHN1cHBvcnRzU2lnblRyYW5zYWN0aW9uO1xuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb3B0aW9uYWxGZWF0dXJlcywgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCAoKHN1cHBvcnRzU2lnbkFuZFNlbmRUcmFuc2FjdGlvbiB8fCAoIXN1cHBvcnRzU2lnbkFuZFNlbmRUcmFuc2FjdGlvbiAmJiAhc3VwcG9ydHNTaWduVHJhbnNhY3Rpb24pKSAmJiB7XG4gICAgICAgICAgICAgICAgW1NvbGFuYVNpZ25BbmRTZW5kVHJhbnNhY3Rpb25dOiB7XG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZFRyYW5zYWN0aW9uVmVyc2lvbnM6IFsnbGVnYWN5JywgMF0sXG4gICAgICAgICAgICAgICAgICAgIHNpZ25BbmRTZW5kVHJhbnNhY3Rpb246IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25BbmRTZW5kVHJhbnNhY3Rpb24sIFwiZlwiKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSkpLCAoc3VwcG9ydHNTaWduVHJhbnNhY3Rpb24gJiYge1xuICAgICAgICAgICAgICAgIFtTb2xhbmFTaWduVHJhbnNhY3Rpb25dOiB7XG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZFRyYW5zYWN0aW9uVmVyc2lvbnM6IFsnbGVnYWN5JywgMF0sXG4gICAgICAgICAgICAgICAgICAgIHNpZ25UcmFuc2FjdGlvbjogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnblRyYW5zYWN0aW9uLCBcImZcIiksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pKSwgXCJmXCIpO1xuICAgICAgICAgICAgaWYgKGRpZENhcGFiaWxpdGllc0NoYW5nZSkge1xuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2luc3RhbmNlcywgXCJtXCIsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfZW1pdCkuY2FsbCh0aGlzLCAnY2hhbmdlJywgeyBmZWF0dXJlczogdGhpcy5mZWF0dXJlcyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1SZWF1dGhvcml6YXRpb24uc2V0KHRoaXMsICh3YWxsZXQsIGF1dGhUb2tlbiwgY2hhaW4pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfYiwgX2M7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtjYXBhYmlsaXRpZXMsIG13YUF1dGhvcml6YXRpb25SZXN1bHRdID0geWllbGQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgICAgICAoX2MgPSAoX2IgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCBcImZcIikpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYXBhYmlsaXRpZXMpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHlpZWxkIHdhbGxldC5nZXRDYXBhYmlsaXRpZXMoKSxcbiAgICAgICAgICAgICAgICAgICAgd2FsbGV0LmF1dGhvcml6ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRoX3Rva2VuOiBhdXRoVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBpZGVudGl0eTogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXBwSWRlbnRpdHksIFwiZlwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluOiBjaGFpblxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjY291bnRzID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYWNjb3VudHNUb1dhbGxldFN0YW5kYXJkQWNjb3VudHMsIFwiZlwiKS5jYWxsKHRoaXMsIG13YUF1dGhvcml6YXRpb25SZXN1bHQuYWNjb3VudHMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1dGhvcml6YXRpb24gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG13YUF1dGhvcml6YXRpb25SZXN1bHQpLCB7IGFjY291bnRzOiBhY2NvdW50cywgY2hhaW46IGNoYWluLCBjYXBhYmlsaXRpZXM6IGNhcGFiaWxpdGllcyB9KTtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBFdmFsdWF0ZSB3aGV0aGVyIHRoZXJlJ3MgYW55IHRocmVhdCB0byBub3QgYGF3YWl0aW5nYCB0aGlzIGV4cHJlc3Npb25cbiAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb25DYWNoZSwgXCJmXCIpLnNldChhdXRob3JpemF0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaGFuZGxlQXV0aG9yaXphdGlvblJlc3VsdCwgXCJmXCIpLmNhbGwodGhpcywgYXV0aG9yaXphdGlvbiksXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Rpc2Nvbm5lY3QsIFwiZlwiKS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigoZSBpbnN0YW5jZW9mIEVycm9yICYmIGUubWVzc2FnZSkgfHwgJ1Vua25vd24gZXJyb3InKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Rpc2Nvbm5lY3Quc2V0KHRoaXMsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfZDtcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb25DYWNoZSwgXCJmXCIpLmNsZWFyKCk7IC8vIFRPRE86IEV2YWx1YXRlIHdoZXRoZXIgdGhlcmUncyBhbnkgdGhyZWF0IHRvIG5vdCBgYXdhaXRpbmdgIHRoaXMgZXhwcmVzc2lvblxuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGluZywgZmFsc2UsIFwiZlwiKTtcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3Rpb25HZW5lcmF0aW9uLCAoX2QgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW9uR2VuZXJhdGlvbiwgXCJmXCIpLCBfZCsrLCBfZCksIFwiZlwiKTtcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIHVuZGVmaW5lZCwgXCJmXCIpO1xuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaW5zdGFuY2VzLCBcIm1cIiwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9lbWl0KS5jYWxsKHRoaXMsICdjaGFuZ2UnLCB7IGFjY291bnRzOiB0aGlzLmFjY291bnRzIH0pO1xuICAgICAgICB9KSk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdHJhbnNhY3Quc2V0KHRoaXMsIChjYWxsYmFjaykgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9lO1xuICAgICAgICAgICAgY29uc3Qgd2FsbGV0VXJpQmFzZSA9IChfZSA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIFwiZlwiKSkgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLndhbGxldF91cmlfYmFzZTtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHdhbGxldFVyaUJhc2UgPyB7IGJhc2VVcmk6IHdhbGxldFVyaUJhc2UgfSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb25uZWN0aW9uR2VuZXJhdGlvbiA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3Rpb25HZW5lcmF0aW9uLCBcImZcIik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCB0cmFuc2FjdChjYWxsYmFjaywgY29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3Rpb25HZW5lcmF0aW9uLCBcImZcIikgIT09IGN1cnJlbnRDb25uZWN0aW9uR2VuZXJhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgoKSA9PiB7IH0pOyAvLyBOZXZlciByZXNvbHZlLlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yICYmXG4gICAgICAgICAgICAgICAgICAgIGUubmFtZSA9PT0gJ1NvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJFcnJvcicgJiZcbiAgICAgICAgICAgICAgICAgICAgZS5jb2RlID09PSAnRVJST1JfV0FMTEVUX05PVF9GT1VORCcpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb25XYWxsZXROb3RGb3VuZCwgXCJmXCIpLmNhbGwodGhpcywgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hc3NlcnRJc0F1dGhvcml6ZWQuc2V0KHRoaXMsICgpID0+IHtcbiAgICAgICAgICAgIGlmICghX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiwgXCJmXCIpKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2FsbGV0IG5vdCBjb25uZWN0ZWQnKTtcbiAgICAgICAgICAgIHJldHVybiB7IGF1dGhUb2tlbjogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiwgXCJmXCIpLmF1dGhfdG9rZW4sIGNoYWluOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCBcImZcIikuY2hhaW4gfTtcbiAgICAgICAgfSk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYWNjb3VudHNUb1dhbGxldFN0YW5kYXJkQWNjb3VudHMuc2V0KHRoaXMsIChhY2NvdW50cykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGFjY291bnRzLm1hcCgoYWNjb3VudCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICAgICAgY29uc3QgcHVibGljS2V5ID0gdG9VaW50OEFycmF5KGFjY291bnQuYWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzczogYmFzZTU4LmVuY29kZShwdWJsaWNLZXkpLFxuICAgICAgICAgICAgICAgICAgICBwdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBhY2NvdW50LmxhYmVsLFxuICAgICAgICAgICAgICAgICAgICBpY29uOiBhY2NvdW50Lmljb24sXG4gICAgICAgICAgICAgICAgICAgIGNoYWluczogKF9hID0gYWNjb3VudC5jaGFpbnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2NoYWlucywgXCJmXCIpLFxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBnZXQgc3VwcG9ydGVkIGZlYXR1cmVzIGZyb20gZ2V0Q2FwYWJpbGl0aWVzIEFQSSBcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXM6IChfYiA9IGFjY291bnQuZmVhdHVyZXMpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IERFRkFVTFRfRkVBVFVSRVNcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1TaWduVHJhbnNhY3Rpb25zLnNldCh0aGlzLCAodHJhbnNhY3Rpb25zKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCB7IGF1dGhUb2tlbiwgY2hhaW4gfSA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Fzc2VydElzQXV0aG9yaXplZCwgXCJmXCIpLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NFRyYW5zYWN0aW9ucyA9IHRyYW5zYWN0aW9ucy5tYXAoKHR4KSA9PiB7IHJldHVybiBmcm9tVWludDhBcnJheSh0eCk7IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF90cmFuc2FjdCwgXCJmXCIpLmNhbGwodGhpcywgKHdhbGxldCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtUmVhdXRob3JpemF0aW9uLCBcImZcIikuY2FsbCh0aGlzLCB3YWxsZXQsIGF1dGhUb2tlbiwgY2hhaW4pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbnMgPSAoeWllbGQgd2FsbGV0LnNpZ25UcmFuc2FjdGlvbnMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZHM6IGJhc2U2NFRyYW5zYWN0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgfSkpLnNpZ25lZF9wYXlsb2Fkcy5tYXAodG9VaW50OEFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9ucztcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigoZSBpbnN0YW5jZW9mIEVycm9yICYmIGUubWVzc2FnZSkgfHwgJ1Vua25vd24gZXJyb3InKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1TaWduQW5kU2VuZFRyYW5zYWN0aW9uLnNldCh0aGlzLCAodHJhbnNhY3Rpb24sIG9wdGlvbnMpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgYXV0aFRva2VuLCBjaGFpbiB9ID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXNzZXJ0SXNBdXRob3JpemVkLCBcImZcIikuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3RyYW5zYWN0LCBcImZcIikuY2FsbCh0aGlzLCAod2FsbGV0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFtjYXBhYmlsaXRpZXMsIF8xXSA9IHlpZWxkIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhbGxldC5nZXRDYXBhYmlsaXRpZXMoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1SZWF1dGhvcml6YXRpb24sIFwiZlwiKS5jYWxsKHRoaXMsIHdhbGxldCwgYXV0aFRva2VuLCBjaGFpbilcbiAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYXBhYmlsaXRpZXMuc3VwcG9ydHNfc2lnbl9hbmRfc2VuZF90cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NFRyYW5zYWN0aW9uID0gZnJvbVVpbnQ4QXJyYXkodHJhbnNhY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2lnbmF0dXJlcyA9ICh5aWVsZCB3YWxsZXQuc2lnbkFuZFNlbmRUcmFuc2FjdGlvbnMoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKSwgeyBwYXlsb2FkczogW2Jhc2U2NFRyYW5zYWN0aW9uXSB9KSkpLnNpZ25hdHVyZXMubWFwKHRvVWludDhBcnJheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2lnbmF0dXJlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY29ubmVjdGVkIHdhbGxldCBkb2VzIG5vdCBzdXBwb3J0IHNpZ25BbmRTZW5kVHJhbnNhY3Rpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5tZXNzYWdlKSB8fCAnVW5rbm93biBlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbkFuZFNlbmRUcmFuc2FjdGlvbi5zZXQodGhpcywgKC4uLmlucHV0cykgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0cyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpbnB1dCBvZiBpbnB1dHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaWduYXR1cmUgPSB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnbkFuZFNlbmRUcmFuc2FjdGlvbiwgXCJmXCIpLmNhbGwodGhpcywgaW5wdXQudHJhbnNhY3Rpb24sIGlucHV0Lm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIG91dHB1dHMucHVzaCh7IHNpZ25hdHVyZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXRzO1xuICAgICAgICB9KSk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnblRyYW5zYWN0aW9uLnNldCh0aGlzLCAoLi4uaW5wdXRzKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gKHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1TaWduVHJhbnNhY3Rpb25zLCBcImZcIikuY2FsbCh0aGlzLCBpbnB1dHMubWFwKCh7IHRyYW5zYWN0aW9uIH0pID0+IHRyYW5zYWN0aW9uKSkpXG4gICAgICAgICAgICAgICAgLm1hcCgoc2lnbmVkVHJhbnNhY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzaWduZWRUcmFuc2FjdGlvbiB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduTWVzc2FnZS5zZXQodGhpcywgKC4uLmlucHV0cykgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgeyBhdXRoVG9rZW4sIGNoYWluIH0gPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hc3NlcnRJc0F1dGhvcml6ZWQsIFwiZlwiKS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgY29uc3QgYWRkcmVzc2VzID0gaW5wdXRzLm1hcCgoeyBhY2NvdW50IH0pID0+IGZyb21VaW50OEFycmF5KGFjY291bnQucHVibGljS2V5KSk7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGlucHV0cy5tYXAoKHsgbWVzc2FnZSB9KSA9PiBmcm9tVWludDhBcnJheShtZXNzYWdlKSk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF90cmFuc2FjdCwgXCJmXCIpLmNhbGwodGhpcywgKHdhbGxldCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtUmVhdXRob3JpemF0aW9uLCBcImZcIikuY2FsbCh0aGlzLCB3YWxsZXQsIGF1dGhUb2tlbiwgY2hhaW4pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaWduZWRNZXNzYWdlcyA9ICh5aWVsZCB3YWxsZXQuc2lnbk1lc3NhZ2VzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3NlczogYWRkcmVzc2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZHM6IG1lc3NhZ2VzLFxuICAgICAgICAgICAgICAgICAgICB9KSkuc2lnbmVkX3BheWxvYWRzLm1hcCh0b1VpbnQ4QXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2lnbmVkTWVzc2FnZXMubWFwKChzaWduZWRNZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzaWduZWRNZXNzYWdlOiBzaWduZWRNZXNzYWdlLCBzaWduYXR1cmU6IHNpZ25lZE1lc3NhZ2Uuc2xpY2UoLVNJR05BVFVSRV9MRU5HVEhfSU5fQllURVMpIH07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5tZXNzYWdlKSB8fCAnVW5rbm93biBlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbkluLnNldCh0aGlzLCAoLi4uaW5wdXRzKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRzID0gW107XG4gICAgICAgICAgICBpZiAoaW5wdXRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGlucHV0IG9mIGlucHV0cykge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRzLnB1c2goeWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVNpZ25JbiwgXCJmXCIpLmNhbGwodGhpcywgaW5wdXQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW3lpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1TaWduSW4sIFwiZlwiKS5jYWxsKHRoaXMsIGlucHV0c1swXSldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dHM7XG4gICAgICAgIH0pKTtcbiAgICAgICAgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnbkluLnNldCh0aGlzLCAoaW5wdXQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfZiwgX2csIF9oO1xuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGluZywgdHJ1ZSwgXCJmXCIpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdXRob3JpemF0aW9uUmVzdWx0ID0geWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybUF1dGhvcml6YXRpb24sIFwiZlwiKS5jYWxsKHRoaXMsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgaW5wdXQpLCB7IGRvbWFpbjogKF9mID0gaW5wdXQgPT09IG51bGwgfHwgaW5wdXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlucHV0LmRvbWFpbikgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogd2luZG93LmxvY2F0aW9uLmhvc3QgfSkpO1xuICAgICAgICAgICAgICAgIGlmICghYXV0aG9yaXphdGlvblJlc3VsdC5zaWduX2luX3Jlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTaWduIGluIGZhaWxlZCwgbm8gc2lnbiBpbiByZXN1bHQgcmV0dXJuZWQgYnkgd2FsbGV0XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzaWduZWRJbkFkZHJlc3MgPSBhdXRob3JpemF0aW9uUmVzdWx0LnNpZ25faW5fcmVzdWx0LmFkZHJlc3M7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2lnbmVkSW5BY2NvdW50ID0gYXV0aG9yaXphdGlvblJlc3VsdC5hY2NvdW50cy5maW5kKGFjYyA9PiBhY2MuYWRkcmVzcyA9PSBzaWduZWRJbkFkZHJlc3MpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGFjY291bnQ6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgc2lnbmVkSW5BY2NvdW50ICE9PSBudWxsICYmIHNpZ25lZEluQWNjb3VudCAhPT0gdm9pZCAwID8gc2lnbmVkSW5BY2NvdW50IDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzczogYmFzZTU4LmVuY29kZSh0b1VpbnQ4QXJyYXkoc2lnbmVkSW5BZGRyZXNzKSlcbiAgICAgICAgICAgICAgICAgICAgfSksIHsgcHVibGljS2V5OiB0b1VpbnQ4QXJyYXkoc2lnbmVkSW5BZGRyZXNzKSwgY2hhaW5zOiAoX2cgPSBzaWduZWRJbkFjY291bnQgPT09IG51bGwgfHwgc2lnbmVkSW5BY2NvdW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzaWduZWRJbkFjY291bnQuY2hhaW5zKSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jaGFpbnMsIFwiZlwiKSwgZmVhdHVyZXM6IChfaCA9IHNpZ25lZEluQWNjb3VudCA9PT0gbnVsbCB8fCBzaWduZWRJbkFjY291bnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNpZ25lZEluQWNjb3VudC5mZWF0dXJlcykgIT09IG51bGwgJiYgX2ggIT09IHZvaWQgMCA/IF9oIDogYXV0aG9yaXphdGlvblJlc3VsdC5jYXBhYmlsaXRpZXMuZmVhdHVyZXMgfSksXG4gICAgICAgICAgICAgICAgICAgIHNpZ25lZE1lc3NhZ2U6IHRvVWludDhBcnJheShhdXRob3JpemF0aW9uUmVzdWx0LnNpZ25faW5fcmVzdWx0LnNpZ25lZF9tZXNzYWdlKSxcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlOiB0b1VpbnQ4QXJyYXkoYXV0aG9yaXphdGlvblJlc3VsdC5zaWduX2luX3Jlc3VsdC5zaWduYXR1cmUpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5tZXNzYWdlKSB8fCAnVW5rbm93biBlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGluZywgZmFsc2UsIFwiZlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uQ2FjaGUsIGNvbmZpZy5hdXRob3JpemF0aW9uQ2FjaGUsIFwiZlwiKTtcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXBwSWRlbnRpdHksIGNvbmZpZy5hcHBJZGVudGl0eSwgXCJmXCIpO1xuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jaGFpbnMsIGNvbmZpZy5jaGFpbnMsIFwiZlwiKTtcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5TZWxlY3RvciwgY29uZmlnLmNoYWluU2VsZWN0b3IsIFwiZlwiKTtcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb25XYWxsZXROb3RGb3VuZCwgY29uZmlnLm9uV2FsbGV0Tm90Rm91bmQsIFwiZlwiKTtcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb3B0aW9uYWxGZWF0dXJlcywge1xuICAgICAgICAgICAgLy8gSW4gTVdBIDEuMCwgc2lnbkFuZFNlbmQgaXMgb3B0aW9uYWwgYW5kIHNpZ25UcmFuc2FjdGlvbiBpcyBtYW5kYXRvcnkuIFdoZXJlYXMgaW4gTVdBIDIuMCssXG4gICAgICAgICAgICAvLyBzaWduQW5kU2VuZCBpcyBtYW5kYXRvcnkgYW5kIHNpZ25UcmFuc2FjdGlvbiBpcyBvcHRpb25hbCAoYW5kIHNvZnQgZGVwcmVjYXRlZCkuIEFzIG9mIG1pZFxuICAgICAgICAgICAgLy8gMjAyNSwgYWxsIE1XQSB3YWxsZXRzIHN1cHBvcnQgYm90aCBzaWduQW5kU2VuZFRyYW5zYWN0aW9uIGFuZCBzaWduVHJhbnNhY3Rpb24gc28gaXRzIHNhZmVcbiAgICAgICAgICAgIC8vIGFzc3VtZSBib3RoIGFyZSBzdXBwb3J0ZWQgaGVyZS4gVGhlIGZlYXR1cmVzIHdpbGwgYmUgdXBkYXRlZCBiYXNlZCBvbiB0aGUgYWN0dWFsIGNvbm5lY3RlZCBcbiAgICAgICAgICAgIC8vIHdhbGxldHMgY2FwYWJpbGl0aWVzIGR1cmluZyBjb25uZWN0aW9uIHJlZ2FyZGxlc3MsIHNvIHRoaXMgaXMgc2FmZS4gXG4gICAgICAgICAgICBbU29sYW5hU2lnbkFuZFNlbmRUcmFuc2FjdGlvbl06IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgICAgICAgICAgIHN1cHBvcnRlZFRyYW5zYWN0aW9uVmVyc2lvbnM6IFsnbGVnYWN5JywgMF0sXG4gICAgICAgICAgICAgICAgc2lnbkFuZFNlbmRUcmFuc2FjdGlvbjogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbkFuZFNlbmRUcmFuc2FjdGlvbiwgXCJmXCIpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtTb2xhbmFTaWduVHJhbnNhY3Rpb25dOiB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgICAgICAgICAgICBzdXBwb3J0ZWRUcmFuc2FjdGlvblZlcnNpb25zOiBbJ2xlZ2FjeScsIDBdLFxuICAgICAgICAgICAgICAgIHNpZ25UcmFuc2FjdGlvbjogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnblRyYW5zYWN0aW9uLCBcImZcIiksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LCBcImZcIik7XG4gICAgfVxuICAgIGdldCB2ZXJzaW9uKCkge1xuICAgICAgICByZXR1cm4gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdmVyc2lvbiwgXCJmXCIpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X25hbWUsIFwiZlwiKTtcbiAgICB9XG4gICAgZ2V0IHVybCgpIHtcbiAgICAgICAgcmV0dXJuIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3VybCwgXCJmXCIpO1xuICAgIH1cbiAgICBnZXQgaWNvbigpIHtcbiAgICAgICAgcmV0dXJuIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2ljb24sIFwiZlwiKTtcbiAgICB9XG4gICAgZ2V0IGNoYWlucygpIHtcbiAgICAgICAgcmV0dXJuIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2NoYWlucywgXCJmXCIpO1xuICAgIH1cbiAgICBnZXQgZmVhdHVyZXMoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHsgW1N0YW5kYXJkQ29ubmVjdF06IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgICAgICAgICAgIGNvbm5lY3Q6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3QsIFwiZlwiKSxcbiAgICAgICAgICAgIH0sIFtTdGFuZGFyZERpc2Nvbm5lY3RdOiB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgICAgICAgICAgICBkaXNjb25uZWN0OiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9kaXNjb25uZWN0LCBcImZcIiksXG4gICAgICAgICAgICB9LCBbU3RhbmRhcmRFdmVudHNdOiB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgICAgICAgICAgICBvbjogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb24sIFwiZlwiKSxcbiAgICAgICAgICAgIH0sIFtTb2xhbmFTaWduTWVzc2FnZV06IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgICAgICAgICAgIHNpZ25NZXNzYWdlOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduTWVzc2FnZSwgXCJmXCIpLFxuICAgICAgICAgICAgfSwgW1NvbGFuYVNpZ25Jbl06IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgICAgICAgICAgIHNpZ25JbjogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbkluLCBcImZcIiksXG4gICAgICAgICAgICB9IH0sIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29wdGlvbmFsRmVhdHVyZXMsIFwiZlwiKSk7XG4gICAgfVxuICAgIGdldCBhY2NvdW50cygpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmV0dXJuIChfYiA9IChfYSA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIFwiZlwiKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFjY291bnRzKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBbXTtcbiAgICB9XG4gICAgZ2V0IGNvbm5lY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuICEhX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiwgXCJmXCIpO1xuICAgIH1cbiAgICBnZXQgaXNBdXRob3JpemVkKCkge1xuICAgICAgICByZXR1cm4gISFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCBcImZcIik7XG4gICAgfVxuICAgIGdldCBjdXJyZW50QXV0aG9yaXphdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIFwiZlwiKTtcbiAgICB9XG4gICAgZ2V0IGNhY2hlZEF1dGhvcml6YXRpb25SZXN1bHQoKSB7XG4gICAgICAgIHJldHVybiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uQ2FjaGUsIFwiZlwiKS5nZXQoKTtcbiAgICB9XG59XG5fTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2xpc3RlbmVycyA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdmVyc2lvbiA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfbmFtZSA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdXJsID0gbmV3IFdlYWtNYXAoKSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9pY29uID0gbmV3IFdlYWtNYXAoKSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hcHBJZGVudGl0eSA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbkNhY2hlID0gbmV3IFdlYWtNYXAoKSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW5nID0gbmV3IFdlYWtNYXAoKSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW9uR2VuZXJhdGlvbiA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5zID0gbmV3IFdlYWtNYXAoKSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jaGFpblNlbGVjdG9yID0gbmV3IFdlYWtNYXAoKSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vcHRpb25hbEZlYXR1cmVzID0gbmV3IFdlYWtNYXAoKSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vbldhbGxldE5vdEZvdW5kID0gbmV3IFdlYWtNYXAoKSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vbiA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdCA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybUF1dGhvcml6YXRpb24gPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZUF1dGhvcml6YXRpb25SZXN1bHQgPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZVdhbGxldENhcGFiaWxpdGllc1Jlc3VsdCA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVJlYXV0aG9yaXphdGlvbiA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfZGlzY29ubmVjdCA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdHJhbnNhY3QgPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Fzc2VydElzQXV0aG9yaXplZCA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYWNjb3VudHNUb1dhbGxldFN0YW5kYXJkQWNjb3VudHMgPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1TaWduVHJhbnNhY3Rpb25zID0gbmV3IFdlYWtNYXAoKSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnbkFuZFNlbmRUcmFuc2FjdGlvbiA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbkFuZFNlbmRUcmFuc2FjdGlvbiA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnblRyYW5zYWN0aW9uID0gbmV3IFdlYWtNYXAoKSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduTWVzc2FnZSA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbkluID0gbmV3IFdlYWtNYXAoKSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnbkluID0gbmV3IFdlYWtNYXAoKSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9pbnN0YW5jZXMgPSBuZXcgV2Vha1NldCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2VtaXQgPSBmdW5jdGlvbiBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2VtaXQoZXZlbnQsIC4uLmFyZ3MpIHtcbiAgICB2YXIgX2E7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1zcHJlYWRcbiAgICAoX2EgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9saXN0ZW5lcnMsIFwiZlwiKVtldmVudF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIuYXBwbHkobnVsbCwgYXJncykpO1xufSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vZmYgPSBmdW5jdGlvbiBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29mZihldmVudCwgbGlzdGVuZXIpIHtcbiAgICB2YXIgX2E7XG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfbGlzdGVuZXJzLCBcImZcIilbZXZlbnRdID0gKF9hID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfbGlzdGVuZXJzLCBcImZcIilbZXZlbnRdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmlsdGVyKChleGlzdGluZ0xpc3RlbmVyKSA9PiBsaXN0ZW5lciAhPT0gZXhpc3RpbmdMaXN0ZW5lcik7XG59O1xuY2xhc3MgUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldCB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2luc3RhbmNlcy5hZGQodGhpcyk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2xpc3RlbmVycy5zZXQodGhpcywge30pO1xuICAgICAgICBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF92ZXJzaW9uLnNldCh0aGlzLCAnMS4wLjAnKTsgLy8gd2FsbGV0LXN0YW5kYXJkIHZlcnNpb25cbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfbmFtZS5zZXQodGhpcywgU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlclJlbW90ZVdhbGxldE5hbWUpO1xuICAgICAgICBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF91cmwuc2V0KHRoaXMsICdodHRwczovL3NvbGFuYW1vYmlsZS5jb20vd2FsbGV0cycpO1xuICAgICAgICBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9pY29uLnNldCh0aGlzLCBpY29uKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXBwSWRlbnRpdHkuc2V0KHRoaXMsIHZvaWQgMCk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24uc2V0KHRoaXMsIHZvaWQgMCk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb25DYWNoZS5zZXQodGhpcywgdm9pZCAwKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGluZy5zZXQodGhpcywgZmFsc2UpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRXZlcnkgdGltZSB0aGUgY29ubmVjdGlvbiBpcyByZWN5Y2xlZCBpbiBzb21lIHdheSAoZWcuIGBkaXNjb25uZWN0KClgIGlzIGNhbGxlZClcbiAgICAgICAgICogaW5jcmVtZW50IHRoaXMgYW5kIHVzZSBpdCB0byBtYWtlIHN1cmUgdGhhdCBgdHJhbnNhY3RgIGNhbGxzIGZyb20gdGhlIHByZXZpb3VzXG4gICAgICAgICAqICdnZW5lcmF0aW9uJyBkb24ndCBjb250aW51ZSB0byBkbyB3b3JrIGFuZCB0aHJvdyBleGNlcHRpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGlvbkdlbmVyYXRpb24uc2V0KHRoaXMsIDApO1xuICAgICAgICBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jaGFpbnMuc2V0KHRoaXMsIFtdKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5TZWxlY3Rvci5zZXQodGhpcywgdm9pZCAwKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb3B0aW9uYWxGZWF0dXJlcy5zZXQodGhpcywgdm9pZCAwKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb25XYWxsZXROb3RGb3VuZC5zZXQodGhpcywgdm9pZCAwKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaG9zdEF1dGhvcml0eS5zZXQodGhpcywgdm9pZCAwKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2Vzc2lvbi5zZXQodGhpcywgdm9pZCAwKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb24uc2V0KHRoaXMsIChldmVudCwgbGlzdGVuZXIpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICgoX2EgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfbGlzdGVuZXJzLCBcImZcIilbZXZlbnRdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucHVzaChsaXN0ZW5lcikpIHx8IChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfbGlzdGVuZXJzLCBcImZcIilbZXZlbnRdID0gW2xpc3RlbmVyXSk7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2luc3RhbmNlcywgXCJtXCIsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29mZikuY2FsbCh0aGlzLCBldmVudCwgbGlzdGVuZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdC5zZXQodGhpcywgKHsgc2lsZW50IH0gPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW5nLCBcImZcIikgfHwgdGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBhY2NvdW50czogdGhpcy5hY2NvdW50cyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3RpbmcsIHRydWUsIFwiZlwiKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgeWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1BdXRob3JpemF0aW9uLCBcImZcIikuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5tZXNzYWdlKSB8fCAnVW5rbm93biBlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3RpbmcsIGZhbHNlLCBcImZcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBhY2NvdW50czogdGhpcy5hY2NvdW50cyB9O1xuICAgICAgICB9KSk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1BdXRob3JpemF0aW9uLnNldCh0aGlzLCAoc2lnbkluUGF5bG9hZCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZWRBdXRob3JpemF0aW9uUmVzdWx0ID0geWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb25DYWNoZSwgXCJmXCIpLmdldCgpO1xuICAgICAgICAgICAgICAgIGlmIChjYWNoZWRBdXRob3JpemF0aW9uUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IEV2YWx1YXRlIHdoZXRoZXIgdGhlcmUncyBhbnkgdGhyZWF0IHRvIG5vdCBgYXdhaXRpbmdgIHRoaXMgZXhwcmVzc2lvblxuICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaGFuZGxlQXV0aG9yaXphdGlvblJlc3VsdCwgXCJmXCIpLmNhbGwodGhpcywgY2FjaGVkQXV0aG9yaXphdGlvblJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZWRBdXRob3JpemF0aW9uUmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3Nlc3Npb24sIFwiZlwiKSlcbiAgICAgICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3Nlc3Npb24sIHVuZGVmaW5lZCwgXCJmXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkQ2hhaW4gPSB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5TZWxlY3RvciwgXCJmXCIpLnNlbGVjdChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5zLCBcImZcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdHJhbnNhY3QsIFwiZlwiKS5jYWxsKHRoaXMsICh3YWxsZXQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2NhcGFiaWxpdGllcywgbXdhQXV0aG9yaXphdGlvblJlc3VsdF0gPSB5aWVsZCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgICAgICAgICB3YWxsZXQuZ2V0Q2FwYWJpbGl0aWVzKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB3YWxsZXQuYXV0aG9yaXplKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFpbjogc2VsZWN0ZWRDaGFpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGVudGl0eTogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2FwcElkZW50aXR5LCBcImZcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbl9pbl9wYXlsb2FkOiBzaWduSW5QYXlsb2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjY291bnRzID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2FjY291bnRzVG9XYWxsZXRTdGFuZGFyZEFjY291bnRzLCBcImZcIikuY2FsbCh0aGlzLCBtd2FBdXRob3JpemF0aW9uUmVzdWx0LmFjY291bnRzKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXV0aG9yaXphdGlvblJlc3VsdCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbXdhQXV0aG9yaXphdGlvblJlc3VsdCksIHsgYWNjb3VudHMsIGNoYWluOiBzZWxlY3RlZENoYWluLCBjYXBhYmlsaXRpZXM6IGNhcGFiaWxpdGllcyB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogRXZhbHVhdGUgd2hldGhlciB0aGVyZSdzIGFueSB0aHJlYXQgdG8gbm90IGBhd2FpdGluZ2AgdGhpcyBleHByZXNzaW9uXG4gICAgICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9oYW5kbGVXYWxsZXRDYXBhYmlsaXRpZXNSZXN1bHQsIFwiZlwiKS5jYWxsKHRoaXMsIGNhcGFiaWxpdGllcyksXG4gICAgICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbkNhY2hlLCBcImZcIikuc2V0KGF1dGhvcml6YXRpb25SZXN1bHQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZUF1dGhvcml6YXRpb25SZXN1bHQsIFwiZlwiKS5jYWxsKHRoaXMsIGF1dGhvcml6YXRpb25SZXN1bHQpLFxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF1dGhvcml6YXRpb25SZXN1bHQ7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKGUgaW5zdGFuY2VvZiBFcnJvciAmJiBlLm1lc3NhZ2UpIHx8ICdVbmtub3duIGVycm9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaGFuZGxlQXV0aG9yaXphdGlvblJlc3VsdC5zZXQodGhpcywgKGF1dGhvcml6YXRpb24pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGNvbnN0IGRpZFB1YmxpY0tleXNDaGFuZ2UgPSBcbiAgICAgICAgICAgIC8vIENhc2UgMTogV2Ugc3RhcnRlZCBmcm9tIGhhdmluZyBubyBhdXRob3JpemF0aW9uLlxuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIFwiZlwiKSA9PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgLy8gQ2FzZSAyOiBUaGUgbnVtYmVyIG9mIGF1dGhvcml6ZWQgYWNjb3VudHMgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICAoKF9hID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIFwiZlwiKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFjY291bnRzLmxlbmd0aCkgIT09IGF1dGhvcml6YXRpb24uYWNjb3VudHMubGVuZ3RoIHx8XG4gICAgICAgICAgICAgICAgLy8gQ2FzZSAzOiBUaGUgbmV3IGxpc3Qgb2YgYWRkcmVzc2VzIGlzbid0IGV4YWN0bHkgdGhlIHNhbWUgYXMgdGhlIG9sZCBsaXN0LCBpbiB0aGUgc2FtZSBvcmRlci5cbiAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiwgXCJmXCIpLmFjY291bnRzLnNvbWUoKGFjY291bnQsIGlpKSA9PiBhY2NvdW50LmFkZHJlc3MgIT09IGF1dGhvcml6YXRpb24uYWNjb3VudHNbaWldLmFkZHJlc3MpO1xuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIGF1dGhvcml6YXRpb24sIFwiZlwiKTtcbiAgICAgICAgICAgIGlmIChkaWRQdWJsaWNLZXlzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2luc3RhbmNlcywgXCJtXCIsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2VtaXQpLmNhbGwodGhpcywgJ2NoYW5nZScsIHsgYWNjb3VudHM6IHRoaXMuYWNjb3VudHMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaGFuZGxlV2FsbGV0Q2FwYWJpbGl0aWVzUmVzdWx0LnNldCh0aGlzLCAoY2FwYWJpbGl0aWVzKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBpbnZlc3RpZ2F0ZSB3aHkgdXNpbmcgU29sYW5hU2lnblRyYW5zYWN0aW9ucyBjb25zdGFudCBicmVha3MgdHJlZXNoYWtpbmdcbiAgICAgICAgICAgIGNvbnN0IHN1cHBvcnRzU2lnblRyYW5zYWN0aW9uID0gY2FwYWJpbGl0aWVzLmZlYXR1cmVzLmluY2x1ZGVzKCdzb2xhbmE6c2lnblRyYW5zYWN0aW9ucycpOyAvL1NvbGFuYVNpZ25UcmFuc2FjdGlvbnMpO1xuICAgICAgICAgICAgY29uc3Qgc3VwcG9ydHNTaWduQW5kU2VuZFRyYW5zYWN0aW9uID0gY2FwYWJpbGl0aWVzLnN1cHBvcnRzX3NpZ25fYW5kX3NlbmRfdHJhbnNhY3Rpb25zIHx8XG4gICAgICAgICAgICAgICAgY2FwYWJpbGl0aWVzLmZlYXR1cmVzLmluY2x1ZGVzKCdzb2xhbmE6c2lnbkFuZFNlbmRUcmFuc2FjdGlvbicpO1xuICAgICAgICAgICAgY29uc3QgZGlkQ2FwYWJpbGl0aWVzQ2hhbmdlID0gU29sYW5hU2lnbkFuZFNlbmRUcmFuc2FjdGlvbiBpbiB0aGlzLmZlYXR1cmVzICE9PSBzdXBwb3J0c1NpZ25BbmRTZW5kVHJhbnNhY3Rpb24gfHxcbiAgICAgICAgICAgICAgICBTb2xhbmFTaWduVHJhbnNhY3Rpb24gaW4gdGhpcy5mZWF0dXJlcyAhPT0gc3VwcG9ydHNTaWduVHJhbnNhY3Rpb247XG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb3B0aW9uYWxGZWF0dXJlcywgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCAoc3VwcG9ydHNTaWduQW5kU2VuZFRyYW5zYWN0aW9uICYmIHtcbiAgICAgICAgICAgICAgICBbU29sYW5hU2lnbkFuZFNlbmRUcmFuc2FjdGlvbl06IHtcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgICAgICAgICAgICAgICAgc3VwcG9ydGVkVHJhbnNhY3Rpb25WZXJzaW9uczogY2FwYWJpbGl0aWVzLnN1cHBvcnRlZF90cmFuc2FjdGlvbl92ZXJzaW9ucyxcbiAgICAgICAgICAgICAgICAgICAgc2lnbkFuZFNlbmRUcmFuc2FjdGlvbjogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25BbmRTZW5kVHJhbnNhY3Rpb24sIFwiZlwiKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSkpLCAoc3VwcG9ydHNTaWduVHJhbnNhY3Rpb24gJiYge1xuICAgICAgICAgICAgICAgIFtTb2xhbmFTaWduVHJhbnNhY3Rpb25dOiB7XG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZFRyYW5zYWN0aW9uVmVyc2lvbnM6IGNhcGFiaWxpdGllcy5zdXBwb3J0ZWRfdHJhbnNhY3Rpb25fdmVyc2lvbnMsXG4gICAgICAgICAgICAgICAgICAgIHNpZ25UcmFuc2FjdGlvbjogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25UcmFuc2FjdGlvbiwgXCJmXCIpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSksIFwiZlwiKTtcbiAgICAgICAgICAgIGlmIChkaWRDYXBhYmlsaXRpZXNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaW5zdGFuY2VzLCBcIm1cIiwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfZW1pdCkuY2FsbCh0aGlzLCAnY2hhbmdlJywgeyBmZWF0dXJlczogdGhpcy5mZWF0dXJlcyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtUmVhdXRob3JpemF0aW9uLnNldCh0aGlzLCAod2FsbGV0LCBhdXRoVG9rZW4sIGNoYWluKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2IsIF9jO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBbY2FwYWJpbGl0aWVzLCBtd2FBdXRob3JpemF0aW9uUmVzdWx0XSA9IHlpZWxkIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgKF9jID0gKF9iID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIFwiZlwiKSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhcGFiaWxpdGllcykgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogeWllbGQgd2FsbGV0LmdldENhcGFiaWxpdGllcygpLFxuICAgICAgICAgICAgICAgICAgICB3YWxsZXQuYXV0aG9yaXplKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhfdG9rZW46IGF1dGhUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkZW50aXR5OiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXBwSWRlbnRpdHksIFwiZlwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluOiBjaGFpblxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjY291bnRzID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2FjY291bnRzVG9XYWxsZXRTdGFuZGFyZEFjY291bnRzLCBcImZcIikuY2FsbCh0aGlzLCBtd2FBdXRob3JpemF0aW9uUmVzdWx0LmFjY291bnRzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhdXRob3JpemF0aW9uID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBtd2FBdXRob3JpemF0aW9uUmVzdWx0KSwgeyBhY2NvdW50czogYWNjb3VudHMsIGNoYWluOiBjaGFpbiwgY2FwYWJpbGl0aWVzOiBjYXBhYmlsaXRpZXMgfSk7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogRXZhbHVhdGUgd2hldGhlciB0aGVyZSdzIGFueSB0aHJlYXQgdG8gbm90IGBhd2FpdGluZ2AgdGhpcyBleHByZXNzaW9uXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbkNhY2hlLCBcImZcIikuc2V0KGF1dGhvcml6YXRpb24pLFxuICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaGFuZGxlQXV0aG9yaXphdGlvblJlc3VsdCwgXCJmXCIpLmNhbGwodGhpcywgYXV0aG9yaXphdGlvbiksXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9kaXNjb25uZWN0LCBcImZcIikuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKGUgaW5zdGFuY2VvZiBFcnJvciAmJiBlLm1lc3NhZ2UpIHx8ICdVbmtub3duIGVycm9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfZGlzY29ubmVjdC5zZXQodGhpcywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9kO1xuICAgICAgICAgICAgdmFyIF9lO1xuICAgICAgICAgICAgKF9kID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3Nlc3Npb24sIFwiZlwiKSkgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLmNsb3NlKCk7XG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbkNhY2hlLCBcImZcIikuY2xlYXIoKTsgLy8gVE9ETzogRXZhbHVhdGUgd2hldGhlciB0aGVyZSdzIGFueSB0aHJlYXQgdG8gbm90IGBhd2FpdGluZ2AgdGhpcyBleHByZXNzaW9uXG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGluZywgZmFsc2UsIFwiZlwiKTtcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW9uR2VuZXJhdGlvbiwgKF9lID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3Rpb25HZW5lcmF0aW9uLCBcImZcIiksIF9lKyssIF9lKSwgXCJmXCIpO1xuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIHVuZGVmaW5lZCwgXCJmXCIpO1xuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3Nlc3Npb24sIHVuZGVmaW5lZCwgXCJmXCIpO1xuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2luc3RhbmNlcywgXCJtXCIsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2VtaXQpLmNhbGwodGhpcywgJ2NoYW5nZScsIHsgYWNjb3VudHM6IHRoaXMuYWNjb3VudHMgfSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdHJhbnNhY3Quc2V0KHRoaXMsIChjYWxsYmFjaykgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9mO1xuICAgICAgICAgICAgY29uc3Qgd2FsbGV0VXJpQmFzZSA9IChfZiA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCBcImZcIikpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi53YWxsZXRfdXJpX2Jhc2U7XG4gICAgICAgICAgICBjb25zdCBiYXNlQ29uZmlnID0gd2FsbGV0VXJpQmFzZSA/IHsgYmFzZVVyaTogd2FsbGV0VXJpQmFzZSB9IDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3QgcmVtb3RlQ29uZmlnID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBiYXNlQ29uZmlnKSwgeyByZW1vdGVIb3N0QXV0aG9yaXR5OiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaG9zdEF1dGhvcml0eSwgXCJmXCIpIH0pO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudENvbm5lY3Rpb25HZW5lcmF0aW9uID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3Rpb25HZW5lcmF0aW9uLCBcImZcIik7XG4gICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBSZW1vdGVDb25uZWN0aW9uTW9kYWwoKTtcbiAgICAgICAgICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2Vzc2lvbiwgXCJmXCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zZXNzaW9uLCBcImZcIikud2FsbGV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBhc3NvY2lhdGlvblVybCwgY2xvc2UsIHdhbGxldCB9ID0geWllbGQgc3RhcnRSZW1vdGVTY2VuYXJpbyhyZW1vdGVDb25maWcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZUNsb3NlTGlzdGVuZXIgPSBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQpXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG1vZGFsLmluaXRXaXRoUVIoYXNzb2NpYXRpb25VcmwudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zZXNzaW9uLCB7IGNsb3NlLCB3YWxsZXQ6IHlpZWxkIHdhbGxldCB9LCBcImZcIik7XG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2xvc2VMaXN0ZW5lcigpO1xuICAgICAgICAgICAgICAgIG1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkIGNhbGxiYWNrKF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zZXNzaW9uLCBcImZcIikud2FsbGV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3Rpb25HZW5lcmF0aW9uLCBcImZcIikgIT09IGN1cnJlbnRDb25uZWN0aW9uR2VuZXJhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgoKSA9PiB7IH0pOyAvLyBOZXZlciByZXNvbHZlLlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yICYmXG4gICAgICAgICAgICAgICAgICAgIGUubmFtZSA9PT0gJ1NvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJFcnJvcicgJiZcbiAgICAgICAgICAgICAgICAgICAgZS5jb2RlID09PSAnRVJST1JfV0FMTEVUX05PVF9GT1VORCcpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29uV2FsbGV0Tm90Rm91bmQsIFwiZlwiKS5jYWxsKHRoaXMsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Fzc2VydElzQXV0aG9yaXplZC5zZXQodGhpcywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiwgXCJmXCIpKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2FsbGV0IG5vdCBjb25uZWN0ZWQnKTtcbiAgICAgICAgICAgIHJldHVybiB7IGF1dGhUb2tlbjogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIFwiZlwiKS5hdXRoX3Rva2VuLCBjaGFpbjogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIFwiZlwiKS5jaGFpbiB9O1xuICAgICAgICB9KTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYWNjb3VudHNUb1dhbGxldFN0YW5kYXJkQWNjb3VudHMuc2V0KHRoaXMsIChhY2NvdW50cykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGFjY291bnRzLm1hcCgoYWNjb3VudCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICAgICAgY29uc3QgcHVibGljS2V5ID0gdG9VaW50OEFycmF5KGFjY291bnQuYWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzczogYmFzZTU4LmVuY29kZShwdWJsaWNLZXkpLFxuICAgICAgICAgICAgICAgICAgICBwdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBhY2NvdW50LmxhYmVsLFxuICAgICAgICAgICAgICAgICAgICBpY29uOiBhY2NvdW50Lmljb24sXG4gICAgICAgICAgICAgICAgICAgIGNoYWluczogKF9hID0gYWNjb3VudC5jaGFpbnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jaGFpbnMsIFwiZlwiKSxcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogZ2V0IHN1cHBvcnRlZCBmZWF0dXJlcyBmcm9tIGdldENhcGFiaWxpdGllcyBBUEkgXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzOiAoX2IgPSBhY2NvdW50LmZlYXR1cmVzKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBERUZBVUxUX0ZFQVRVUkVTXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVNpZ25UcmFuc2FjdGlvbnMuc2V0KHRoaXMsICh0cmFuc2FjdGlvbnMpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgYXV0aFRva2VuLCBjaGFpbiB9ID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Fzc2VydElzQXV0aG9yaXplZCwgXCJmXCIpLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdHJhbnNhY3QsIFwiZlwiKS5jYWxsKHRoaXMsICh3YWxsZXQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1SZWF1dGhvcml6YXRpb24sIFwiZlwiKS5jYWxsKHRoaXMsIHdhbGxldCwgYXV0aFRva2VuLCBjaGFpbik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9ucyA9ICh5aWVsZCB3YWxsZXQuc2lnblRyYW5zYWN0aW9ucyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkczogdHJhbnNhY3Rpb25zLm1hcChmcm9tVWludDhBcnJheSksXG4gICAgICAgICAgICAgICAgICAgIH0pKS5zaWduZWRfcGF5bG9hZHMubWFwKHRvVWludDhBcnJheSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbnM7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKGUgaW5zdGFuY2VvZiBFcnJvciAmJiBlLm1lc3NhZ2UpIHx8ICdVbmtub3duIGVycm9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVNpZ25BbmRTZW5kVHJhbnNhY3Rpb24uc2V0KHRoaXMsICh0cmFuc2FjdGlvbiwgb3B0aW9ucykgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgeyBhdXRoVG9rZW4sIGNoYWluIH0gPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXNzZXJ0SXNBdXRob3JpemVkLCBcImZcIikuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF90cmFuc2FjdCwgXCJmXCIpLmNhbGwodGhpcywgKHdhbGxldCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbY2FwYWJpbGl0aWVzLCBfMV0gPSB5aWVsZCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgICAgICAgICB3YWxsZXQuZ2V0Q2FwYWJpbGl0aWVzKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVJlYXV0aG9yaXphdGlvbiwgXCJmXCIpLmNhbGwodGhpcywgd2FsbGV0LCBhdXRoVG9rZW4sIGNoYWluKVxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhcGFiaWxpdGllcy5zdXBwb3J0c19zaWduX2FuZF9zZW5kX3RyYW5zYWN0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2lnbmF0dXJlcyA9ICh5aWVsZCB3YWxsZXQuc2lnbkFuZFNlbmRUcmFuc2FjdGlvbnMoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKSwgeyBwYXlsb2FkczogW2Zyb21VaW50OEFycmF5KHRyYW5zYWN0aW9uKV0gfSkpKS5zaWduYXR1cmVzLm1hcCh0b1VpbnQ4QXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNpZ25hdHVyZXNbMF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nvbm5lY3RlZCB3YWxsZXQgZG9lcyBub3Qgc3VwcG9ydCBzaWduQW5kU2VuZFRyYW5zYWN0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigoZSBpbnN0YW5jZW9mIEVycm9yICYmIGUubWVzc2FnZSkgfHwgJ1Vua25vd24gZXJyb3InKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduQW5kU2VuZFRyYW5zYWN0aW9uLnNldCh0aGlzLCAoLi4uaW5wdXRzKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlucHV0IG9mIGlucHV0cykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25hdHVyZSA9ICh5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVNpZ25BbmRTZW5kVHJhbnNhY3Rpb24sIFwiZlwiKS5jYWxsKHRoaXMsIGlucHV0LnRyYW5zYWN0aW9uLCBpbnB1dC5vcHRpb25zKSk7XG4gICAgICAgICAgICAgICAgb3V0cHV0cy5wdXNoKHsgc2lnbmF0dXJlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dHM7XG4gICAgICAgIH0pKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnblRyYW5zYWN0aW9uLnNldCh0aGlzLCAoLi4uaW5wdXRzKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gKHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnblRyYW5zYWN0aW9ucywgXCJmXCIpLmNhbGwodGhpcywgaW5wdXRzLm1hcCgoeyB0cmFuc2FjdGlvbiB9KSA9PiB0cmFuc2FjdGlvbikpKVxuICAgICAgICAgICAgICAgIC5tYXAoKHNpZ25lZFRyYW5zYWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc2lnbmVkVHJhbnNhY3Rpb24gfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25NZXNzYWdlLnNldCh0aGlzLCAoLi4uaW5wdXRzKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCB7IGF1dGhUb2tlbiwgY2hhaW4gfSA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hc3NlcnRJc0F1dGhvcml6ZWQsIFwiZlwiKS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgY29uc3QgYWRkcmVzc2VzID0gaW5wdXRzLm1hcCgoeyBhY2NvdW50IH0pID0+IGZyb21VaW50OEFycmF5KGFjY291bnQucHVibGljS2V5KSk7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGlucHV0cy5tYXAoKHsgbWVzc2FnZSB9KSA9PiBmcm9tVWludDhBcnJheShtZXNzYWdlKSk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdHJhbnNhY3QsIFwiZlwiKS5jYWxsKHRoaXMsICh3YWxsZXQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1SZWF1dGhvcml6YXRpb24sIFwiZlwiKS5jYWxsKHRoaXMsIHdhbGxldCwgYXV0aFRva2VuLCBjaGFpbik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25lZE1lc3NhZ2VzID0gKHlpZWxkIHdhbGxldC5zaWduTWVzc2FnZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzc2VzOiBhZGRyZXNzZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkczogbWVzc2FnZXMsXG4gICAgICAgICAgICAgICAgICAgIH0pKS5zaWduZWRfcGF5bG9hZHMubWFwKHRvVWludDhBcnJheSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzaWduZWRNZXNzYWdlcy5tYXAoKHNpZ25lZE1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHNpZ25lZE1lc3NhZ2U6IHNpZ25lZE1lc3NhZ2UsIHNpZ25hdHVyZTogc2lnbmVkTWVzc2FnZS5zbGljZSgtU0lHTkFUVVJFX0xFTkdUSF9JTl9CWVRFUykgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKGUgaW5zdGFuY2VvZiBFcnJvciAmJiBlLm1lc3NhZ2UpIHx8ICdVbmtub3duIGVycm9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbkluLnNldCh0aGlzLCAoLi4uaW5wdXRzKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRzID0gW107XG4gICAgICAgICAgICBpZiAoaW5wdXRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGlucHV0IG9mIGlucHV0cykge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRzLnB1c2goeWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1TaWduSW4sIFwiZlwiKS5jYWxsKHRoaXMsIGlucHV0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFt5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVNpZ25JbiwgXCJmXCIpLmNhbGwodGhpcywgaW5wdXRzWzBdKV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0cztcbiAgICAgICAgfSkpO1xuICAgICAgICBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnbkluLnNldCh0aGlzLCAoaW5wdXQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfZywgX2gsIF9qO1xuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3RpbmcsIHRydWUsIFwiZlwiKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXV0aG9yaXphdGlvblJlc3VsdCA9IHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtQXV0aG9yaXphdGlvbiwgXCJmXCIpLmNhbGwodGhpcywgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBpbnB1dCksIHsgZG9tYWluOiAoX2cgPSBpbnB1dCA9PT0gbnVsbCB8fCBpbnB1dCA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW5wdXQuZG9tYWluKSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiB3aW5kb3cubG9jYXRpb24uaG9zdCB9KSk7XG4gICAgICAgICAgICAgICAgaWYgKCFhdXRob3JpemF0aW9uUmVzdWx0LnNpZ25faW5fcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNpZ24gaW4gZmFpbGVkLCBubyBzaWduIGluIHJlc3VsdCByZXR1cm5lZCBieSB3YWxsZXRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25lZEluQWRkcmVzcyA9IGF1dGhvcml6YXRpb25SZXN1bHQuc2lnbl9pbl9yZXN1bHQuYWRkcmVzcztcbiAgICAgICAgICAgICAgICBjb25zdCBzaWduZWRJbkFjY291bnQgPSBhdXRob3JpemF0aW9uUmVzdWx0LmFjY291bnRzLmZpbmQoYWNjID0+IGFjYy5hZGRyZXNzID09IHNpZ25lZEluQWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudDogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzaWduZWRJbkFjY291bnQgIT09IG51bGwgJiYgc2lnbmVkSW5BY2NvdW50ICE9PSB2b2lkIDAgPyBzaWduZWRJbkFjY291bnQgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiBiYXNlNTguZW5jb2RlKHRvVWludDhBcnJheShzaWduZWRJbkFkZHJlc3MpKVxuICAgICAgICAgICAgICAgICAgICB9KSwgeyBwdWJsaWNLZXk6IHRvVWludDhBcnJheShzaWduZWRJbkFkZHJlc3MpLCBjaGFpbnM6IChfaCA9IHNpZ25lZEluQWNjb3VudCA9PT0gbnVsbCB8fCBzaWduZWRJbkFjY291bnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNpZ25lZEluQWNjb3VudC5jaGFpbnMpICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jaGFpbnMsIFwiZlwiKSwgZmVhdHVyZXM6IChfaiA9IHNpZ25lZEluQWNjb3VudCA9PT0gbnVsbCB8fCBzaWduZWRJbkFjY291bnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNpZ25lZEluQWNjb3VudC5mZWF0dXJlcykgIT09IG51bGwgJiYgX2ogIT09IHZvaWQgMCA/IF9qIDogYXV0aG9yaXphdGlvblJlc3VsdC5jYXBhYmlsaXRpZXMuZmVhdHVyZXMgfSksXG4gICAgICAgICAgICAgICAgICAgIHNpZ25lZE1lc3NhZ2U6IHRvVWludDhBcnJheShhdXRob3JpemF0aW9uUmVzdWx0LnNpZ25faW5fcmVzdWx0LnNpZ25lZF9tZXNzYWdlKSxcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlOiB0b1VpbnQ4QXJyYXkoYXV0aG9yaXphdGlvblJlc3VsdC5zaWduX2luX3Jlc3VsdC5zaWduYXR1cmUpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5tZXNzYWdlKSB8fCAnVW5rbm93biBlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3RpbmcsIGZhbHNlLCBcImZcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb25DYWNoZSwgY29uZmlnLmF1dGhvcml6YXRpb25DYWNoZSwgXCJmXCIpO1xuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXBwSWRlbnRpdHksIGNvbmZpZy5hcHBJZGVudGl0eSwgXCJmXCIpO1xuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5zLCBjb25maWcuY2hhaW5zLCBcImZcIik7XG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jaGFpblNlbGVjdG9yLCBjb25maWcuY2hhaW5TZWxlY3RvciwgXCJmXCIpO1xuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaG9zdEF1dGhvcml0eSwgY29uZmlnLnJlbW90ZUhvc3RBdXRob3JpdHksIFwiZlwiKTtcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29uV2FsbGV0Tm90Rm91bmQsIGNvbmZpZy5vbldhbGxldE5vdEZvdW5kLCBcImZcIik7XG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vcHRpb25hbEZlYXR1cmVzLCB7XG4gICAgICAgICAgICAvLyBJbiBNV0EgMS4wLCBzaWduQW5kU2VuZCBpcyBvcHRpb25hbCBhbmQgc2lnblRyYW5zYWN0aW9uIGlzIG1hbmRhdG9yeS4gV2hlcmVhcyBpbiBNV0EgMi4wKyxcbiAgICAgICAgICAgIC8vIHNpZ25BbmRTZW5kIGlzIG1hbmRhdG9yeSBhbmQgc2lnblRyYW5zYWN0aW9uIGlzIG9wdGlvbmFsIChhbmQgc29mdCBkZXByZWNhdGVkKS4gQXMgb2YgbWlkXG4gICAgICAgICAgICAvLyAyMDI1LCBhbGwgTVdBIHdhbGxldHMgc3VwcG9ydCBib3RoIHNpZ25BbmRTZW5kVHJhbnNhY3Rpb24gYW5kIHNpZ25UcmFuc2FjdGlvbiBzbyBpdHMgc2FmZVxuICAgICAgICAgICAgLy8gYXNzdW1lIGJvdGggYXJlIHN1cHBvcnRlZCBoZXJlLiBUaGUgZmVhdHVyZXMgd2lsbCBiZSB1cGRhdGVkIGJhc2VkIG9uIHRoZSBhY3R1YWwgY29ubmVjdGVkIFxuICAgICAgICAgICAgLy8gd2FsbGV0cyBjYXBhYmlsaXRpZXMgZHVyaW5nIGNvbm5lY3Rpb24gcmVnYXJkbGVzcywgc28gdGhpcyBpcyBzYWZlLiBcbiAgICAgICAgICAgIFtTb2xhbmFTaWduQW5kU2VuZFRyYW5zYWN0aW9uXToge1xuICAgICAgICAgICAgICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgICAgICAgICAgICAgc3VwcG9ydGVkVHJhbnNhY3Rpb25WZXJzaW9uczogWydsZWdhY3knLCAwXSxcbiAgICAgICAgICAgICAgICBzaWduQW5kU2VuZFRyYW5zYWN0aW9uOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbkFuZFNlbmRUcmFuc2FjdGlvbiwgXCJmXCIpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtTb2xhbmFTaWduVHJhbnNhY3Rpb25dOiB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgICAgICAgICAgICBzdXBwb3J0ZWRUcmFuc2FjdGlvblZlcnNpb25zOiBbJ2xlZ2FjeScsIDBdLFxuICAgICAgICAgICAgICAgIHNpZ25UcmFuc2FjdGlvbjogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25UcmFuc2FjdGlvbiwgXCJmXCIpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSwgXCJmXCIpO1xuICAgIH1cbiAgICBnZXQgdmVyc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF92ZXJzaW9uLCBcImZcIik7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X25hbWUsIFwiZlwiKTtcbiAgICB9XG4gICAgZ2V0IHVybCgpIHtcbiAgICAgICAgcmV0dXJuIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF91cmwsIFwiZlwiKTtcbiAgICB9XG4gICAgZ2V0IGljb24oKSB7XG4gICAgICAgIHJldHVybiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaWNvbiwgXCJmXCIpO1xuICAgIH1cbiAgICBnZXQgY2hhaW5zKCkge1xuICAgICAgICByZXR1cm4gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2NoYWlucywgXCJmXCIpO1xuICAgIH1cbiAgICBnZXQgZmVhdHVyZXMoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHsgW1N0YW5kYXJkQ29ubmVjdF06IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgICAgICAgICAgIGNvbm5lY3Q6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0LCBcImZcIiksXG4gICAgICAgICAgICB9LCBbU3RhbmRhcmREaXNjb25uZWN0XToge1xuICAgICAgICAgICAgICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgICAgICAgICAgICAgZGlzY29ubmVjdDogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Rpc2Nvbm5lY3QsIFwiZlwiKSxcbiAgICAgICAgICAgIH0sIFtTdGFuZGFyZEV2ZW50c106IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgICAgICAgICAgIG9uOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb24sIFwiZlwiKSxcbiAgICAgICAgICAgIH0sIFtTb2xhbmFTaWduTWVzc2FnZV06IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgICAgICAgICAgIHNpZ25NZXNzYWdlOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbk1lc3NhZ2UsIFwiZlwiKSxcbiAgICAgICAgICAgIH0sIFtTb2xhbmFTaWduSW5dOiB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgICAgICAgICAgICBzaWduSW46IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduSW4sIFwiZlwiKSxcbiAgICAgICAgICAgIH0gfSwgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29wdGlvbmFsRmVhdHVyZXMsIFwiZlwiKSk7XG4gICAgfVxuICAgIGdldCBhY2NvdW50cygpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmV0dXJuIChfYiA9IChfYSA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCBcImZcIikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hY2NvdW50cykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogW107XG4gICAgfVxuICAgIGdldCBjb25uZWN0ZWQoKSB7XG4gICAgICAgIHJldHVybiAhIV9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zZXNzaW9uLCBcImZcIikgJiYgISFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiwgXCJmXCIpO1xuICAgIH1cbiAgICBnZXQgaXNBdXRob3JpemVkKCkge1xuICAgICAgICByZXR1cm4gISFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiwgXCJmXCIpO1xuICAgIH1cbiAgICBnZXQgY3VycmVudEF1dGhvcml6YXRpb24oKSB7XG4gICAgICAgIHJldHVybiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiwgXCJmXCIpO1xuICAgIH1cbiAgICBnZXQgY2FjaGVkQXV0aG9yaXphdGlvblJlc3VsdCgpIHtcbiAgICAgICAgcmV0dXJuIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uQ2FjaGUsIFwiZlwiKS5nZXQoKTtcbiAgICB9XG59XG5fUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9saXN0ZW5lcnMgPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF92ZXJzaW9uID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfbmFtZSA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3VybCA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2ljb24gPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hcHBJZGVudGl0eSA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24gPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uQ2FjaGUgPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW5nID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGlvbkdlbmVyYXRpb24gPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jaGFpbnMgPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jaGFpblNlbGVjdG9yID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb3B0aW9uYWxGZWF0dXJlcyA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29uV2FsbGV0Tm90Rm91bmQgPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9ob3N0QXV0aG9yaXR5ID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2Vzc2lvbiA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29uID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdCA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1BdXRob3JpemF0aW9uID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaGFuZGxlQXV0aG9yaXphdGlvblJlc3VsdCA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZVdhbGxldENhcGFiaWxpdGllc1Jlc3VsdCA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1SZWF1dGhvcml6YXRpb24gPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9kaXNjb25uZWN0ID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdHJhbnNhY3QgPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hc3NlcnRJc0F1dGhvcml6ZWQgPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hY2NvdW50c1RvV2FsbGV0U3RhbmRhcmRBY2NvdW50cyA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1TaWduVHJhbnNhY3Rpb25zID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVNpZ25BbmRTZW5kVHJhbnNhY3Rpb24gPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduQW5kU2VuZFRyYW5zYWN0aW9uID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnblRyYW5zYWN0aW9uID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbk1lc3NhZ2UgPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduSW4gPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnbkluID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaW5zdGFuY2VzID0gbmV3IFdlYWtTZXQoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfZW1pdCA9IGZ1bmN0aW9uIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2VtaXQoZXZlbnQsIC4uLmFyZ3MpIHtcbiAgICB2YXIgX2E7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1zcHJlYWRcbiAgICAoX2EgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfbGlzdGVuZXJzLCBcImZcIilbZXZlbnRdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yRWFjaCgobGlzdGVuZXIpID0+IGxpc3RlbmVyLmFwcGx5KG51bGwsIGFyZ3MpKTtcbn0sIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29mZiA9IGZ1bmN0aW9uIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29mZihldmVudCwgbGlzdGVuZXIpIHtcbiAgICB2YXIgX2E7XG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2xpc3RlbmVycywgXCJmXCIpW2V2ZW50XSA9IChfYSA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9saXN0ZW5lcnMsIFwiZlwiKVtldmVudF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maWx0ZXIoKGV4aXN0aW5nTGlzdGVuZXIpID0+IGxpc3RlbmVyICE9PSBleGlzdGluZ0xpc3RlbmVyKTtcbn07XG5cbnZhciBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0ID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19jbGFzc1ByaXZhdGVGaWVsZFNldCkgfHwgZnVuY3Rpb24gKHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XG59O1xudmFyIF9fY2xhc3NQcml2YXRlRmllbGRHZXQgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KSB8fCBmdW5jdGlvbiAocmVjZWl2ZXIsIHN0YXRlLCBraW5kLCBmKSB7XG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xuICAgIHJldHVybiBraW5kID09PSBcIm1cIiA/IGYgOiBraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlcikgOiBmID8gZi52YWx1ZSA6IHN0YXRlLmdldChyZWNlaXZlcik7XG59O1xudmFyIF9SZWdpc3RlcldhbGxldEV2ZW50X2RldGFpbDtcbi8qKlxuICogUmVnaXN0ZXIgYSB7QGxpbmsgXCJAd2FsbGV0LXN0YW5kYXJkL2Jhc2VcIi5XYWxsZXR9IGFzIGEgU3RhbmRhcmQgV2FsbGV0IHdpdGggdGhlIGFwcC5cbiAqXG4gKiBUaGlzIGRpc3BhdGNoZXMgYSB7QGxpbmsgXCJAd2FsbGV0LXN0YW5kYXJkL2Jhc2VcIi5XaW5kb3dSZWdpc3RlcldhbGxldEV2ZW50fSB0byBub3RpZnkgdGhlIGFwcCB0aGF0IHRoZSBXYWxsZXQgaXNcbiAqIHJlYWR5IHRvIGJlIHJlZ2lzdGVyZWQuXG4gKlxuICogVGhpcyBhbHNvIGFkZHMgYSBsaXN0ZW5lciBmb3Ige0BsaW5rIFwiQHdhbGxldC1zdGFuZGFyZC9iYXNlXCIuV2luZG93QXBwUmVhZHlFdmVudH0gdG8gbGlzdGVuIGZvciBhIG5vdGlmaWNhdGlvbiBmcm9tXG4gKiB0aGUgYXBwIHRoYXQgdGhlIGFwcCBpcyByZWFkeSB0byByZWdpc3RlciB0aGUgV2FsbGV0LlxuICpcbiAqIFRoaXMgY29tYmluYXRpb24gb2YgZXZlbnQgZGlzcGF0Y2ggYW5kIGxpc3RlbmVyIGd1YXJhbnRlZXMgdGhhdCB0aGUgV2FsbGV0IHdpbGwgYmUgcmVnaXN0ZXJlZCBzeW5jaHJvbm91c2x5IGFzIHNvb25cbiAqIGFzIHRoZSBhcHAgaXMgcmVhZHkgd2hldGhlciB0aGUgV2FsbGV0IGxvYWRzIGJlZm9yZSBvciBhZnRlciB0aGUgYXBwLlxuICpcbiAqIEBwYXJhbSB3YWxsZXQgV2FsbGV0IHRvIHJlZ2lzdGVyLlxuICpcbiAqIEBncm91cCBXYWxsZXRcbiAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJXYWxsZXQod2FsbGV0KSB7XG4gICAgY29uc3QgY2FsbGJhY2sgPSAoeyByZWdpc3RlciB9KSA9PiByZWdpc3Rlcih3YWxsZXQpO1xuICAgIHRyeSB7XG4gICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBSZWdpc3RlcldhbGxldEV2ZW50KGNhbGxiYWNrKSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCd3YWxsZXQtc3RhbmRhcmQ6cmVnaXN0ZXItd2FsbGV0IGV2ZW50IGNvdWxkIG5vdCBiZSBkaXNwYXRjaGVkXFxuJywgZXJyb3IpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignd2FsbGV0LXN0YW5kYXJkOmFwcC1yZWFkeScsICh7IGRldGFpbDogYXBpIH0pID0+IGNhbGxiYWNrKGFwaSkpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignd2FsbGV0LXN0YW5kYXJkOmFwcC1yZWFkeSBldmVudCBsaXN0ZW5lciBjb3VsZCBub3QgYmUgYWRkZWRcXG4nLCBlcnJvcik7XG4gICAgfVxufVxuY2xhc3MgUmVnaXN0ZXJXYWxsZXRFdmVudCBleHRlbmRzIEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihjYWxsYmFjaykge1xuICAgICAgICBzdXBlcignd2FsbGV0LXN0YW5kYXJkOnJlZ2lzdGVyLXdhbGxldCcsIHtcbiAgICAgICAgICAgIGJ1YmJsZXM6IGZhbHNlLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBjb21wb3NlZDogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgICBfUmVnaXN0ZXJXYWxsZXRFdmVudF9kZXRhaWwuc2V0KHRoaXMsIHZvaWQgMCk7XG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX1JlZ2lzdGVyV2FsbGV0RXZlbnRfZGV0YWlsLCBjYWxsYmFjaywgXCJmXCIpO1xuICAgIH1cbiAgICBnZXQgZGV0YWlsKCkge1xuICAgICAgICByZXR1cm4gX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfUmVnaXN0ZXJXYWxsZXRFdmVudF9kZXRhaWwsIFwiZlwiKTtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiAnd2FsbGV0LXN0YW5kYXJkOnJlZ2lzdGVyLXdhbGxldCc7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCAqL1xuICAgIHByZXZlbnREZWZhdWx0KCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3ByZXZlbnREZWZhdWx0IGNhbm5vdCBiZSBjYWxsZWQnKTtcbiAgICB9XG4gICAgLyoqIEBkZXByZWNhdGVkICovXG4gICAgc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiBjYW5ub3QgYmUgY2FsbGVkJyk7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCAqL1xuICAgIHN0b3BQcm9wYWdhdGlvbigpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdG9wUHJvcGFnYXRpb24gY2Fubm90IGJlIGNhbGxlZCcpO1xuICAgIH1cbn1cbl9SZWdpc3RlcldhbGxldEV2ZW50X2RldGFpbCA9IG5ldyBXZWFrTWFwKCk7XG5cbih1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fY2xhc3NQcml2YXRlRmllbGRTZXQpIHx8IGZ1bmN0aW9uIChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xufTtcbih1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fY2xhc3NQcml2YXRlRmllbGRHZXQpIHx8IGZ1bmN0aW9uIChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcbn07XG5cbmZ1bmN0aW9uIGdldElzTG9jYWxBc3NvY2lhdGlvblN1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHdpbmRvdy5pc1NlY3VyZUNvbnRleHQgJiZcbiAgICAgICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAvYW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpO1xufVxuZnVuY3Rpb24gZ2V0SXNSZW1vdGVBc3NvY2lhdGlvblN1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHdpbmRvdy5pc1NlY3VyZUNvbnRleHQgJiZcbiAgICAgICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAhL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKTtcbn1cbi8vIFNvdXJjZTogaHR0cHM6Ly9naXRodWIuY29tL2FuemEteHl6L3dhbGxldC1hZGFwdGVyL2Jsb2IvbWFzdGVyL3BhY2thZ2VzL2NvcmUvcmVhY3Qvc3JjL2dldEVudmlyb25tZW50LnRzI0wxNFxuLy8gVGhpcyBpcyB0aGUgc2FtZSBpbXBsZW1lbnRhdGlvbiB0aGF0IGdhdGVkIE1XQSBpbiB0aGUgQW56YSB3YWxsZXQtYWRhcHRlci1yZWFjdCBsaWJyYXJ5LlxuZnVuY3Rpb24gaXNXZWJWaWV3KHVzZXJBZ2VudFN0cmluZykge1xuICAgIHJldHVybiAvKFdlYlZpZXd8VmVyc2lvblxcLy4rKENocm9tZSlcXC8oXFxkKylcXC4oXFxkKylcXC4oXFxkKylcXC4oXFxkKyl8OyB3dlxcKS4rKENocm9tZSlcXC8oXFxkKylcXC4oXFxkKylcXC4oXFxkKylcXC4oXFxkKykpL2kudGVzdCh1c2VyQWdlbnRTdHJpbmcpO1xufVxuXG5mdW5jdGlvbiByZWdpc3Rlck13YShjb25maWcpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBNV0Egbm90IHJlZ2lzdGVyZWQ6IG5vIHdpbmRvdyBvYmplY3RgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXdpbmRvdy5pc1NlY3VyZUNvbnRleHQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBNV0Egbm90IHJlZ2lzdGVyZWQ6IHNlY3VyZSBjb250ZXh0IHJlcXVpcmVkIChodHRwcylgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBMb2NhbCBhc3NvY2lhdGlvbiB0ZWNobmljYWxseSBpcyBwb3NzaWJsZSBpbiBhIHdlYnZpZXcsIGJ1dCB3ZSBwcmV2ZW50IHJlZ2lzdHJhdGlvblxuICAgIC8vIGJ5IGRlZmF1bHQgYmVjYXVzZSBpdCB1c3VhbGx5IGZhaWxzIGluIHRoZSBtb3N0IGNvbW1vbiBjYXNlcyAoZS5nIHdhbGxldCBicm93c2VycykuXG4gICAgaWYgKGdldElzTG9jYWxBc3NvY2lhdGlvblN1cHBvcnRlZCgpICYmICFpc1dlYlZpZXcobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgICAgcmVnaXN0ZXJXYWxsZXQobmV3IExvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldChjb25maWcpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZ2V0SXNSZW1vdGVBc3NvY2lhdGlvblN1cHBvcnRlZCgpICYmIGNvbmZpZy5yZW1vdGVIb3N0QXV0aG9yaXR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmVnaXN0ZXJXYWxsZXQobmV3IFJlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb25maWcpLCB7IHJlbW90ZUhvc3RBdXRob3JpdHk6IGNvbmZpZy5yZW1vdGVIb3N0QXV0aG9yaXR5IH0pKSk7XG4gICAgfVxuICAgIGVsc2UgO1xufVxuXG5jb25zdCBXQUxMRVRfTk9UX0ZPVU5EX0VSUk9SX01FU1NBR0UgPSAnVG8gdXNlIG1vYmlsZSB3YWxsZXQgYWRhcHRlciwgeW91IG11c3QgaGF2ZSBhIGNvbXBhdGlibGUgbW9iaWxlIHdhbGxldCBhcHBsaWNhdGlvbiBpbnN0YWxsZWQgb24geW91ciBkZXZpY2UuJztcbmNvbnN0IEJST1dTRVJfTk9UX1NVUFBPUlRFRF9FUlJPUl9NRVNTQUdFID0gJ1RoaXMgYnJvd3NlciBhcHBlYXJzIHRvIGJlIGluY29tcGF0aWJsZSB3aXRoIG1vYmlsZSB3YWxsZXQgYWRhcHRlci4gT3BlbiB0aGlzIHBhZ2UgaW4gYSBjb21wYXRpYmxlIG1vYmlsZSBicm93c2VyIGFwcCBhbmQgdHJ5IGFnYWluLic7XG5jbGFzcyBFcnJvck1vZGFsIGV4dGVuZHMgRW1iZWRkZWRNb2RhbCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuY29udGVudFN0eWxlcyA9IGNzcztcbiAgICAgICAgdGhpcy5jb250ZW50SHRtbCA9IEVycm9yRGlhbG9nSHRtbDtcbiAgICB9XG4gICAgaW5pdFdpdGhFcnJvcihlcnJvcikge1xuICAgICAgICBzdXBlci5pbml0KCk7XG4gICAgICAgIHRoaXMucG9wdWxhdGVFcnJvcihlcnJvcik7XG4gICAgfVxuICAgIHBvcHVsYXRlRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IChfYSA9IHRoaXMuZG9tKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0RWxlbWVudEJ5SWQoJ21vYmlsZS13YWxsZXQtYWRhcHRlci1lcnJvci1tZXNzYWdlJyk7XG4gICAgICAgIGNvbnN0IGFjdGlvbkJ0biA9IChfYiA9IHRoaXMuZG9tKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZ2V0RWxlbWVudEJ5SWQoJ21vYmlsZS13YWxsZXQtYWRhcHRlci1lcnJvci1hY3Rpb24nKTtcbiAgICAgICAgaWYgKGVycm9yTWVzc2FnZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlckVycm9yJykge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZXJyb3IuY29kZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdFUlJPUl9XQUxMRVRfTk9UX0ZPVU5EJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuaW5uZXJIVE1MID0gV0FMTEVUX05PVF9GT1VORF9FUlJPUl9NRVNTQUdFO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbkJ0bilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ2h0dHBzOi8vc29sYW5hbW9iaWxlLmNvbS93YWxsZXRzJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnRVJST1JfQlJPV1NFUl9OT1RfU1VQUE9SVEVEJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuaW5uZXJIVE1MID0gQlJPV1NFUl9OT1RfU1VQUE9SVEVEX0VSUk9SX01FU1NBR0U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aW9uQnRuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkJ0bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuaW5uZXJIVE1MID0gYEFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQ6ICR7ZXJyb3IubWVzc2FnZX1gO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBsb2NhdGUgZXJyb3IgZGlhbG9nIGVsZW1lbnQnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNvbnN0IEVycm9yRGlhbG9nSHRtbCA9IGBcbjxzdmcgY2xhc3M9XCJtb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtZXJyb3ItaWNvblwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBoZWlnaHQ9XCI1MHB4XCIgdmlld0JveD1cIjAgLTk2MCA5NjAgOTYwXCIgd2lkdGg9XCI1MHB4XCIgZmlsbD1cIiMwMDAwMDBcIj48cGF0aCBkPVwiTSAyODAsLTgwIFEgMTk3LC04MCAxMzguNSwtMTM4LjUgODAsLTE5NyA4MCwtMjgwIDgwLC0zNjMgMTM4LjUsLTQyMS41IDE5NywtNDgwIDI4MCwtNDgwIHEgODMsMCAxNDEuNSw1OC41IDU4LjUsNTguNSA1OC41LDE0MS41IDAsODMgLTU4LjUsMTQxLjUgUSAzNjMsLTgwIDI4MCwtODAgWiBNIDgyNCwtMTIwIDU2OCwtMzc2IFEgNTU2LC0zODkgNTQyLjUsLTQwMi41IDUyOSwtNDE2IDUxNiwtNDI4IHEgMzgsLTI0IDYxLC02NCAyMywtNDAgMjMsLTg4IDAsLTc1IC01Mi41LC0xMjcuNSBRIDQ5NSwtNzYwIDQyMCwtNzYwIDM0NSwtNzYwIDI5Mi41LC03MDcuNSAyNDAsLTY1NSAyNDAsLTU4MCBxIDAsNiAwLjUsMTEuNSAwLjUsNS41IDEuNSwxMS41IC0xOCwyIC0zOS41LDggLTIxLjUsNiAtMzguNSwxNCAtMiwtMTEgLTMsLTIyIC0xLC0xMSAtMSwtMjMgMCwtMTA5IDc1LjUsLTE4NC41IFEgMzExLC04NDAgNDIwLC04NDAgcSAxMDksMCAxODQuNSw3NS41IDc1LjUsNzUuNSA3NS41LDE4NC41IDAsNDMgLTEzLjUsODEuNSBRIDY1MywtNDYwIDYyOSwtNDI4IGwgMjUxLDI1MiB6IG0gLTYxNSwtNjEgNzEsLTcxIDcwLDcxIDI5LC0yOCAtNzEsLTcxIDcxLC03MSAtMjgsLTI4IC03MSw3MSAtNzEsLTcxIC0yOCwyOCA3MSw3MSAtNzEsNzEgelwiLz48L3N2Zz5cbjxkaXYgY2xhc3M9XCJtb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtdGl0bGVcIj5XZSBjYW4ndCBmaW5kIGEgd2FsbGV0LjwvZGl2PlxuPGRpdiBpZD1cIm1vYmlsZS13YWxsZXQtYWRhcHRlci1lcnJvci1tZXNzYWdlXCIgY2xhc3M9XCJtb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtc3VidGl0bGVcIj48L2Rpdj5cbjxkaXY+XG4gICAgPGJ1dHRvbiBkYXRhLWVycm9yLWFjdGlvbiBpZD1cIm1vYmlsZS13YWxsZXQtYWRhcHRlci1lcnJvci1hY3Rpb25cIiBjbGFzcz1cIm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1lcnJvci1hY3Rpb25cIj5cbiAgICAgICAgRmluZCBhIHdhbGxldFxuICAgIDwvYnV0dG9uPlxuPC9kaXY+XG5gO1xuY29uc3QgY3NzID0gYFxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1jb250ZW50IHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtZXJyb3ItaWNvbiB7XG4gICAgbWFyZ2luLXRvcDogMjRweDtcbn1cblxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC10aXRsZSB7XG4gICAgbWFyZ2luOiAxOHB4IDEwMHB4IGF1dG8gMTAwcHg7XG4gICAgY29sb3I6ICMwMDAwMDA7XG4gICAgZm9udC1zaXplOiAyLjc1ZW07XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbn1cblxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1zdWJ0aXRsZSB7XG4gICAgbWFyZ2luOiAzMHB4IDYwcHggNDBweCA2MHB4O1xuICAgIGNvbG9yOiAjMDAwMDAwO1xuICAgIGZvbnQtc2l6ZTogMS4yNWVtO1xuICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG59XG5cbi5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtZXJyb3ItYWN0aW9uIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDU2cHg7XG4gICAgLyptYXJnaW4tdG9wOiA0MHB4OyovXG4gICAgZm9udC1zaXplOiAxLjI1ZW07XG4gICAgLypsaW5lLWhlaWdodDogMjRweDsqL1xuICAgIC8qbGV0dGVyLXNwYWNpbmc6IC0xJTsqL1xuICAgIGJhY2tncm91bmQ6ICMwMDAwMDA7XG4gICAgY29sb3I6ICNGRkZGRkY7XG4gICAgYm9yZGVyLXJhZGl1czogMThweDtcbn1cblxuLyogU21hbGxlciBzY3JlZW5zICovXG5AbWVkaWEgYWxsIGFuZCAobWF4LXdpZHRoOiA2MDBweCkge1xuICAgIC5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtdGl0bGUge1xuICAgICAgICBmb250LXNpemU6IDEuNWVtO1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDEycHg7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAxMnB4O1xuICAgIH1cbiAgICAubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXN1YnRpdGxlIHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMnB4O1xuICAgICAgICBtYXJnaW4tbGVmdDogMTJweDtcbiAgICB9XG59XG5gO1xuXG5mdW5jdGlvbiBkZWZhdWx0RXJyb3JNb2RhbFdhbGxldE5vdEZvdW5kSGFuZGxlcigpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJBZ2VudCA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBjb25zdCBlcnJvckRpYWxvZyA9IG5ldyBFcnJvck1vZGFsKCk7XG4gICAgICAgICAgICBpZiAodXNlckFnZW50LmluY2x1ZGVzKCd3dicpKSB7IC8vIEFuZHJvaWQgV2ViVmlld1xuICAgICAgICAgICAgICAgIC8vIE1XQSBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlciBzbyB3ZSBpbmZvcm0gdGhlIHVzZXJcbiAgICAgICAgICAgICAgICAvLyBlcnJvckRpYWxvZy5pbml0V2l0aEVycm9yKFxuICAgICAgICAgICAgICAgIC8vICAgICBuZXcgU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlckVycm9yKFxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlckVycm9yQ29kZS5FUlJPUl9CUk9XU0VSX05PVF9TVVBQT1JURUQsIFxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgJydcbiAgICAgICAgICAgICAgICAvLyAgICAgKVxuICAgICAgICAgICAgICAgIC8vICk7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogaW52ZXN0aWdhdGUgd2h5IGluc3RhbnRpYXRpbmcgYSBuZXcgU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlckVycm9yIGhlcmUgYnJlYWtzIHRyZWVzaGFraW5nIFxuICAgICAgICAgICAgICAgIGVycm9yRGlhbG9nLmluaXRXaXRoRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlckVycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgY29kZTogJ0VSUk9SX0JST1dTRVJfTk9UX1NVUFBPUlRFRCcsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICcnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHsgLy8gQnJvd3NlciwgdXNlciBkb2VzIG5vdCBoYXZlIGEgd2FsbGV0IGluc3RhbGxlZC5cbiAgICAgICAgICAgICAgICAvLyBlcnJvckRpYWxvZy5pbml0V2l0aEVycm9yKFxuICAgICAgICAgICAgICAgIC8vICAgICBuZXcgU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlckVycm9yKFxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlckVycm9yQ29kZS5FUlJPUl9XQUxMRVRfTk9UX0ZPVU5ELCBcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICcnXG4gICAgICAgICAgICAgICAgLy8gICAgIClcbiAgICAgICAgICAgICAgICAvLyApO1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IGludmVzdGlnYXRlIHdoeSBpbnN0YW50aWF0aW5nIGEgbmV3IFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJFcnJvciBoZXJlIGJyZWFrcyB0cmVlc2hha2luZyBcbiAgICAgICAgICAgICAgICBlcnJvckRpYWxvZy5pbml0V2l0aEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1NvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJFcnJvcicsXG4gICAgICAgICAgICAgICAgICAgIGNvZGU6ICdFUlJPUl9XQUxMRVRfTk9UX0ZPVU5EJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVycm9yRGlhbG9nLm9wZW4oKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlRGVmYXVsdFdhbGxldE5vdEZvdW5kSGFuZGxlcigpIHtcbiAgICByZXR1cm4gKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgeyBkZWZhdWx0RXJyb3JNb2RhbFdhbGxldE5vdEZvdW5kSGFuZGxlcigpOyB9KTtcbn1cblxuY29uc3QgQ0FDSEVfS0VZID0gJ1NvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJEZWZhdWx0QXV0aG9yaXphdGlvbkNhY2hlJztcbmZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRBdXRob3JpemF0aW9uQ2FjaGUoKSB7XG4gICAgbGV0IHN0b3JhZ2U7XG4gICAgdHJ5IHtcbiAgICAgICAgc3RvcmFnZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2U7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lbXB0eVxuICAgIH1cbiAgICBjYXRjaCAoX2EpIHsgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGNsZWFyKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXN0b3JhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnJlbW92ZUl0ZW0oQ0FDSEVfS0VZKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChfYSkgeyB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXN0b3JhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHN0b3JhZ2UuZ2V0SXRlbShDQUNIRV9LRVkpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZCAmJiBwYXJzZWQuYWNjb3VudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFjY291bnRzID0gcGFyc2VkLmFjY291bnRzLm1hcCgoYWNjb3VudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGFjY291bnQpLCB7IHB1YmxpY0tleTogJ3B1YmxpY0tleScgaW4gYWNjb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXcgVWludDhBcnJheShPYmplY3QudmFsdWVzKGFjY291bnQucHVibGljS2V5KSkgLy8gUmVidWlsZCBwdWJsaWNLZXkgZm9yIFdhbGxldEFjY291bnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYmFzZTU4LmRlY29kZShhY2NvdW50LmFkZHJlc3MpIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwYXJzZWQpLCB7IGFjY291bnRzOiBwYXJzZWRBY2NvdW50cyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkIHx8IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChfYSkgeyB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KGF1dGhvcml6YXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzdG9yYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgc3RvcmFnZS5zZXRJdGVtKENBQ0hFX0tFWSwgSlNPTi5zdHJpbmdpZnkoYXV0aG9yaXphdGlvbikpO1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZW1wdHlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRDaGFpblNlbGVjdG9yKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHNlbGVjdChjaGFpbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoYWlucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoYWluc1swXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hhaW5zLmluY2x1ZGVzKFNPTEFOQV9NQUlOTkVUX0NIQUlOKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU09MQU5BX01BSU5ORVRfQ0hBSU47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoYWluc1swXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgIH07XG59XG5cbmV4cG9ydCB7IExvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldCwgUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldCwgU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlclJlbW90ZVdhbGxldE5hbWUsIFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXROYW1lLCBjcmVhdGVEZWZhdWx0QXV0aG9yaXphdGlvbkNhY2hlLCBjcmVhdGVEZWZhdWx0Q2hhaW5TZWxlY3RvciwgY3JlYXRlRGVmYXVsdFdhbGxldE5vdEZvdW5kSGFuZGxlciwgZGVmYXVsdEVycm9yTW9kYWxXYWxsZXROb3RGb3VuZEhhbmRsZXIsIHJlZ2lzdGVyTXdhIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@solana-mobile+wallet-standard-mobile@0.4.4_@solana+wallet-adapter-base@0.9.27_@solana+_39868dbcc2f88d65392fd1560d5edecc/node_modules/@solana-mobile/wallet-standard-mobile/lib/esm/index.js\n");

/***/ })

};
;